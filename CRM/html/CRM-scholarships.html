<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scholarships - Ellacy CRM</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="../js/main.js"></script>
</head>
<body class="bg-gray-50">
    <div class="flex h-screen overflow-hidden">
        <!-- Sidebar -->
        <aside class="fixed left-0 top-0 h-screen w-64 bg-white shadow-lg">
            <div class="p-6">
                <div class="flex items-center mb-2">
                    <img src="../../ApplyLead_logo.png" alt="ApplyLead" class="h-9">
                </div>
                <div class="flex items-center">
                    <span class="px-2 py-1 text-xs font-medium bg-red-100 text-red-800 rounded-full">Admin</span>
                </div>
            </div>
            <nav class="mt">
                <a href="CRM-dashboard.html" class="flex items-center px-6 py-3 text-gray-600 hover:bg-gray-50">
                    <i data-lucide="layout-dashboard" class="w-5 h-5 mr-3"></i>
                    Dashboard
                </a>
                <a href="CRM-applications.html" class="flex items-center px-6 py-3 text-gray-600 hover:bg-gray-50">
                    <i data-lucide="file-text" class="w-5 h-5 mr-3"></i>
                    Applications
                </a>
                <a href="CRM-agent.html" class="flex items-center px-6 py-3 text-gray-600 hover:bg-gray-50">
                    <i data-lucide="users" class="w-5 h-5 mr-3"></i>
                    Agents
                </a>
                <a href="CRM-scholarships.html" class="flex items-center px-6 py-3 text-white" style="background-color: #d82128;">
                    <i data-lucide="graduation-cap" class="w-5 h-5 mr-3"></i>
                    Scholarships
                </a>
                <a href="CRM-institutions.html" class="flex items-center px-6 py-3 text-gray-600 hover:bg-gray-50">
                    <i data-lucide="building" class="w-5 h-5 mr-3"></i>
                    Institutions
                </a>
                <a href="CRM-students.html" class="flex items-center px-6 py-3 text-gray-600 hover:bg-gray-50">
                    <i data-lucide="user" class="w-5 h-5 mr-3"></i>
                    Students
                </a>
                <a href="CRM-payment.html" class="flex items-center px-6 py-3 text-gray-600 hover:bg-gray-50">
                    <i data-lucide="credit-card" class="w-5 h-5 mr-3"></i>
                    Payments
                </a>
                <a href="CRM-tasks.html" class="flex items-center px-6 py-3 text-gray-600 hover:bg-gray-50">
                    <i data-lucide="check-circle" class="w-5 h-5 mr-3"></i>
                    Tasks
                </a>
                <a href="CRM-Campaigns.html" class="flex items-center px-6 py-3 text-gray-600 hover:bg-gray-50">
                    <i data-lucide="brick-wall-shield" class="w-5 h-5 mr-3"></i>
                    Campaigns
                </a>
                <a href="CRM-report.html" class="flex items-center px-6 py-3 text-gray-600 hover:bg-gray-50">
                    <i data-lucide="bar-chart" class="w-5 h-5 mr-3"></i>
                    Reports
                </a>
                <a href="CRM-messages.html" class="flex items-center px-6 py-3 text-gray-600 hover:bg-gray-50">
                    <i data-lucide="message-circle" class="w-5 h-5 mr-3"></i>
                    Messages
                </a>
                <a href="CRM-user-admin.html" class="flex items-center px-6 py-3 text-gray-600 hover:bg-gray-50">
                    <i data-lucide="shield" class="w-5 h-5 mr-3"></i>
                    User Admin
                </a>
                <a href="CRM-Setting.html" class="flex items-center px-6 py-3 text-gray-600 hover:bg-gray-50">
                    <i data-lucide="settings" class="w-5 h-5 mr-3"></i>
                    Settings
                </a>
            </nav>
            <div class="mt-auto px-6 py-4 border-t border-gray-200">
                <p class="text-sm text-gray-600 text-center">Designed & developed by Innotech Viet Nam</p>
            </div>
        </aside>

        <!-- Main Content -->
        <div class="ml-64 flex-1 flex flex-col overflow-hidden">
            <!-- Header -->
            <header class="h-16 bg-white shadow-sm flex items-center justify-between px-6">
                <h2 class="text-xl font-semibold text-gray-800">Scholarships</h2>
                <div class="flex items-center">
                    <button class="p-2 hover:bg-gray-100 rounded-full">
                        <i data-lucide="bell" class="w-5 h-5 text-gray-600"></i>
                    </button>
                    <div class="relative ml-4" id="profile-menu">
                        <button class="flex items-center">
                            <img src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80"
                                alt="Admin profile" class="w-8 h-8 rounded-full object-cover">
                        </button>
                        <div id="profile-dropdown" class="hidden absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg py-2">
                            <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Profile</a>
                            <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Settings</a>
                            <hr class="my-2">
                            <button onclick="handleLogout()" class="w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100">Logout</button>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Filter & Search Bar -->
            <div class="p-6">
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-4">
                        <div class="relative">
                            <i data-lucide="search" class="w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                            <input type="text" placeholder="Search scholarships..." class="pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-red-400 focus:border-red-400 w-64">
                        </div>
                        <button id="filter-toggle" class="inline-flex items-center px-4 py-2 border border-red-400 text-red-400 rounded-lg hover:bg-red-50 transition-colors">
                            <i data-lucide="filter" class="w-4 h-4 mr-2"></i>
                            Filters
                        </button>
                    </div>
                    <button onclick="openAddScholarshipModal()" class="inline-flex items-center px-4 py-2 bg-red-400 text-white text-sm font-medium rounded-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                        <i data-lucide="plus" class="w-4 h-4 mr-1.5"></i>
                        Add New Scholarship
                    </button>
                </div>
            </div>

            <!-- Filter Drawer Backdrop -->
            <div id="filter-backdrop" class="fixed inset-0 bg-black bg-opacity-50 z-40 opacity-0 pointer-events-none transition-opacity duration-300">
            </div>

            <!-- Filter Drawer -->
            <div id="filter-drawer" class="fixed top-0 right-0 h-full w-96 bg-white shadow-xl transform translate-x-full transition-transform duration-300 ease-in-out z-50 overflow-y-auto">
                <div class="p-4 border-b flex justify-between items-center sticky top-0 bg-white z-10">
                    <h3 class="text-lg font-medium text-gray-900">Filters</h3>
                    <button id="close-filter" class="text-gray-400 hover:text-red-400">
                        <i data-lucide="x" class="w-6 h-6"></i>
                    </button>
                </div>
                <div class="p-4 space-y-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Source</label>
                        <select class="w-full rounded-md border-gray-300">
                            <option>All Sources</option>
                            <option>Ellacy Foundation</option>
                            <option>Partner Institution</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Country</label>
                        <select class="w-full rounded-md border-gray-300">
                            <option>All Countries</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Status</label>
                        <select class="w-full rounded-md border-gray-300">
                            <option>All Status</option>
                            <option>Active</option>
                            <option>Expired</option>
                            <option>Draft</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Institution</label>
                        <select class="w-full rounded-md border-gray-300">
                            <option>All Institutions</option>
                            <option>University of Melbourne</option>
                            <option>University of Sydney</option>
                            <option>Imperial College London</option>
                            <option>University of Toronto</option>
                        </select>
                    </div>
                </div>
                <!-- Drawer Footer -->
                <div class="p-4 border-t flex justify-end space-x-3 sticky bottom-0 bg-white">
                    <button id="reset-filters" class="px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg">
                        Reset
                    </button>
                    <button id="apply-filters" class="px-4 py-2 text-sm font-medium text-white rounded-lg transition-colors hover:opacity-90" style="background-color: #d82128;">
                        Apply Filters
                    </button>
                </div>
            </div>

            <!-- Scholarships Table -->
            <div class="p-6 pt-4">
                <div class="bg-white rounded-lg shadow">
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Scholarship Name</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Institution</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Source</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Award Value</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Deadline</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Assigned</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200">
                                <!-- Sample Row -->
                                <tr>
                                    <td class="px-6 py-4">
                                        <div class="text-sm font-medium text-red-400 hover:text-blue-800 cursor-pointer" onclick="openScholarshipDetail()">
                                            Merit Scholarship 2025
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 text-sm text-gray-500">University of Melbourne</td>
                                    <td class="px-6 py-4 text-sm text-gray-500">Ellacy Foundation</td>
                                    <td class="px-6 py-4 text-sm text-gray-500">Up to $5,000</td>
                                    <td class="px-6 py-4 text-sm text-gray-500">Dec 31, 2025</td>
                                    <td class="px-6 py-4 text-sm text-gray-500">3/10</td>
                                    <td class="px-6 py-4">
                                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">
                                            Active
                                        </span>
                                    </td>
                                    <td class="px-6 py-4 text-sm">
                                        <button class="text-red-400 hover:text-blue-900 mr-2" onclick="openScholarshipDetail()">
                                            <i data-lucide="eye" class="w-4 h-4"></i>
                                        </button>
                                        <!-- <button class="text-gray-600 hover:text-gray-900 mr-2" onclick="openEditScholarshipModal()">
                                            <i data-lucide="edit" class="w-4 h-4"></i>
                                        </button> -->
                                        <button class="text-gray-600 hover:text-gray-900">
                                            <i data-lucide="archive" class="w-4 h-4"></i>
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- AI Assistant Floating Button -->
    <div id="ai-assistant" class="fixed bottom-6 right-6 z-50">
        <button id="ai-toggle" class="w-14 h-14 rounded-full text-white shadow-lg hover:shadow-xl transition-all duration-300 flex items-center justify-center" style="background-color: #d82128;">
            <i data-lucide="message-circle" class="w-6 h-6"></i>
        </button>
        
        <!-- AI Chat Panel -->
        <div id="ai-chat-panel" class="hidden absolute bottom-16 right-0 w-80 h-96 bg-white rounded-lg shadow-xl border border-gray-200">
            <!-- Chat Header -->
            <div class="flex items-center justify-between p-4 border-b border-gray-200" style="background-color: #d82128;">
                <div class="flex items-center">
                    <div class="w-8 h-8 rounded-full bg-red-100 flex items-center justify-center mr-3">
                        <i data-lucide="bot" class="w-4 h-4" style="color: #d82128;"></i>
                    </div>
                    <div>
                        <h3 class="text-sm font-medium text-white">AI Assistant</h3>
                        <p class="text-xs text-red-100">Online</p>
                    </div>
                </div>
                <button id="ai-close" class="text-white hover:text-red-100">
                    <i data-lucide="x" class="w-4 h-4"></i>
                </button>
            </div>
            
            <!-- Chat Messages -->
            <div id="chat-messages" class="flex-1 p-4 h-64 overflow-y-auto">
                <div class="mb-4">
                    <div class="flex items-start">
                        <div class="w-6 h-6 rounded-full bg-red-100 flex items-center justify-center mr-2 mt-1">
                            <i data-lucide="bot" class="w-3 h-3" style="color: #d82128;"></i>
                        </div>
                        <div class="bg-gray-100 rounded-lg p-3 max-w-xs">
                            <p class="text-sm text-gray-800">Hello! I can help you optimize scholarship programs, analyze utilization rates, and improve student matching. What would you like to know?</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Chat Input -->
            <div class="p-4 border-t border-gray-200">
                <div class="flex items-center">
                    <input type="text" id="chat-input" placeholder="Ask about scholarships..." class="flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                    <button id="send-message" class="ml-2 p-2 rounded-lg text-white" style="background-color: #d82128;">
                        <i data-lucide="send" class="w-4 h-4"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add/Edit Scholarship Modal (Extended) -->
    <div id="scholarshipModal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full">
        <div class="relative top-10 mx-auto p-6 border w-4/5 max-w-6xl shadow-lg rounded-md bg-white max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center pb-4 border-b border-gray-200">
                <h3 class="text-xl font-semibold" id="modalTitle">Add New Scholarship</h3>
                <button onclick="closeScholarshipModal()" class="text-gray-400 hover:text-gray-500">
                    <i data-lucide="x" class="w-6 h-6"></i>
                </button>
            </div>

            <!-- Preview Card -->
            <div class="mt-6 mb-6 bg-gray-50 rounded-lg p-4 border border-gray-200">
                <div class="flex items-center">
                    <div class="w-16 h-16 bg-gray-200 rounded-lg flex items-center justify-center mr-4">
                        <i data-lucide="building" class="w-8 h-8 text-gray-400"></i>
                    </div>
                    <div class="flex-1">
                        <div class="flex items-center space-x-3 mb-2">
                            <h4 id="preview-program-name" class="text-lg font-semibold text-gray-900">Program Name</h4>
                            <span class="px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800">Canada College</span>
                            <span class="px-2 py-1 text-xs rounded-full bg-purple-100 text-purple-800">Public School</span>
                        </div>
                        <p id="preview-degree-level" class="text-sm text-gray-500">Associate degree - Arts, Design & Architecture</p>
                    </div>
                </div>
            </div>

            <!-- Basic Fields Section -->
            <div class="mb-6">
                <h4 class="text-lg font-medium text-gray-900 mb-4">Basic Information</h4>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Scholarship Name <span class="text-red-500">*</span></label>
                        <input id="scholarship-name-input" type="text" class="w-full rounded-md border-gray-300" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Source <span class="text-red-500">*</span></label>
                        <select class="w-full rounded-md border-gray-300" required>
                            <option value="">Select Source</option>
                            <option>Ellacy Foundation</option>
                            <option>Partner Institution</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Institution <span class="text-red-500">*</span></label>
                        <select class="w-full rounded-md border-gray-300" required>
                            <option value="">Select Institution</option>
                            <option>University of Melbourne</option>
                            <option>University of Sydney</option>
                            <option>Imperial College London</option>
                            <option>University of Toronto</option>
                            <option>Canada College</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Award Value <span class="text-red-500">*</span></label>
                        <input type="text" class="w-full rounded-md border-gray-300" placeholder="e.g. $5,000 or 50%" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Number of Awards</label>
                        <input type="number" class="w-full rounded-md border-gray-300" min="1">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Application Deadline <span class="text-red-500">*</span></label>
                        <input type="date" class="w-full rounded-md border-gray-300" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Status</label>
                        <select class="w-full rounded-md border-gray-300">
                            <option>Draft</option>
                            <option>Active</option>
                            <option>Expired</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Attachments</label>
                        <input type="file" class="w-full rounded-md border-gray-300" multiple accept=".pdf,.doc,.docx,.jpg,.png">
                    </div>
                    <div class="flex items-center">
                        <input type="checkbox" class="rounded border-gray-300 text-red-400" style="color: #d82128;">
                        <span class="ml-2 text-sm text-gray-600">Enable Auto-Match Tagging</span>
                    </div>
                </div>
            </div>

            <!-- Program & Institution Context -->
            <div class="mb-6">
                <h4 class="text-lg font-medium text-gray-900 mb-4">Program & Institution Context</h4>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Institution Logo</label>
                        <input type="file" class="w-full rounded-md border-gray-300" accept=".jpg,.png,.svg">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Institution Type Tags</label>
                        <select multiple class="w-full rounded-md border-gray-300" size="3">
                            <option>Canada College</option>
                            <option>Public School</option>
                            <option>Private Institution</option>
                            <option>University</option>
                            <option>Community College</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Program Duration</label>
                        <input type="text" class="w-full rounded-md border-gray-300" placeholder="e.g. Duration: 2 years">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Program Name <span class="text-red-500">*</span></label>
                        <input id="program-name-input" type="text" class="w-full rounded-md border-gray-300" placeholder="e.g. 3D Animation and Videogame Art" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Degree Level & Field</label>
                        <select id="degree-level-input" class="w-full rounded-md border-gray-300">
                            <option value="">Select Degree Level</option>
                            <option>Certificate - Arts, Design & Architecture</option>
                            <option>Diploma - Arts, Design & Architecture</option>
                            <option>Associate degree - Arts, Design & Architecture</option>
                            <option>Bachelor - Arts, Design & Architecture</option>
                            <option>Master - Arts, Design & Architecture</option>
                            <option>Bachelor - Business & Management</option>
                            <option>Master - Business & Management</option>
                            <option>Bachelor - Engineering & Technology</option>
                            <option>Master - Engineering & Technology</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Intake Period</label>
                        <select class="w-full rounded-md border-gray-300">
                            <option>2025 Jan</option>
                            <option>2025 May</option>
                            <option>2025 Sep</option>
                            <option>2026 Jan</option>
                            <option>2026 May</option>
                            <option>2026 Sep</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Tabbed Information Section -->
            <div class="mb-6">
                <h4 class="text-lg font-medium text-gray-900 mb-4">Detailed Information</h4>
                
                <!-- Tab Navigation -->
                <div class="border-b border-gray-200 mb-4">
                    <nav class="-mb-px flex space-x-6" aria-label="Tabs">
                        <button class="add-scholarship-tab-link border-b-2 border-red-500 py-3 text-sm font-medium text-red-600" data-tab="fees" style="border-color: #d82128; color: #d82128;">Fees</button>
                        <button class="add-scholarship-tab-link border-b-2 border-transparent py-3 text-sm font-medium text-gray-600 hover:text-gray-800 hover:border-gray-300" data-tab="requirements">Requirements</button>
                        <button class="add-scholarship-tab-link border-b-2 border-transparent py-3 text-sm font-medium text-gray-600 hover:text-gray-800 hover:border-gray-300" data-tab="course">Course Detail</button>
                    </nav>
                </div>

                <!-- Tab Panels -->
                <div class="max-h-64 overflow-y-auto">
                    <!-- Fees Tab -->
                    <section id="add-scholarship-tab-fees" class="add-scholarship-tab-panel">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Tuition Cost</label>
                                <div class="flex space-x-2">
                                    <input type="number" class="flex-1 rounded-md border-gray-300" placeholder="9912">
                                    <select class="w-24 rounded-md border-gray-300">
                                        <option>USD</option>
                                        <option>CAD</option>
                                        <option>AUD</option>
                                        <option>GBP</option>
                                    </select>
                                    <select class="w-24 rounded-md border-gray-300">
                                        <option>Annual</option>
                                        <option>Semester</option>
                                        <option>Monthly</option>
                                    </select>
                                </div>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Monthly Living Cost</label>
                                <div class="flex space-x-2">
                                    <input type="number" class="flex-1 rounded-md border-gray-300" placeholder="1459">
                                    <select class="w-24 rounded-md border-gray-300">
                                        <option>USD</option>
                                        <option>CAD</option>
                                        <option>AUD</option>
                                        <option>GBP</option>
                                    </select>
                                </div>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Application Fee</label>
                                <div class="flex space-x-2">
                                    <input type="number" class="flex-1 rounded-md border-gray-300" placeholder="250">
                                    <select class="w-24 rounded-md border-gray-300">
                                        <option>USD</option>
                                        <option>CAD</option>
                                        <option>AUD</option>
                                        <option>GBP</option>
                                    </select>
                                </div>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Application Deadline</label>
                                <input type="date" class="w-full rounded-md border-gray-300">
                            </div>
                        </div>
                    </section>

                    <!-- Requirements Tab -->
                    <section id="add-scholarship-tab-requirements" class="add-scholarship-tab-panel hidden">
                        <div class="space-y-4">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Minimum GPA</label>
                                    <input type="number" step="0.1" class="w-full rounded-md border-gray-300" placeholder="3.0">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Minimum IELTS</label>
                                    <input type="number" step="0.5" class="w-full rounded-md border-gray-300" placeholder="6.5">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Minimum TOEFL iBT</label>
                                    <input type="number" class="w-full rounded-md border-gray-300" placeholder="80">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Minimum Duolingo</label>
                                    <input type="number" class="w-full rounded-md border-gray-300" placeholder="105">
                                </div>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Academic Requirements</label>
                                <textarea class="w-full rounded-md border-gray-300" rows="3" placeholder="High school diploma or equivalent, relevant prerequisite courses..."></textarea>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Portfolio Requirements</label>
                                <textarea class="w-full rounded-md border-gray-300" rows="3" placeholder="Submit a portfolio showcasing artistic abilities..."></textarea>
                            </div>
                        </div>
                    </section>

                    <!-- Course Detail Tab -->
                    <section id="add-scholarship-tab-course" class="add-scholarship-tab-panel hidden">
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Program Overview</label>
                                <textarea class="w-full rounded-md border-gray-300" rows="4" placeholder="Comprehensive program description..."></textarea>
                            </div>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Core Courses</label>
                                    <textarea class="w-full rounded-md border-gray-300" rows="4" placeholder="List core courses, one per line..."></textarea>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Specialization Tracks</label>
                                    <textarea class="w-full rounded-md border-gray-300" rows="4" placeholder="List specialization options..."></textarea>
                                </div>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Semester Breakdown</label>
                                <textarea class="w-full rounded-md border-gray-300" rows="4" placeholder="Year 1 - Semester 1: ..."></textarea>
                            </div>
                        </div>
                    </section>
                </div>
            </div>

            <!-- CTA Buttons -->
            <div class="flex justify-end pt-4 border-t border-gray-200 space-x-3">
                <button onclick="closeScholarshipModal()" class="px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200">Cancel</button>
                <button onclick="saveScholarship()" class="px-4 py-2 text-white rounded-lg hover:opacity-90 flex items-center" style="background-color: #d82128;">
                    <i data-lucide="save" class="w-4 h-4 mr-2"></i>
                    Save Scholarship
                </button>
            </div>
        </div>
    </div>

    <!-- Scholarship Detail Drawer -->
    <div id="scholarshipDetailModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 hidden">
        <div class="absolute right-0 h-full w-3/5 bg-white shadow-xl">
            <div class="p-6 h-full flex flex-col">
                <div class="flex justify-between items-center mb-6">
                    <div>
                        <h3 id="scholarship-drawer-title" class="text-lg font-semibold text-gray-900">Scholarship Details</h3>
                        <p id="scholarship-drawer-subtitle" class="text-sm text-gray-500 hidden">Make changes to scholarship information</p>
                    </div>
                    <div class="flex items-center space-x-2">
                        <button id="scholarship-edit-toggle-btn" onclick="toggleScholarshipEditMode()" class="px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center">
                            <i data-lucide="edit" class="w-4 h-4 mr-1"></i>
                            Edit
                        </button>
                        <button id="scholarship-save-btn" onclick="saveScholarship()" class="hidden px-3 py-1 text-sm text-white rounded-lg flex items-center" style="background-color: #d82128;">
                            <i data-lucide="save" class="w-4 h-4 mr-1"></i>
                            Save Changes
                        </button>
                        <button id="scholarship-cancel-btn" onclick="cancelScholarshipEdit()" class="hidden px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">
                            Cancel
                        </button>
                        <button onclick="closeScholarshipDetail()" class="text-gray-500 hover:text-gray-700">
                            <i data-lucide="x" class="w-5 h-5"></i>
                        </button>
                    </div>
                </div>

                <!-- Institution Header Card -->
                <div class="mb-6">
                    <div class="flex items-center mb-4">
                        <img src="https://ui-avatars.com/api/?name=Canada+College&background=0D8ABC&color=fff" alt="Canada College" class="h-16 w-16 rounded-lg">
                        <div class="ml-4 flex-1">
                            <div class="flex items-center space-x-3 mb-2">
                                <div class="scholarship-view-mode">
                                    <h4 class="text-xl font-semibold text-gray-900">3D Animation and Videogame Art</h4>
                                </div>
                                <div class="scholarship-edit-mode hidden">
                                    <input type="text" class="text-xl font-semibold text-gray-900 border-gray-300 rounded" value="3D Animation and Videogame Art">
                                </div>
                                <span class="px-2 py-1 text-xs rounded-full bg-green-100 text-green-800">Active</span>
                                <span class="px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800">Canada College</span>
                                <span class="px-2 py-1 text-xs rounded-full bg-purple-100 text-purple-800">Public School</span>
                            </div>
                            <div class="flex items-center space-x-4 text-sm text-gray-500">
                                <div class="scholarship-view-mode">
                                    <span>Associate degree - Arts, Design & Architecture</span>
                                </div>
                                <div class="scholarship-edit-mode hidden">
                                    <input type="text" class="text-sm text-gray-500 border-gray-300 rounded" value="Associate degree - Arts, Design & Architecture">
                                </div>
                                <span>•</span>
                                <div class="scholarship-view-mode">
                                    <span>Duration: 2 years</span>
                                </div>
                                <div class="scholarship-edit-mode hidden">
                                    <input type="text" class="text-sm text-gray-500 border-gray-300 rounded" value="Duration: 2 years">
                                </div>
                                <span>•</span>
                                <div class="scholarship-view-mode">
                                    <select class="text-sm border-gray-300 rounded bg-white">
                                        <option selected>2026 Jan</option>
                                        <option>2026 May</option>
                                        <option>2026 Sep</option>
                                    </select>
                                </div>
                                <div class="scholarship-edit-mode hidden">
                                    <select class="text-sm border-gray-300 rounded">
                                        <option selected>2026 Jan</option>
                                        <option>2026 May</option>
                                        <option>2026 Sep</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tabs Navigation -->
                <div class="mb-4 border-b border-gray-200">
                    <nav class="-mb-px flex space-x-6" aria-label="Tabs">
                        <button class="scholarship-tab-link border-b-2 border-red-500 py-3 text-sm font-medium text-red-600" data-tab="fees">Fees</button>
                        <button class="scholarship-tab-link border-b-2 border-transparent py-3 text-sm font-medium text-gray-600 hover:text-gray-800 hover:border-gray-300" data-tab="requirements">Requirements</button>
                        <button class="scholarship-tab-link border-b-2 border-transparent py-3 text-sm font-medium text-gray-600 hover:text-gray-800 hover:border-gray-300" data-tab="course">Course Detail</button>
                    </nav>
                </div>

                <!-- Tab Panels -->
                <div class="flex-1 overflow-y-auto">
                    <!-- Fees Tab -->
                    <section id="scholarship-tab-fees" class="scholarship-tab-panel">
                        <div class="space-y-6">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div class="bg-gray-50 rounded-lg p-4">
                                    <h5 class="text-sm font-medium text-gray-900 mb-3">Tuition Cost</h5>
                                    <div class="scholarship-view-mode">
                                        <p class="text-2xl font-bold text-gray-900">$9,912 USD</p>
                                        <p class="text-sm text-gray-500">Annual</p>
                                    </div>
                                    <div class="scholarship-edit-mode hidden">
                                        <input type="text" class="text-2xl font-bold text-gray-900 border-gray-300 rounded mb-2" value="$9,912 USD">
                                        <input type="text" class="text-sm text-gray-500 border-gray-300 rounded" value="Annual">
                                    </div>
                                </div>
                                <div class="bg-gray-50 rounded-lg p-4">
                                    <h5 class="text-sm font-medium text-gray-900 mb-3">Monthly Living Cost</h5>
                                    <div class="scholarship-view-mode">
                                        <p class="text-2xl font-bold text-gray-900">$1,459 USD</p>
                                        <p class="text-sm text-gray-500">Per month</p>
                                    </div>
                                    <div class="scholarship-edit-mode hidden">
                                        <input type="text" class="text-2xl font-bold text-gray-900 border-gray-300 rounded mb-2" value="$1,459 USD">
                                        <input type="text" class="text-sm text-gray-500 border-gray-300 rounded" value="Per month">
                                    </div>
                                </div>
                                <div class="bg-gray-50 rounded-lg p-4">
                                    <h5 class="text-sm font-medium text-gray-900 mb-3">Application Fee</h5>
                                    <div class="scholarship-view-mode">
                                        <p class="text-2xl font-bold text-gray-900">$250 USD</p>
                                        <p class="text-sm text-gray-500">One-time</p>
                                    </div>
                                    <div class="scholarship-edit-mode hidden">
                                        <input type="text" class="text-2xl font-bold text-gray-900 border-gray-300 rounded mb-2" value="$250 USD">
                                        <input type="text" class="text-sm text-gray-500 border-gray-300 rounded" value="One-time">
                                    </div>
                                </div>
                                <div class="bg-gray-50 rounded-lg p-4">
                                    <h5 class="text-sm font-medium text-gray-900 mb-3">Application Deadline</h5>
                                    <div class="scholarship-view-mode">
                                        <p class="text-2xl font-bold text-gray-900">Nov 15, 2025</p>
                                        <p class="text-sm text-red-500 flex items-center">
                                            <i data-lucide="alert-triangle" class="w-4 h-4 mr-1"></i>
                                            28 days remaining
                                        </p>
                                    </div>
                                    <div class="scholarship-edit-mode hidden">
                                        <input type="date" class="text-lg font-bold text-gray-900 border-gray-300 rounded mb-2" value="2025-11-15">
                                        <p class="text-sm text-red-500 flex items-center">
                                            <i data-lucide="alert-triangle" class="w-4 h-4 mr-1"></i>
                                            28 days remaining
                                        </p>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Scholarship Award Information -->
                            <div class="bg-blue-50 rounded-lg p-4 border border-blue-200">
                                <h5 class="text-sm font-medium text-blue-900 mb-3">Scholarship Award</h5>
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                    <div>
                                        <p class="text-xs text-blue-700">Award Value</p>
                                        <div class="scholarship-view-mode">
                                            <p class="text-lg font-semibold text-blue-900">Up to $5,000</p>
                                        </div>
                                        <div class="scholarship-edit-mode hidden">
                                            <input type="text" class="text-lg font-semibold text-blue-900 border-blue-300 rounded" value="Up to $5,000">
                                        </div>
                                    </div>
                                    <div>
                                        <p class="text-xs text-blue-700">Available Spots</p>
                                        <div class="scholarship-view-mode">
                                            <p class="text-lg font-semibold text-blue-900">7 remaining</p>
                                        </div>
                                        <div class="scholarship-edit-mode hidden">
                                            <input type="number" class="text-lg font-semibold text-blue-900 border-blue-300 rounded" value="7">
                                        </div>
                                    </div>
                                    <div>
                                        <p class="text-xs text-blue-700">Source</p>
                                        <div class="scholarship-view-mode">
                                            <p class="text-lg font-semibold text-blue-900">Ellacy Foundation</p>
                                        </div>
                                        <div class="scholarship-edit-mode hidden">
                                            <select class="text-lg font-semibold text-blue-900 border-blue-300 rounded">
                                                <option selected>Ellacy Foundation</option>
                                                <option>Partner Institution</option>
                                                <option>Government</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Requirements Tab -->
                    <section id="scholarship-tab-requirements" class="scholarship-tab-panel hidden">
                        <div class="space-y-6">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div class="bg-gray-50 rounded-lg p-4">
                                    <h5 class="text-sm font-medium text-gray-900 mb-3">Academic Requirements</h5>
                                    <div class="scholarship-view-mode">
                                        <ul class="text-sm text-gray-700 space-y-2">
                                            <li class="flex items-center">
                                                <i data-lucide="check" class="w-4 h-4 text-green-500 mr-2"></i>
                                                GPA 3.0+ (85%+)
                                            </li>
                                            <li class="flex items-center">
                                                <i data-lucide="check" class="w-4 h-4 text-green-500 mr-2"></i>
                                                High school diploma or equivalent
                                            </li>
                                            <li class="flex items-center">
                                                <i data-lucide="check" class="w-4 h-4 text-green-500 mr-2"></i>
                                                Art portfolio submission
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="scholarship-edit-mode hidden">
                                        <textarea class="w-full text-sm text-gray-700 border-gray-300 rounded" rows="4">GPA 3.0+ (85%+)
High school diploma or equivalent
Art portfolio submission</textarea>
                                    </div>
                                </div>
                                <div class="bg-gray-50 rounded-lg p-4">
                                    <h5 class="text-sm font-medium text-gray-900 mb-3">Language Requirements</h5>
                                    <div class="scholarship-view-mode">
                                        <ul class="text-sm text-gray-700 space-y-2">
                                            <li class="flex items-center">
                                                <i data-lucide="check" class="w-4 h-4 text-green-500 mr-2"></i>
                                                IELTS: 6.5 overall (6.0 minimum per band)
                                            </li>
                                            <li class="flex items-center">
                                                <i data-lucide="check" class="w-4 h-4 text-green-500 mr-2"></i>
                                                TOEFL iBT: 80 overall
                                            </li>
                                            <li class="flex items-center">
                                                <i data-lucide="check" class="w-4 h-4 text-green-500 mr-2"></i>
                                                Duolingo: 105 overall
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="scholarship-edit-mode hidden">
                                        <textarea class="w-full text-sm text-gray-700 border-gray-300 rounded" rows="4">IELTS: 6.5 overall (6.0 minimum per band)
TOEFL iBT: 80 overall
Duolingo: 105 overall</textarea>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="bg-gray-50 rounded-lg p-4">
                                <h5 class="text-sm font-medium text-gray-900 mb-3">Portfolio Requirements</h5>
                                <div class="scholarship-view-mode">
                                    <p class="text-sm text-gray-700 mb-3">Submit a portfolio showcasing your artistic abilities and creativity in digital media:</p>
                                    <ul class="text-sm text-gray-700 space-y-2">
                                        <li class="flex items-center">
                                            <i data-lucide="check" class="w-4 h-4 text-green-500 mr-2"></i>
                                            10-15 original artworks (digital or traditional)
                                        </li>
                                        <li class="flex items-center">
                                            <i data-lucide="check" class="w-4 h-4 text-green-500 mr-2"></i>
                                            Artist statement (500 words max)
                                        </li>
                                        <li class="flex items-center">
                                            <i data-lucide="check" class="w-4 h-4 text-green-500 mr-2"></i>
                                            Optional: Animation reel or game design samples
                                        </li>
                                    </ul>
                                </div>
                                <div class="scholarship-edit-mode hidden">
                                    <textarea class="w-full text-sm text-gray-700 border-gray-300 rounded" rows="6">Submit a portfolio showcasing your artistic abilities and creativity in digital media:

10-15 original artworks (digital or traditional)
Artist statement (500 words max)
Optional: Animation reel or game design samples</textarea>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Course Detail Tab -->
                    <section id="scholarship-tab-course" class="scholarship-tab-panel hidden">
                        <div class="space-y-6">
                            <div class="bg-gray-50 rounded-lg p-4">
                                <h5 class="text-sm font-medium text-gray-900 mb-3">Program Overview</h5>
                                <div class="scholarship-view-mode">
                                    <p class="text-sm text-gray-700">This comprehensive 2-year program combines traditional art fundamentals with cutting-edge digital animation and game design techniques. Students will master industry-standard software and develop a professional portfolio.</p>
                                </div>
                                <div class="scholarship-edit-mode hidden">
                                    <textarea class="w-full text-sm text-gray-700 border-gray-300 rounded" rows="3">This comprehensive 2-year program combines traditional art fundamentals with cutting-edge digital animation and game design techniques. Students will master industry-standard software and develop a professional portfolio.</textarea>
                                </div>
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div class="bg-gray-50 rounded-lg p-4">
                                    <h5 class="text-sm font-medium text-gray-900 mb-3">Core Courses</h5>
                                    <div class="scholarship-view-mode">
                                        <ul class="text-sm text-gray-700 space-y-1">
                                            <li>• Digital Art Fundamentals</li>
                                            <li>• 3D Modeling & Texturing</li>
                                            <li>• Character Animation</li>
                                            <li>• Game Engine Basics</li>
                                            <li>• Visual Effects</li>
                                            <li>• Portfolio Development</li>
                                        </ul>
                                    </div>
                                    <div class="scholarship-edit-mode hidden">
                                        <textarea class="w-full text-sm text-gray-700 border-gray-300 rounded" rows="6">Digital Art Fundamentals
3D Modeling & Texturing
Character Animation
Game Engine Basics
Visual Effects
Portfolio Development</textarea>
                                    </div>
                                </div>
                                <div class="bg-gray-50 rounded-lg p-4">
                                    <h5 class="text-sm font-medium text-gray-900 mb-3">Specialization Tracks</h5>
                                    <div class="scholarship-view-mode">
                                        <ul class="text-sm text-gray-700 space-y-1">
                                            <li>• Game Art & Design</li>
                                            <li>• 3D Animation</li>
                                            <li>• Visual Effects</li>
                                            <li>• Motion Graphics</li>
                                        </ul>
                                    </div>
                                    <div class="scholarship-edit-mode hidden">
                                        <textarea class="w-full text-sm text-gray-700 border-gray-300 rounded" rows="4">Game Art & Design
3D Animation
Visual Effects
Motion Graphics</textarea>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="bg-gray-50 rounded-lg p-4">
                                <h5 class="text-sm font-medium text-gray-900 mb-3">Semester Breakdown</h5>
                                <div class="scholarship-view-mode">
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div>
                                            <h6 class="font-medium text-gray-800 mb-2">Year 1</h6>
                                            <p class="text-sm text-gray-600">Semester 1: Art fundamentals, digital tools</p>
                                            <p class="text-sm text-gray-600">Semester 2: 3D basics, character design</p>
                                        </div>
                                        <div>
                                            <h6 class="font-medium text-gray-800 mb-2">Year 2</h6>
                                            <p class="text-sm text-gray-600">Semester 3: Advanced animation, specialization</p>
                                            <p class="text-sm text-gray-600">Semester 4: Capstone project, portfolio</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="scholarship-edit-mode hidden">
                                    <textarea class="w-full text-sm text-gray-700 border-gray-300 rounded" rows="4">Year 1 - Semester 1: Art fundamentals, digital tools
Year 1 - Semester 2: 3D basics, character design
Year 2 - Semester 3: Advanced animation, specialization
Year 2 - Semester 4: Capstone project, portfolio</textarea>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>

                <!-- Admin Actions -->
                <div class="mt-6 pt-4 border-t border-gray-200">
                    <div class="flex flex-wrap gap-2">
                        <button class="px-3 py-2 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center">
                            <i data-lucide="upload" class="w-4 h-4 mr-1"></i>
                            Upload Documents
                        </button>
                        <button class="px-3 py-2 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center">
                            <i data-lucide="link" class="w-4 h-4 mr-1"></i>
                            Associate Records
                        </button>
                        <button class="px-3 py-2 text-sm text-white rounded-lg flex items-center" style="background-color: #d82128;">
                            <i data-lucide="user-plus" class="w-4 h-4 mr-1"></i>
                            Assign to Student
                        </button>
                        <button class="px-3 py-2 text-sm border border-red-300 text-red-600 rounded-lg hover:bg-red-50 flex items-center">
                            <i data-lucide="archive" class="w-4 h-4 mr-1"></i>
                            Archive Scholarship
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Initialize Lucide icons
        lucide.createIcons();

        // Modal functions
        function openAddScholarshipModal() {
            document.getElementById('modalTitle').textContent = 'Add New Scholarship';
            document.getElementById('scholarshipModal').classList.remove('hidden');
            
            // Reset preview card
            document.getElementById('preview-program-name').textContent = 'Program Name';
            document.getElementById('preview-degree-level').textContent = 'Associate degree - Arts, Design & Architecture';
            
            // Initialize tab functionality for add modal
            initializeAddScholarshipTabs();
        }

        function openEditScholarshipModal() {
            document.getElementById('modalTitle').textContent = 'Edit Scholarship';
            
            // Pre-populate form with existing data (in a real app, this would come from the selected row)
            const modal = document.getElementById('scholarshipModal');
            
            // Get form inputs
            const inputs = modal.querySelectorAll('input, select, textarea');
            
            // Sample data to populate (this would normally come from the selected scholarship)
            const scholarshipData = {
                name: 'Merit Scholarship 2025',
                source: 'Ellacy Foundation',
                awardValue: 'Up to $5,000',
                numberOfAwards: '10',
                deadline: '2025-12-31',
                autoMatch: true,
                minGPA: '3.0',
                minIELTS: '6.5',
                description: 'This scholarship is awarded to outstanding students who demonstrate academic excellence and leadership potential. Recipients will receive financial support to pursue their educational goals at partner institutions.'
            };
            
            // Populate the form fields
            inputs.forEach(input => {
                const label = input.previousElementSibling?.textContent?.toLowerCase() || 
                             input.closest('div')?.querySelector('label')?.textContent?.toLowerCase() || '';
                
                if (label.includes('scholarship name')) {
                    input.value = scholarshipData.name;
                } else if (label.includes('source')) {
                    input.value = scholarshipData.source;
                } else if (label.includes('award value')) {
                    input.value = scholarshipData.awardValue;
                } else if (label.includes('number of awards')) {
                    input.value = scholarshipData.numberOfAwards;
                } else if (label.includes('deadline')) {
                    input.value = scholarshipData.deadline;
                } else if (label.includes('auto-match') && input.type === 'checkbox') {
                    input.checked = scholarshipData.autoMatch;
                } else if (label.includes('minimum gpa')) {
                    input.value = scholarshipData.minGPA;
                } else if (label.includes('minimum ielts')) {
                    input.value = scholarshipData.minIELTS;
                } else if (label.includes('description')) {
                    input.value = scholarshipData.description;
                }
            });
            
            // Update button text for edit mode
            const saveButton = modal.querySelector('button[class*="bg-red-400"]');
            if (saveButton) {
                saveButton.innerHTML = '<i data-lucide="save" class="w-4 h-4 mr-1.5"></i>Update Scholarship';
            }
            
            modal.classList.remove('hidden');
            
            // Re-initialize Lucide icons for the new button
            lucide.createIcons();
        }

        function closeScholarshipModal() {
            const modal = document.getElementById('scholarshipModal');
            modal.classList.add('hidden');
            
            // Reset form fields
            const inputs = modal.querySelectorAll('input, select, textarea');
            inputs.forEach(input => {
                if (input.type === 'checkbox') {
                    input.checked = false;
                } else if (input.type === 'file') {
                    input.value = '';
                } else {
                    input.value = '';
                    if (input.tagName === 'SELECT') {
                        input.selectedIndex = 0;
                    }
                }
            });
            
            // Reset button text to default
            const saveButton = modal.querySelector('button[onclick="saveScholarship()"]');
            if (saveButton) {
                saveButton.innerHTML = '<i data-lucide="save" class="w-4 h-4 mr-2"></i>Save Scholarship';
            }
            
            // Reset title to default
            document.getElementById('modalTitle').textContent = 'Add New Scholarship';
            
            // Reset preview card
            document.getElementById('preview-program-name').textContent = 'Program Name';
            document.getElementById('preview-degree-level').textContent = 'Associate degree - Arts, Design & Architecture';
            
            // Reset to first tab
            switchAddScholarshipTab('fees');
            
            // Re-initialize Lucide icons
            lucide.createIcons();
        }

        // Save scholarship function with validation
        function saveScholarship() {
            // Get required fields
            const scholarshipName = document.getElementById('scholarship-name-input').value.trim();
            const programName = document.getElementById('program-name-input').value.trim();
            const source = document.querySelector('select[required]').value;
            const institution = document.querySelectorAll('select[required]')[1].value;
            const awardValue = document.querySelector('input[placeholder*="$5,000"]').value.trim();
            const deadline = document.querySelector('input[type="date"][required]').value;
            
            // Validation
            const requiredFields = [
                { value: scholarshipName, name: 'Scholarship Name' },
                { value: programName, name: 'Program Name' },
                { value: source, name: 'Source' },
                { value: institution, name: 'Institution' },
                { value: awardValue, name: 'Award Value' },
                { value: deadline, name: 'Application Deadline' }
            ];
            
            const missingFields = requiredFields.filter(field => !field.value);
            
            if (missingFields.length > 0) {
                const fieldNames = missingFields.map(field => field.name).join(', ');
                showNotification(`Please fill in required fields: ${fieldNames}`, 'error');
                return;
            }
            
            // Simulate saving
            showNotification('Scholarship saved successfully!', 'success');
            closeScholarshipModal();
        }

        // Scholarship detail drawer functionality
        let isScholarshipEditMode = false;

        function openScholarshipDetail() {
            setScholarshipViewMode();
            document.getElementById('scholarshipDetailModal').classList.remove('hidden');
        }

        function closeScholarshipDetail() {
            document.getElementById('scholarshipDetailModal').classList.add('hidden');
            setScholarshipViewMode(); // Reset to view mode when closing
        }

        function setScholarshipViewMode() {
            isScholarshipEditMode = false;
            
            // Update header
            document.getElementById('scholarship-drawer-title').textContent = 'Scholarship Details';
            document.getElementById('scholarship-drawer-subtitle').classList.add('hidden');
            
            // Show/hide buttons
            document.getElementById('scholarship-edit-toggle-btn').classList.remove('hidden');
            document.getElementById('scholarship-save-btn').classList.add('hidden');
            document.getElementById('scholarship-cancel-btn').classList.add('hidden');
            
            // Show view mode, hide edit mode
            document.querySelectorAll('.scholarship-view-mode').forEach(el => el.classList.remove('hidden'));
            document.querySelectorAll('.scholarship-edit-mode').forEach(el => el.classList.add('hidden'));
        }

        function setScholarshipEditMode() {
            isScholarshipEditMode = true;
            
            // Update header
            document.getElementById('scholarship-drawer-title').textContent = 'Edit Scholarship';
            document.getElementById('scholarship-drawer-subtitle').classList.remove('hidden');
            
            // Show/hide buttons
            document.getElementById('scholarship-edit-toggle-btn').classList.add('hidden');
            document.getElementById('scholarship-save-btn').classList.remove('hidden');
            document.getElementById('scholarship-cancel-btn').classList.remove('hidden');
            
            // Hide view mode, show edit mode
            document.querySelectorAll('.scholarship-view-mode').forEach(el => el.classList.add('hidden'));
            document.querySelectorAll('.scholarship-edit-mode').forEach(el => el.classList.remove('hidden'));
        }

        function toggleScholarshipEditMode() {
            if (isScholarshipEditMode) {
                setScholarshipViewMode();
            } else {
                setScholarshipEditMode();
            }
        }

        function saveScholarship() {
            // Here you would collect all form data and send to server
            // For now, simulate saving
            showNotification('Scholarship updated successfully!', 'success');
            setScholarshipViewMode();
        }

        function cancelScholarshipEdit() {
            // Reset form to original values (in a real app, you'd restore from saved data)
            setScholarshipViewMode();
        }

        // Tab switching for scholarship detail
        function switchScholarshipTab(tabName) {
            // Hide all tab panels
            document.querySelectorAll('.scholarship-tab-panel').forEach(panel => {
                panel.classList.add('hidden');
            });
            
            // Remove active state from all tab links
            document.querySelectorAll('.scholarship-tab-link').forEach(link => {
                link.classList.remove('border-red-500', 'text-red-600');
                link.classList.add('border-transparent', 'text-gray-600');
            });
            
            // Show selected tab panel
            const selectedPanel = document.getElementById(`scholarship-tab-${tabName}`);
            if (selectedPanel) {
                selectedPanel.classList.remove('hidden');
            }
            
            // Set active state for selected tab link
            const selectedLink = document.querySelector(`[data-tab="${tabName}"]`);
            if (selectedLink) {
                selectedLink.classList.remove('border-transparent', 'text-gray-600');
                selectedLink.classList.add('border-red-500', 'text-red-600');
            }
        }

        // Add Scholarship Modal Tab Functions
        function initializeAddScholarshipTabs() {
            document.querySelectorAll('.add-scholarship-tab-link').forEach(link => {
                link.addEventListener('click', function() {
                    const tabName = this.getAttribute('data-tab');
                    switchAddScholarshipTab(tabName);
                });
            });
        }

        function switchAddScholarshipTab(tabName) {
            // Hide all tab panels
            document.querySelectorAll('.add-scholarship-tab-panel').forEach(panel => {
                panel.classList.add('hidden');
            });
            
            // Remove active state from all tab links
            document.querySelectorAll('.add-scholarship-tab-link').forEach(link => {
                link.classList.remove('border-red-500', 'text-red-600');
                link.classList.add('border-transparent', 'text-gray-600');
                link.style.borderColor = '';
                link.style.color = '';
            });
            
            // Show selected tab panel
            const selectedPanel = document.getElementById(`add-scholarship-tab-${tabName}`);
            if (selectedPanel) {
                selectedPanel.classList.remove('hidden');
            }
            
            // Set active state for selected tab link
            const selectedLink = document.querySelector(`[data-tab="${tabName}"]`);
            if (selectedLink) {
                selectedLink.classList.remove('border-transparent', 'text-gray-600');
                selectedLink.classList.add('border-red-500', 'text-red-600');
                selectedLink.style.borderColor = '#d82128';
                selectedLink.style.color = '#d82128';
            }
        }

        // Update preview card when form fields change
        function updatePreviewCard() {
            const programName = document.getElementById('program-name-input').value || 'Program Name';
            const degreeLevel = document.getElementById('degree-level-input').value || 'Associate degree - Arts, Design & Architecture';
            
            document.getElementById('preview-program-name').textContent = programName;
            document.getElementById('preview-degree-level').textContent = degreeLevel;
        }

        // Initialize scholarship tab functionality
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('.scholarship-tab-link').forEach(link => {
                link.addEventListener('click', function() {
                    const tabName = this.getAttribute('data-tab');
                    switchScholarshipTab(tabName);
                });
            });

            // Add event listeners for preview card updates
            const programNameInput = document.getElementById('program-name-input');
            const degreeLevelInput = document.getElementById('degree-level-input');
            
            if (programNameInput) {
                programNameInput.addEventListener('input', updatePreviewCard);
            }
            if (degreeLevelInput) {
                degreeLevelInput.addEventListener('change', updatePreviewCard);
            }
        });

        // Notification function
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg transform transition-all duration-300 translate-x-full`;
            
            if (type === 'success') {
                notification.classList.add('bg-green-500', 'text-white');
            } else if (type === 'error') {
                notification.classList.add('bg-red-500', 'text-white');
            } else {
                notification.classList.add('bg-blue-500', 'text-white');
            }
            
            notification.innerHTML = `
                <div class="flex items-center">
                    <span>${message}</span>
                    <button onclick="this.parentElement.parentElement.remove()" class="ml-4 text-white hover:text-gray-200">
                        <i data-lucide="x" class="w-4 h-4"></i>
                    </button>
                </div>
            `;
            
            document.body.appendChild(notification);
            lucide.createIcons();
            
            // Slide in
            setTimeout(() => {
                notification.classList.remove('translate-x-full');
            }, 100);
            
            // Auto remove after 3 seconds
            setTimeout(() => {
                notification.classList.add('translate-x-full');
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }

        // Initialize Select2 for dropdowns
        $(document).ready(function() {
            $('select').select2({
                width: '100%'
            });
        });
    </script>
    <script>
        // Initialize Lucide icons
        lucide.createIcons();

        // Profile dropdown functionality
        const profileMenu = document.getElementById('profile-menu');
        const profileDropdown = document.getElementById('profile-dropdown');

        if (profileMenu && profileDropdown) {
            profileMenu.addEventListener('click', (e) => {
                e.stopPropagation();
                profileDropdown.classList.toggle('hidden');
            });

            // Close dropdown when clicking outside
            document.addEventListener('click', () => {
                profileDropdown.classList.add('hidden');
            });

            // Prevent dropdown from closing when clicking inside it
            profileDropdown.addEventListener('click', (e) => {
                e.stopPropagation();
            });
        }

        // AI Assistant functionality
        const aiToggle = document.getElementById('ai-toggle');
        const aiChatPanel = document.getElementById('ai-chat-panel');
        const aiClose = document.getElementById('ai-close');
        const chatInput = document.getElementById('chat-input');
        const sendMessage = document.getElementById('send-message');
        const chatMessages = document.getElementById('chat-messages');

        aiToggle.addEventListener('click', () => {
            aiChatPanel.classList.toggle('hidden');
        });

        aiClose.addEventListener('click', () => {
            aiChatPanel.classList.add('hidden');
        });

        function addMessage(message, isUser = false) {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'mb-4';
            
            if (isUser) {
                messageDiv.innerHTML = `
                    <div class="flex items-start justify-end">
                        <div class="rounded-lg p-3 max-w-xs text-white" style="background-color: #d82128;">
                            <p class="text-sm">${message}</p>
                        </div>
                    </div>
                `;
            } else {
                messageDiv.innerHTML = `
                    <div class="flex items-start">
                        <div class="w-6 h-6 rounded-full bg-red-100 flex items-center justify-center mr-2 mt-1">
                            <i data-lucide="bot" class="w-3 h-3" style="color: #d82128;"></i>
                        </div>
                        <div class="bg-gray-100 rounded-lg p-3 max-w-xs">
                            <p class="text-sm text-gray-800">${message}</p>
                        </div>
                    </div>
                `;
            }
            
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
            lucide.createIcons();
        }

        function handleSendMessage() {
            const message = chatInput.value.trim();
            if (message) {
                addMessage(message, true);
                chatInput.value = '';
                
                // Simulate AI response
                setTimeout(() => {
                    const responses = [
                        "Merit Scholarship 2025 has 3 out of 10 spots filled with a 70% utilization rate. The auto-matching algorithm is working well for GPA 3.5+ students.",
                        "I notice the University of Melbourne scholarships have the highest demand. Consider increasing the award pool or adding more partner institutions.",
                        "Scholarship deadline analysis shows 15 applications are pending review. Would you like me to prioritize by eligibility criteria?",
                        "The Ellacy Foundation scholarships show 85% success rate in student retention. Partner institution scholarships perform at 78% - consider reviewing criteria."
                    ];
                    const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                    addMessage(randomResponse);
                }, 1000);
            }
        }

        sendMessage.addEventListener('click', handleSendMessage);
        chatInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                handleSendMessage();
            }
        });

        // Handle logout
        function handleLogout() {
            // Add your logout logic here
            console.log('Logging out...');
            window.location.href = '../../login.html';
        }
    </script>
    <script>
        // Filter Drawer Functionality
        const filterToggle = document.getElementById('filter-toggle');
        const filterDrawer = document.getElementById('filter-drawer');
        const filterBackdrop = document.getElementById('filter-backdrop');
        const closeFilter = document.getElementById('close-filter');
        const applyFiltersBtn = document.getElementById('apply-filters');
        const resetFiltersBtn = document.getElementById('reset-filters');

        // Open drawer
        function openFilterDrawer() {
            filterDrawer.classList.remove('translate-x-full');
            filterBackdrop.classList.remove('opacity-0', 'pointer-events-none');
            filterBackdrop.classList.add('opacity-100');
            document.body.style.overflow = 'hidden';
        }

        // Close drawer
        function closeFilterDrawer() {
            filterDrawer.classList.add('translate-x-full');
            filterBackdrop.classList.add('opacity-0', 'pointer-events-none');
            filterBackdrop.classList.remove('opacity-100');
            document.body.style.overflow = '';
        }

        // Event Listeners
        if (filterToggle) filterToggle.addEventListener('click', openFilterDrawer);
        if (closeFilter) closeFilter.addEventListener('click', closeFilterDrawer);
        if (filterBackdrop) filterBackdrop.addEventListener('click', closeFilterDrawer);

        // Close with Escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeFilterDrawer();
            }
        });

        // Apply filters
        if (applyFiltersBtn) {
            applyFiltersBtn.addEventListener('click', () => {
                // Here you would typically apply the filters to your data
                closeFilterDrawer();
                showNotification('Filters applied successfully', 'success');
            });
        }

        // Reset filters
        if (resetFiltersBtn) {
            resetFiltersBtn.addEventListener('click', () => {
                const selects = filterDrawer.querySelectorAll('select');
                selects.forEach(select => {
                    select.selectedIndex = 0; // Reset to first option
                });
                // Here you would typically reset any filtered data
                showNotification('Filters reset', 'info');
            });
        }
    </script>
</body>
</html>
