<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Application Details - APPLYLEAD</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: #F3F4F6;
        }

        .sidebar {
            width: 250px;
            transition: all 0.3s;
        }

        .sidebar.collapsed {
            margin-left: -250px;
        }

        .main-content {
            transition: all 0.3s;
            margin-left: 250px;
            width: calc(100% - 250px);
        }

        .main-content.expanded {
            width: 100%;
            margin-left: 0;
        }

        .application-card {
            border-radius: 1.5rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }

        .timeline-step {
            position: relative;
            padding-left: 2rem;
            margin-bottom: 1rem;
        }

        .timeline-step:not(:last-child)::before {
            content: '';
            position: absolute;
            left: 0.4rem;
            top: 1.5rem;
            height: 100%;
            width: 2px;
            background-color: #E5E7EB;
        }

        .timeline-dot {
            position: absolute;
            left: 0;
            top: 0.25rem;
            width: 1rem;
            height: 1rem;
            border-radius: 50%;
            background-color: #9CA3AF;
        }

        .timeline-dot.completed {
            background-color: #d82128;
        }

        .timeline-dot.current {
            background-color: #FFFFFF;
            border: 2px solid #d82128;
            box-shadow: 0 0 0 3px rgba(237, 34, 23, 0.3);
        }

        .timeline-dot.current::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0.5rem;
            height: 0.5rem;
            background-color: #d82128;
            border-radius: 50%;
            transform: translate(-50%, -50%);
        }

        .timeline-dot.pending {
            background-color: #F59E0B;
        }
    </style>
</head>

<body class="bg-gray-50">
    <!-- Sidebar -->
    <aside class="fixed left-0 top-0 h-screen w-64 bg-white shadow-lg">
        <div class="p-6">
            <div class="flex items-center mb-2">
                <img src="../../ApplyLead_logo.png" alt="ApplyLead" class="h-9">
            </div>
            <div class="flex items-center">
                <span class="px-2 py-1 text-xs font-medium bg-red-100 text-red-800 rounded-full">Admin</span>
            </div>
        </div>
        <nav class="mt">
            <a href="CRM-dashboard.html" class="flex items-center px-6 py-3 text-gray-600 hover:bg-red-50">
                <i data-lucide="layout-dashboard" class="w-5 h-5 mr-3"></i>
                Dashboard
            </a>
            <a href="#" class="flex items-center px-6 py-3 text-white" style="background-color: #d82128;">
                <i data-lucide="file-text" class="w-5 h-5 mr-3"></i>
                Applications
            </a>
            <a href="CRM-agent.html" class="flex items-center px-6 py-3 text-gray-600 hover:bg-red-50">
                <i data-lucide="users" class="w-5 h-5 mr-3"></i>
                Agents
            </a>
            <a href="CRM-scholarships.html" class="flex items-center px-6 py-3 text-gray-600 hover:bg-red-50">
                <i data-lucide="graduation-cap" class="w-5 h-5 mr-3"></i>
                Scholarships
            </a>
            <a href="CRM-institutions.html" class="flex items-center px-6 py-3 text-gray-600 hover:bg-red-50">
                <i data-lucide="building" class="w-5 h-5 mr-3"></i>
                Institutions
            </a>
            <a href="CRM-students.html" class="flex items-center px-6 py-3 text-gray-600 hover:bg-red-50">
                <i data-lucide="user" class="w-5 h-5 mr-3"></i>
                Students
            </a>
            <a href="CRM-payment.html" class="flex items-center px-6 py-3 text-gray-600 hover:bg-red-50">
                <i data-lucide="credit-card" class="w-5 h-5 mr-3"></i>
                Payments
            </a>
            <a href="CRM-tasks.html" class="flex items-center px-6 py-3 text-gray-600 hover:bg-red-50">
                <i data-lucide="check-circle" class="w-5 h-5 mr-3"></i>
                Tasks
            </a>
            <a href="CRM-Campaigns.html" class="flex items-center px-6 py-3 text-gray-600 hover:bg-red-50">
                <i data-lucide="brick-wall-shield" class="w-5 h-5 mr-3"></i>
                Campaigns
            </a>
            <a href="CRM-report.html" class="flex items-center px-6 py-3 text-gray-600 hover:bg-red-50">
                <i data-lucide="bar-chart" class="w-5 h-5 mr-3"></i>
                Reports
            </a>
            <a href="CRM-messages.html" class="flex items-center px-6 py-3 text-gray-600 hover:bg-red-50">
                <i data-lucide="message-circle" class="w-5 h-5 mr-3"></i>
                Messages
            </a>
            <a href="CRM-user-admin.html" class="flex items-center px-6 py-3 text-gray-600 hover:bg-red-50">
                <i data-lucide="shield" class="w-5 h-5 mr-3"></i>
                User Admin
            </a>
            <a href="CRM-Setting.html" class="flex items-center px-6 py-3 text-gray-600 hover:bg-red-50">
                <i data-lucide="settings" class="w-5 h-5 mr-3"></i>
                Settings
            </a>
        </nav>
        <div class="mt-auto px-6 py-4 border-t border-gray-200">
            <p class="text-sm text-gray-600 text-center">Designed & developed by Innotech Viet Nam</p>
        </div>
    </aside>
    <!-- Main Content -->
    <div class="min-h-screen ml-64">
        <!-- Header with Navigation -->
        <header class="h-16 bg-white shadow-sm flex items-center justify-between px-6">
            <h2 class="text-xl font-semibold text-gray-900">Applications Details</h2>
            <div class="flex items-center space-x-4">
                <button class="p-2 hover:bg-red-50 rounded-full">
                    <i data-lucide="bell" class="w-5 h-5 text-gray-600"></i>
                </button>
                <div class="relative" id="profile-menu">
                    <button class="flex items-center">
                        <img src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80"
                            alt="Admin profile" class="w-8 h-8 rounded-full object-cover">
                    </button>
                    <div id="profile-dropdown" class="hidden absolute right-0 mt-2 w-48 bg-white rounded-xl shadow-lg py-1">
                        <a href="CRM-Setting.html" class="block px-4 py-2 text-sm text-gray-700 hover:bg-red-50">Settings</a>
                        <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-red-50" onclick="handleLogout()">Logout</a>
                    </div>
                </div>
            </div>
        </header>
        <!-- Page Header -->
        <main class="w-full px-0">
            <!-- Back to Applications Link -->
            <div class="px-8 pt-6">
                <a href="CRM-applications.html" class="flex items-center text-sm text-red-600 hover:text-red-800">
                    <i data-lucide="arrow-left" class="w-4 h-4 mr-1"></i>
                    Back to Applications
                </a>
            </div>
            <!-- Application Overview Card -->
            <div class="bg-white shadow-md p-8 mx-8 my-6 rounded-2xl">
                <div class="flex flex-col md:flex-row md:items-start md:justify-between gap-6">
                    <div class="flex-1">
                        <div class="flex items-start space-x-4">
                            <div class="flex-shrink-0">
                                <div
                                    class="h-16 w-16 rounded-full bg-red-100 flex items-center justify-center text-red-600 text-2xl font-semibold">
                                    SC
                                </div>
                            </div>
                            <div class="flex-1">
                                <h2 class="text-xl font-semibold text-gray-900">Sarah Chen</h2>
                                <p class="text-gray-600">Application ID: #APP-2024-00123</p>
                                <div class="mt-1">
                                    <span
                                        class="px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                                        Under Review
                                    </span>
                                </div>
                                <div class="mt-3 space-y-1 text-sm">
                                    <div class="flex items-center text-gray-600">
                                        <i data-lucide="phone" class="w-4 h-4 mr-2 text-gray-500"></i>
                                        <span>+1 (555) 123-4567</span>
                                    </div>
                                    <div class="flex items-center text-gray-600">
                                        <i data-lucide="mail" class="w-4 h-4 mr-2 text-gray-500"></i>
                                        <span>sarah.chen@example.com</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="flex flex-col space-y-3 w-full md:w-auto">
                        <button type="button"
                            class="inline-flex justify-center items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500">
                            <i data-lucide="message-square" class="-ml-1 mr-2 h-4 w-4 text-gray-600"></i>
                            Message
                        </button>
                        <button type="button"
                            class="inline-flex justify-center items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500">
                            <i data-lucide="edit-2" class="-ml-1 mr-2 h-4 w-4"></i>
                            Update Status
                        </button>
                        <button type="button"
                            class="inline-flex justify-center items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"
                            onclick="document.getElementById('assignAdvisorModal').classList.remove('hidden')">
                            <i data-lucide="user-plus" class="-ml-1 mr-2 h-4 w-4 text-red-600"></i>
                            Assign Advisor
                        </button>
                        <button type="button"
                            class="inline-flex justify-center items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"
                            onclick="document.getElementById('historyModal').classList.remove('hidden')">
                            <i data-lucide="clock" class="-ml-1 mr-2 h-4 w-4 text-red-600"></i>
                            View History
                        </button>
                    </div>
                </div>
            </div>

            <div class="flex flex-col lg:flex-row gap-6 mx-6">
                <!-- Left Column - Application Details -->
                <div class="w-full lg:w-9/12 space-y-6">
                    <div class="bg-white rounded-2xl shadow-md p-6">
                        <h3 class="text-lg font-semibold text-gray-900 mb-6">Application Information</h3>
                        <div class="overflow-x-auto">
                            <div class="grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4 sm:gap-6">
                                <div class="whitespace-normal">
                                    <h4 class="text-sm font-medium text-gray-500">Program</h4>
                                    <p class="mt-1 text-gray-900">Business Administration</p>
                                </div>
                                <div class="whitespace-normal">
                                    <h4 class="text-sm font-medium text-gray-500">University</h4>
                                    <p class="mt-1 text-gray-900">Tiffin University</p>
                                </div>
                                <div class="whitespace-normal">
                                    <h4 class="text-sm font-medium text-gray-500">Intake</h4>
                                    <p class="mt-1 text-gray-900">Spring 2026</p>
                                </div>
                                <div class="whitespace-normal">
                                    <h4 class="text-sm font-medium text-gray-500">Application Date</h4>
                                    <p class="mt-1 text-gray-900">March 15, 2024</p>
                                </div>
                                <div class="whitespace-normal">
                                    <h4 class="text-sm font-medium text-gray-500">Last Updated</h4>
                                    <p class="mt-1 text-gray-900">April 2, 2024</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Documents Section -->
                    <div class="bg-white rounded-2xl shadow-md p-6">
                        <!-- Initial Advising Step -->
                        <div id="docs-initial-advising" class="docs-panel space-y-4 hidden">
                            <h3 class="text-lg font-semibold text-gray-900 mb-6">Initial Advising</h3>
                            <div class="text-base text-gray-700">
                                <p>At this step, you need to review the student's information such as academic
                                    performance, English proficiency, visa history, family background, and financial
                                    status. Please review the student's profile and remind them to update any required
                                    details if the profile is not complete. You can <a
                                        href="Agency-my-student-detail.html" target="_blank"
                                        class="text-red-600 hover:text-red-700 font-medium">click here</a> to quickly
                                    view the student's profile.</p>
                            </div>
                        </div>

                        <div id="docs-application-in-progress" class="docs-panel space-y-4">
                            <!-- Application In Progress Step -->
                            <h3 class="text-lg font-semibold text-gray-900 mb-6">Application Documents</h3>
                            <!-- Document Item 1 -->
                            <div class="flex items-center justify-between p-4 border rounded-xl">
                                <div class="flex items-center">
                                    <i data-lucide="file-text" class="w-5 h-5 text-red-600 mr-3"></i>
                                    <div>
                                        <p class="font-medium">CV/Resume</p>
                                        <p class="text-sm text-gray-500">cv_resume.pdf • 250 KB</p>
                                        <p class="text-xs text-gray-400 mt-1">Uploaded: March 15, 2024</p>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <button class="p-2 text-gray-500 hover:text-red-600 rounded-full hover:bg-red-50"
                                        title="Preview">
                                        <i data-lucide="eye" class="w-4 h-4"></i>
                                    </button>
                                    <button class="p-2 text-gray-500 hover:text-gray-600 rounded-full hover:bg-gray-100"
                                        title="Download">
                                        <i data-lucide="download" class="w-4 h-4"></i>
                                    </button>
                                </div>
                            </div>

                            <!-- Document Item 2 -->
                            <div class="flex items-center justify-between p-4 border rounded-xl">
                                <div class="flex items-center">
                                    <i data-lucide="file-text" class="w-5 h-5 text-red-600 mr-3"></i>
                                    <div>
                                        <p class="font-medium">Academic Transcript</p>
                                        <p class="text-sm text-gray-500">id_passport_copy.pdf • 120 KB</p>
                                        <p class="text-xs text-gray-400 mt-1">Uploaded: March 15, 2024</p>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <button class="p-2 text-gray-500 hover:text-red-600 rounded-full hover:bg-red-50"
                                        title="Preview">
                                        <i data-lucide="eye" class="w-4 h-4"></i>
                                    </button>
                                    <button class="p-2 text-gray-500 hover:text-gray-600 rounded-full hover:bg-gray-100"
                                        title="Download">
                                        <i data-lucide="download" class="w-4 h-4"></i>
                                    </button>
                                </div>
                            </div>

                            <!-- Document Item 3 -->
                            <div class="flex items-center justify-between p-4 border rounded-xl">
                                <div class="flex items-center">
                                    <i data-lucide="file-text" class="w-5 h-5 text-gray-400 mr-3"></i>
                                    <div>
                                        <p class="font-medium">ID/Passport Copy</p>
                                        <p class="text-sm text-gray-500">Not uploaded yet</p>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <div class="relative">
                                        <input type="file" id="transcriptUpload" class="hidden"
                                            accept=".pdf,.doc,.docx">
                                        <button onclick="document.getElementById('transcriptUpload').click()"
                                            class="p-2 text-gray-500 hover:text-red-600 rounded-full hover:bg-gray-100"
                                            title="Upload file">
                                            <i data-lucide="upload" class="w-4 h-4"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <!-- Document Item 4 -->
                            <div class="flex items-center justify-between p-4 border rounded-xl">
                                <div class="flex items-center">
                                    <i data-lucide="file-text" class="w-5 h-5 text-red-600 mr-3"></i>
                                    <div>
                                        <p class="font-medium">English Proficiency Test</p>
                                        <p class="text-sm text-gray-500">english_proficiency_test.pdf • 50 KB</p>
                                        <p class="text-xs text-gray-400 mt-1">Uploaded: March 20, 2024</p>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <button class="p-2 text-gray-500 hover:text-red-600 rounded-full hover:bg-red-50"
                                        title="Preview">
                                        <i data-lucide="eye" class="w-4 h-4"></i>
                                    </button>
                                    <button class="p-2 text-gray-500 hover:text-gray-600 rounded-full hover:bg-gray-100"
                                        title="Download">
                                        <i data-lucide="download" class="w-4 h-4"></i>
                                    </button>
                                </div>
                            </div>

                            <!-- Document Item 5 -->
                            <div class="flex items-center justify-between p-4 border rounded-xl">
                                <div class="flex items-center">
                                    <i data-lucide="file-text" class="w-5 h-5 text-red-600 mr-3"></i>
                                    <div>
                                        <p class="font-medium">Financial Documents</p>
                                        <p class="text-sm text-gray-500">financial_documents.pdf • 20 KB</p>
                                        <p class="text-xs text-gray-400 mt-1">Uploaded: March 28, 2024</p>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <button class="p-2 text-gray-500 hover:text-red-600 rounded-full hover:bg-red-50"
                                        title="Preview">
                                        <i data-lucide="eye" class="w-4 h-4"></i>
                                    </button>
                                    <button class="p-2 text-gray-500 hover:text-gray-600 rounded-full hover:bg-gray-100"
                                        title="Download">
                                        <i data-lucide="download" class="w-4 h-4"></i>
                                    </button>
                                </div>
                            </div>

                            <!-- Document Item 6 -->
                            <div class="flex items-center justify-between p-4 border rounded-xl">
                                <div class="flex items-center">
                                    <i data-lucide="file-text" class="w-5 h-5 text-gray-400 mr-3"></i>
                                    <div>
                                        <p class="font-medium">Recommendation Letters</p>
                                        <p class="text-sm text-gray-500">Not uploaded yet</p>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <div class="relative">
                                        <input type="file" id="transcriptUpload" class="hidden"
                                            accept=".pdf,.doc,.docx">
                                        <button onclick="document.getElementById('transcriptUpload').click()"
                                            class="p-2 text-gray-500 hover:text-red-600 rounded-full hover:bg-gray-100"
                                            title="Upload file">
                                            <i data-lucide="upload" class="w-4 h-4"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <!-- Document Item 7 -->
                            <div class="flex items-center justify-between p-4 border rounded-xl">
                                <div class="flex items-center">
                                    <i data-lucide="file-text" class="w-5 h-5 text-gray-400 mr-3"></i>
                                    <div>
                                        <p class="font-medium">Statement of Purpose</p>
                                        <p class="text-sm text-gray-500">Not uploaded yet</p>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <div class="relative">
                                        <input type="file" id="transcriptUpload" class="hidden"
                                            accept=".pdf,.doc,.docx">
                                        <button onclick="document.getElementById('transcriptUpload').click()"
                                            class="p-2 text-gray-500 hover:text-red-600 rounded-full hover:bg-gray-100"
                                            title="Upload file">
                                            <i data-lucide="upload" class="w-4 h-4"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Submitted to School Step -->
                        <div id="docs-submitted-to-school" class="docs-panel space-y-4 hidden">
                            <h3 class="text-lg font-semibold text-gray-900 mb-6">Submitted to School</h3>
                            <div class="space-y-4">
                                <ul class="space-y-4">
                                    <li class="flex items-start">
                                        <div class="flex-shrink-0 mt-0.5">
                                            <div
                                                class="w-6 h-6 bg-red-100 rounded-full flex items-center justify-center">
                                                <span class="text-red-600 font-medium text-base">1</span>
                                            </div>
                                        </div>
                                        <div class="ml-3">
                                            <p class="text-base font-medium text-gray-900">Check student
                                                email/notifications regularly</p>
                                            <p class="text-base text-gray-600">Monitor the system so you can spot any
                                                school request for additional documents and alert the student right
                                                away.</p>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                            <div class="space-y-4">
                                <ul class="space-y-4">
                                    <li class="flex items-start">
                                        <div class="flex-shrink-0 mt-0.5">
                                            <div
                                                class="w-6 h-6 bg-red-100 rounded-full flex items-center justify-center">
                                                <span class="text-red-600 font-medium text-base">2</span>
                                            </div>
                                        </div>
                                        <div class="ml-3">
                                            <p class="text-base font-medium text-gray-900">Prepare or request digital
                                                copies/scans</p>
                                            <p class="text-base text-gray-600">Make sure all key papers (transcripts,
                                                diplomas, financial proof, etc.) are ready or ask the student to upload
                                                them promptly when the school asks.</p>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                            <div class="space-y-4">
                                <ul class="space-y-4">
                                    <li class="flex items-start">
                                        <div class="flex-shrink-0 mt-0.5">
                                            <div
                                                class="w-6 h-6 bg-red-100 rounded-full flex items-center justify-center">
                                                <span class="text-red-600 font-medium text-base">3</span>
                                            </div>
                                        </div>
                                        <div class="ml-3">
                                            <p class="text-base font-medium text-gray-900">Stay in contact with the
                                                student</p>
                                            <p class="text-base text-gray-600">Confirm when extra documents are
                                                submitted and keep the student updated on the application status.</p>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>

                        <!-- School Response Step -->
                        <div id="docs-school-response" class="docs-panel space-y-4 hidden">
                            <h3 class="text-lg font-semibold text-gray-900 mb-6">School Response</h3>
                            <div class="space-y-4">
                                <ul class="space-y-4">
                                    <li class="flex items-start">
                                        <div class="flex-shrink-0 mt-0.5">
                                            <div
                                                class="w-6 h-6 bg-red-100 rounded-full flex items-center justify-center">
                                                <span class="text-red-600 font-medium text-base">1</span>
                                            </div>
                                        </div>
                                        <div class="ml-3">
                                            <p class="text-base font-medium text-gray-900">Track school responses &
                                                extra document requests</p>
                                            <p class="text-base text-gray-600">Check each school’s status until every
                                                result is received.</p>
                                            <p class="text-base text-gray-600">Notify the student and guide them to
                                                upload any additional documents immediately when requested.</p>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                            <div class="space-y-4">
                                <ul class="space-y-4">
                                    <li class="flex items-start">
                                        <div class="flex-shrink-0 mt-0.5">
                                            <div
                                                class="w-6 h-6 bg-red-100 rounded-full flex items-center justify-center">
                                                <span class="text-red-600 font-medium text-base">2</span>
                                            </div>
                                        </div>
                                        <div class="ml-3">
                                            <p class="text-base font-medium text-gray-900">Communicate results to
                                                student</p>
                                            <p class="text-base text-gray-600">Inform the student of the admission
                                                outcomes once available.</p>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                            <div class="space-y-4">
                                <ul class="space-y-4">
                                    <li class="flex items-start">
                                        <div class="flex-shrink-0 mt-0.5">
                                            <div
                                                class="w-6 h-6 bg-red-100 rounded-full flex items-center justify-center">
                                                <span class="text-red-600 font-medium text-base">3</span>
                                            </div>
                                        </div>
                                        <div class="ml-3">
                                            <p class="text-base font-medium text-gray-900">Liaise with consultant</p>
                                            <p class="text-base text-gray-600">Share updates and notes to ensure all
                                                documents are collected on time.</p>
                                            <p class="text-base text-gray-600">Confirm that deadlines are monitored
                                                until all schools have reported their results.</p>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>

                        <!--Offer Letter Issued Step -->
                        <div id="docs-offered-letter-issued" class="docs-panel space-y-6">
                            <h3 class="text-lg font-semibold text-gray-900 mb-6">Offer Letter Status</h3>

                            <!-- Document Information -->
                            <div class="bg-white rounded-xl border border-gray-200 overflow-hidden">
                                <div class="p-6">
                                    <div class="flex items-start space-x-4 mb-6">
                                        <div class="p-3 rounded-lg bg-red-50">
                                            <i data-lucide="file-badge" class="w-6 h-6 text-red-600"></i>
                                        </div>
                                        <div class="flex-1">
                                            <h4 class="text-lg font-semibold text-gray-900">Offer Letter</h4>
                                            <div class="mt-2 space-y-1 text-sm text-gray-600">
                                                <p>Student: Sarah Chen</p>
                                                <p>School & Program: Tiffin University - Business Administration</p>
                                                <p>Issued Date: September 15, 2025</p>
                                            </div>
                                            <div class="mt-3 p-3 bg-gray-50 rounded-lg">
                                                <div class="flex items-center justify-between">
                                                    <div class="flex items-center space-x-3">
                                                        <i data-lucide="file-text"
                                                            class="w-5 h-5 text-red-600 mr-2"></i>
                                                        <span
                                                            class="font-medium">Offer_Letter_Sarah_Chen_2025.pdf</span>
                                                    </div>
                                                    <div class="flex items-center space-x-2">
                                                        <button
                                                            class="text-gray-500 hover:text-red-600 p-1 rounded-full hover:bg-gray-100">
                                                            <i data-lucide="eye" class="w-4 h-4"></i>
                                                        </button>
                                                        <button
                                                            class="text-gray-500 hover:text-red-600 p-1 rounded-full hover:bg-gray-100">
                                                            <i data-lucide="download" class="w-4 h-4"></i>
                                                        </button>
                                                        <span class="text-sm text-gray-500">1.8 MB</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Scholarships extracted/linked from Offer Letter -->
                                    <div class="mt-8">
                                        <h4 class="text-md font-semibold text-gray-900 mb-4">Scholarships from Offer Letter</h4>
                                        <div class="bg-white rounded-xl border border-gray-200 overflow-hidden">
                                            <div class="p-6 space-y-4">
                                                <div>
                                                    <div class="text-sm text-gray-700">
                                                        Using uploaded file: <span class="font-mono text-gray-900" id="offerFileName">Offer_Letter_Sarah_Chen_2025.pdf</span>
                                                    </div>
                                                    <div class="mt-2 flex items-center gap-2">
                                                        <button id="btnScanOfferDetail" class="px-3 py-2 text-sm border rounded-lg hover:bg-gray-50">Auto-scan from Offer</button>
                                                        <button id="btnSelectScholarDetail" class="px-3 py-2 text-sm border rounded-lg hover:bg-gray-50">Select</button>
                                                    </div>
                                                    <p class="text-xs text-gray-500 mt-1">Mockup: system simulates scanning text from the uploaded Offer Letter and matches against Admin-configured scholarships.</p>
                                                </div>
                                                <div>
                                                    <label class="block text-sm text-gray-600 mb-1">Linked Scholarships</label>
                                                    <div id="detailScholarChips" class="flex flex-wrap gap-2"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Agent Actions -->
                                    <div class="mt-8">
                                        <h4 class="text-md font-semibold text-gray-900 mb-4">Agent Actions</h4>
                                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                            <div class="border border-gray-200 rounded-lg p-4 hover:bg-gray-50">
                                                <h5 class="font-medium text-gray-900 flex items-center">
                                                    <i data-lucide="eye" class="w-4 h-4 mr-2 text-red-600"></i>
                                                    View / Download Offer Letter
                                                </h5>
                                                <p class="text-sm text-gray-600 mt-1">View or download the PDF to check
                                                    details.</p>
                                            </div>
                                            <div class="border border-gray-200 rounded-lg p-4 hover:bg-gray-50">
                                                <h5 class="font-medium text-gray-900 flex items-center">
                                                    <i data-lucide="check-circle" class="w-4 h-4 mr-2 text-red-600"></i>
                                                    Verify Details
                                                </h5>
                                                <p class="text-sm text-gray-600 mt-1">Verify personal information and
                                                    program details are correct.</p>
                                            </div>
                                            <div class="border border-gray-200 rounded-lg p-4 hover:bg-gray-50">
                                                <h5 class="font-medium text-gray-900 flex items-center">
                                                    <i data-lucide="message-square"
                                                        class="w-4 h-4 mr-2 text-red-600"></i>
                                                    Add Internal Notes
                                                </h5>
                                                <p class="text-sm text-gray-600 mt-1">Add feedback about steps (e.g.,
                                                    acceptance deadline, deposit requirements).</p>
                                            </div>
                                            <div class="border border-gray-200 rounded-lg p-4 hover:bg-gray-50">
                                                <h5 class="font-medium text-gray-900 flex items-center">
                                                    <i data-lucide="bell" class="w-4 h-4 mr-2 text-red-600"></i>
                                                    Notify Student
                                                </h5>
                                                <p class="text-sm text-gray-600 mt-1">Send reminders or messages to the
                                                    student if issues are found or confirmation is needed.</p>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Timeline -->
                                    <div class="mt-8">
                                        <h4 class="text-md font-semibold text-gray-900 mb-4">Timeline</h4>
                                        <div class="space-y-4">
                                            <div class="flex items-start">
                                                <div class="flex-shrink-0 w-2 h-2 mt-1.5 rounded-full bg-red-500"></div>
                                                <div class="ml-3">
                                                    <p class="text-sm font-medium text-gray-900">Issued on September 15,
                                                        2025</p>
                                                    <p class="text-sm text-gray-600">Date the offer letter was issued by
                                                        the school</p>
                                                </div>
                                            </div>
                                            <div class="flex items-start">
                                                <div class="flex-shrink-0 w-2 h-2 mt-1.5 rounded-full bg-red-500"></div>
                                                <div class="ml-3">
                                                    <p class="text-sm font-medium text-gray-900">Acceptance deadline:
                                                        November 15, 2025</p>
                                                    <p class="text-sm text-gray-600">Deadline for the student to confirm
                                                        acceptance (if any)</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!--Committed to school step -->
                        <div id="docs-committed-to-school" class="docs-panel space-y-6">
                            <!-- Header Section -->
                            <div class="flex justify-between items-center">
                                <h3 class="text-lg font-semibold text-gray-900">Commitment Status</h3>
                                <span
                                    class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-red-50 text-red-700 border border-red-200">
                                    <i data-lucide="clock" class="w-4 h-4 mr-1"></i>
                                    Pending Student Confirmation
                                </span>
                            </div>

                            <!-- Student & School Info -->
                            <div class="bg-white rounded-lg border border-gray-200 p-6">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div>
                                        <h4 class="text-sm font-medium text-gray-600">Student</h4>
                                        <p class="mt-1 text-gray-900 font-medium">Sarah Chen</p>
                                        <p class="text-sm text-gray-500">ID: SC2025001</p>
                                    </div>
                                    <div>
                                        <h4 class="text-sm font-medium text-gray-600">School & Program</h4>
                                        <p class="mt-1 text-gray-900 font-medium">Tiffin University</p>
                                        <p class="text-sm text-gray-600">Bachelor of Business Administration</p>
                                    </div>
                                </div>

                                <!-- Documents Section -->
                                <div class="mt-6 space-y-4">
                                    <h4 class="text-sm font-medium text-gray-700">Documents</h4>

                                    <!-- Offer Letter -->
                                    <div
                                        class="flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50">
                                        <div class="flex items-center space-x-3">
                                            <div class="p-2 rounded-lg bg-red-50">
                                                <i data-lucide="file-text" class="w-5 h-5 text-red-600"></i>
                                            </div>
                                            <div>
                                                <p class="text-sm font-medium text-gray-900">Offer Letter</p>
                                                <p class="text-xs text-gray-500">Tiffin_OfferLetter_SC2025001.pdf
                                                    (1.2MB)</p>
                                            </div>
                                        </div>
                                        <div class="flex space-x-1">
                                            <button
                                                class="text-gray-500 hover:text-red-600 p-1 rounded-full hover:bg-gray-100">
                                                <i data-lucide="eye" class="w-4 h-4"></i>
                                            </button>
                                            <button
                                                class="text-gray-500 hover:text-red-600 p-1 rounded-full hover:bg-gray-100">
                                                <i data-lucide="download" class="w-4 h-4"></i>
                                            </button>
                                            <span class="text-sm text-gray-500">1.8 MB</span>
                                        </div>
                                    </div>

                                    <!-- Student Acceptance -->
                                    <div
                                        class="flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50">
                                        <div class="flex items-center space-x-3">
                                            <div class="p-2 rounded-lg bg-red-50">
                                                <i data-lucide="file-text" class="w-5 h-5 text-red-400"></i>
                                            </div>
                                            <div>
                                                <p class="text-sm font-medium text-gray-900">Student Acceptance Letter
                                                </p>
                                                <p class="text-xs text-gray-500">Not uploaded yet</p>
                                            </div>
                                        </div>
                                        <span class="text-sm text-gray-400">-</span>
                                    </div>
                                </div>

                                <!-- Deadline -->
                                <div class="mt-6 p-4 bg-red-50 rounded-lg border border-red-100">
                                    <div class="flex items-center space-x-2">
                                        <i data-lucide="alert-circle" class="w-5 h-5 text-red-600"></i>
                                        <div>
                                            <p class="text-sm font-medium text-gray-900">Acceptance Deadline</p>
                                            <p class="text-sm text-red-700 font-medium">November 15, 2025 (45 days
                                                remaining)</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- Agent Tasks -->
                                <div class="mt-8">
                                    <h4 class="text-sm font-medium text-gray-700 mb-3">Agent Tasks</h4>
                                    <div class="space-y-4">
                                        <!-- Task 1 -->
                                        <div class="flex items-start space-x-3 p-3 rounded-lg hover:bg-gray-50">
                                            <div
                                                class="flex-shrink-0 w-6 h-6 rounded-full bg-red-100 flex items-center justify-center">
                                                <span class="text-xs font-medium text-red-600">1</span>
                                            </div>
                                            <div class="flex-1">
                                                <p class="text-sm font-medium text-gray-900">Track Student Confirmation
                                                </p>
                                                <p class="text-sm text-gray-600">Monitor student's response to the
                                                    acceptance email and document upload.</p>
                                                <div class="flex items-center mt-2 space-x-2">
                                                    <span
                                                        class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 border border-red-200">
                                                        <i data-lucide="mail" class="w-3 h-3 mr-1"></i>
                                                        Email: Pending
                                                    </span>
                                                    <span
                                                        class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 border border-red-200">
                                                        <i data-lucide="upload" class="w-3 h-3 mr-1"></i>
                                                        Document: Missing
                                                    </span>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Task 2 -->
                                        <div
                                            class="flex items-start space-x-3 p-3 rounded-lg hover:bg-gray-50 border-t border-gray-100">
                                            <div
                                                class="flex-shrink-0 w-6 h-6 rounded-full bg-red-100 flex items-center justify-center">
                                                <span class="text-xs font-medium text-red-600">2</span>
                                            </div>
                                            <div class="flex-1">
                                                <p class="text-sm font-medium text-gray-900">Verify and Record Decision
                                                </p>
                                                <p class="text-sm text-gray-600">Confirm school/program matches the
                                                    offer and student's choice.</p>
                                                <button
                                                    class="mt-2 inline-flex items-center text-sm font-medium text-red-600 hover:text-red-800">
                                                    <i data-lucide="check-circle" class="w-4 h-4 mr-1"></i>
                                                    Mark as Committed
                                                </button>
                                            </div>
                                        </div>

                                        <!-- Task 3 -->
                                        <div
                                            class="flex items-start space-x-3 p-3 rounded-lg hover:bg-gray-50 border-t border-gray-100">
                                            <div
                                                class="flex-shrink-0 w-6 h-6 rounded-full bg-red-100 flex items-center justify-center">
                                                <span class="text-xs font-medium text-red-600">3</span>
                                            </div>
                                            <div class="flex-1">
                                                <div
                                                    class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3">
                                                    <div>
                                                        <p class="text-sm font-medium text-gray-900">Send Reminder</p>
                                                        <p class="text-sm text-gray-600">Send a reminder to the student
                                                            about the upcoming deadline.</p>
                                                    </div>
                                                    <button
                                                        class="px-3 py-1 bg-red-600 hover:bg-red-700 text-white text-sm font-medium rounded-md whitespace-nowrap transition-colors">
                                                        <i data-lucide="bell" class="w-3.5 h-3.5 mr-1 inline"></i>
                                                        Send Reminder
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Visa Application -->
                        <div id="docs-visa-application" class="docs-panel space-y-6">
                            <!-- Header Section -->
                            <div class="flex justify-between items-center">
                                <h3 class="text-lg font-semibold text-gray-900">Visa Application Status</h3>
                                <span
                                    class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-red-50 text-red-700 border border-red-200">
                                    <i data-lucide="clock" class="w-4 h-4 mr-1"></i>
                                    In Progress
                                </span>
                            </div>

                            <!-- Visa Advisor & Status -->
                            <div class="bg-white rounded-lg border border-gray-200 p-6">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div>
                                        <h4 class="text-sm font-medium text-gray-600">Visa Advisor</h4>
                                        <p class="mt-1 text-gray-900 font-medium">John Smith</p>
                                        <p class="text-sm text-gray-600">john.smith@example.com</p>
                                        <p class="text-sm text-gray-600">+1 (555) 123-4567</p>
                                        <button class="mt-2 text-sm font-medium text-red-600 hover:text-red-800">
                                            <i data-lucide="edit" class="w-4 h-4 mr-1 inline"></i>
                                            Change Advisor
                                        </button>
                                    </div>
                                    <div>
                                        <h4 class="text-sm font-medium text-gray-600">Visa Progress</h4>
                                        <div class="mt-2 space-y-3">
                                            <div class="flex items-center">
                                                <span class="w-3 h-3 rounded-full bg-red-500 mr-2"></span>
                                                <a href="Agent-DS160.html" target="_blank" rel="noopener noreferrer"
                                                    class="text-sm text-gray-700 hover:text-red-600 hover:underline">DS-160
                                                    Form</a>
                                            </div>
                                            <div class="flex items-center">
                                                <span class="w-3 h-3 rounded-full bg-red-500 mr-2"></span>
                                                <a href="Agent-visa-prep.html" target="_blank" rel="noopener noreferrer"
                                                    class="text-sm text-gray-700 hover:text-red-600 hover:underline">Visa
                                                    Preparation Information</a>
                                            </div>
                                            <div class="flex items-center">
                                                <i data-lucide="calendar" class="w-4 h-4 text-gray-500 mr-2"></i>
                                                <span class="text-sm text-gray-700">Interview: Not Scheduled</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Deadlines & Actions -->
                                <div class="mt-8 grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div>
                                        <h4 class="text-sm font-medium text-gray-700 mb-3">Upcoming Deadlines</h4>
                                        <div class="space-y-3">
                                            <div class="p-3 bg-red-50 border border-red-100 rounded-lg">
                                                <div class="flex items-center">
                                                    <i data-lucide="alert-triangle"
                                                        class="w-5 h-5 text-red-600 mr-2"></i>
                                                    <div>
                                                        <p class="text-sm font-medium text-gray-900">DS-160 Submission
                                                        </p>
                                                        <p class="text-sm text-red-700">Due: October 15, 2025</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Pre-departure Step-->
                        <div id="docs-pre-departure" class="docs-panel space-y-6">
                            <div class="grid grid-cols-1 lg:grid-cols-5 gap-6">
                                <!-- Left Column - Pre-departure Checklist -->
                                <div class="lg:col-span-2">
                                    <div class="border border-gray-200 rounded-xl p-5 bg-white h-full">
                                        <h3 class="text-lg font-semibold text-gray-900 mb-4">Pre-departure Checklist
                                        </h3>
                                        <div class="space-y-3">
                                            <div
                                                class="flex items-center p-2 border border-gray-100 rounded hover:bg-gray-50">
                                                <div class="w-5 h-5 rounded border border-gray-300 mr-2 flex-shrink-0">
                                                </div>
                                                <span class="text-sm text-gray-700">Financial Statement</span>
                                            </div>
                                            <div
                                                class="flex items-center p-2 border border-gray-100 rounded hover:bg-gray-50">
                                                <div class="w-5 h-5 rounded border border-gray-300 mr-2 flex-shrink-0">
                                                </div>
                                                <span class="text-sm text-gray-700">Bank Statement</span>
                                            </div>
                                            <div
                                                class="flex items-center p-2 border border-gray-100 rounded hover:bg-gray-50">
                                                <div class="w-5 h-5 rounded border border-gray-300 mr-2 flex-shrink-0">
                                                </div>
                                                <span class="text-sm text-gray-700">University Transcript</span>
                                            </div>
                                            <div
                                                class="flex items-center p-2 border border-gray-100 rounded hover:bg-gray-50">
                                                <div class="w-5 h-5 rounded border border-gray-300 mr-2 flex-shrink-0">
                                                </div>
                                                <span class="text-sm text-gray-700">High School Diploma</span>
                                            </div>
                                            <div
                                                class="flex items-center p-2 border border-gray-100 rounded hover:bg-gray-50">
                                                <div class="w-5 h-5 rounded border border-gray-300 mr-2 flex-shrink-0">
                                                </div>
                                                <span class="text-sm text-gray-700">Test Scores</span>
                                            </div>
                                            <div
                                                class="flex items-center p-2 border border-gray-100 rounded hover:bg-gray-50">
                                                <div class="w-5 h-5 rounded border border-gray-300 mr-2 flex-shrink-0">
                                                </div>
                                                <span class="text-sm text-gray-700">English Certificate</span>
                                            </div>
                                            <div
                                                class="flex items-center p-2 border border-gray-100 rounded hover:bg-gray-50">
                                                <div class="w-5 h-5 rounded border border-gray-300 mr-2 flex-shrink-0">
                                                </div>
                                                <span class="text-sm text-gray-700">Passport & Visa</span>
                                            </div>
                                            <div
                                                class="flex items-center p-2 border border-gray-100 rounded hover:bg-gray-50">
                                                <div class="w-5 h-5 rounded border border-gray-300 mr-2 flex-shrink-0">
                                                </div>
                                                <span class="text-sm text-gray-700">I-20</span>
                                            </div>
                                            <div
                                                class="flex items-center p-2 border border-gray-100 rounded hover:bg-gray-50">
                                                <div class="w-5 h-5 rounded border border-gray-300 mr-2 flex-shrink-0">
                                                </div>
                                                <span class="text-sm text-gray-700">Vaccination Proof</span>
                                            </div>
                                            <div
                                                class="flex items-center p-2 border border-gray-100 rounded hover:bg-gray-50">
                                                <div class="w-5 h-5 rounded border border-gray-300 mr-2 flex-shrink-0">
                                                </div>
                                                <span class="text-sm text-gray-700">Acceptance Letter</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Right Column - Other Sections -->
                                <div class="lg:col-span-3 space-y-6">
                                    <!-- Training Session -->
                                    <div class="border border-gray-200 rounded-xl p-5 bg-white">
                                        <h3 class="text-lg font-semibold text-gray-900 mb-4">Pre-departure Training</h3>
                                        <div class="space-y-4">
                                            <div class="flex items-center justify-between">
                                                <div class="flex items-center">
                                                    <i data-lucide="calendar" class="w-5 h-5 text-red-600 mr-2"></i>
                                                    <span class="text-sm font-medium text-gray-900">Next Session:</span>
                                                </div>
                                                <span
                                                    class="px-3 py-1 bg-red-50 text-red-800 text-xs font-medium rounded-full border border-red-100">
                                                    Not Scheduled
                                                </span>
                                            </div>
                                            <div class="flex items-center justify-between">
                                                <div class="flex items-center">
                                                    <i data-lucide="users" class="w-5 h-5 text-red-600 mr-2"></i>
                                                    <span class="text-sm font-medium text-gray-900">Status:</span>
                                                </div>
                                                <span
                                                    class="px-3 py-1 bg-gray-100 text-gray-900 text-xs font-medium rounded-full border border-gray-200">
                                                    Pending
                                                </span>
                                            </div>
                                            <div class="pt-4 border-t border-gray-100 space-y-2">
                                                <button
                                                    class="text-sm font-medium text-red-600 hover:text-red-800 flex items-center">
                                                    <i data-lucide="calendar-plus" class="w-4 h-4 mr-1"></i>
                                                    Schedule Session
                                                </button>
                                                <a href="#" id="training-video-link" class="flex items-center text-sm font-medium text-red-600 hover:text-red-800">
                                                    <i data-lucide="play-circle" class="w-4 h-4 mr-1"></i>
                                                    Watch Training Video
                                                </a>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Travel Schedule -->
                                    <div class="border border-gray-200 rounded-xl p-5 bg-white">
                                        <h3 class="text-lg font-semibold text-gray-900 mb-4">Travel Schedule</h3>
                                        <div class="space-y-4">
                                            <div class="bg-gray-50 p-4 rounded-lg border border-gray-100">
                                                <div class="flex items-start space-x-3 mb-3">
                                                    <i data-lucide="plane" class="w-5 h-5 text-red-600 mt-0.5"></i>
                                                    <div class="flex-1">
                                                        <div class="flex justify-between items-start">
                                                            <div>
                                                                <p class="text-sm font-medium text-gray-900">Flight
                                                                    Details</p>
                                                                <p class="text-sm text-gray-600">Not yet shared</p>
                                                            </div>
                                                            <span
                                                                class="px-2 py-1 bg-gray-100 text-gray-900 text-xs rounded border border-gray-200">
                                                                Pending
                                                            </span>
                                                        </div>
                                                        <div class="mt-3">
                                                            <button
                                                                class="text-xs font-medium text-red-600 hover:text-red-800 flex items-center">
                                                                <i data-lucide="message-square"
                                                                    class="w-3.5 h-3.5 mr-1"></i>
                                                                Request Details
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Insurance Status -->
                                    <div class="border border-gray-200 rounded-xl p-5 bg-white">
                                        <div class="flex items-center justify-between mb-4">
                                            <h3 class="text-lg font-semibold text-gray-900">Insurance Status</h3>
                                            <span
                                                class="px-3 py-1 bg-red-50 text-red-800 text-xs font-medium rounded-full border border-red-100">
                                                Action Required
                                            </span>
                                        </div>

                                        <div class="space-y-4">
                                            <div class="bg-gray-50 p-4 rounded-lg border border-gray-100">
                                                <div class="flex flex-col space-y-3">
                                                    <div class="flex items-start justify-between">
                                                        <div class="flex items-start space-x-3">
                                                            <div class="p-2 bg-red-50 rounded-lg">
                                                                <i data-lucide="shield-check"
                                                                    class="w-5 h-5 text-red-600"></i>
                                                            </div>
                                                            <div>
                                                                <p class="text-sm font-medium text-gray-900">Insurance
                                                                    Coverage</p>
                                                                <p class="text-sm text-gray-600 mt-1">Not yet provided
                                                                </p>
                                                            </div>
                                                        </div>
                                                        <span
                                                            class="px-2 py-1 bg-red-50 text-red-700 text-xs font-medium rounded border border-red-100">
                                                            Required
                                                        </span>
                                                    </div>

                                                    <div class="flex flex-wrap gap-3 pt-2 border-t border-gray-100">
                                                        <button
                                                            class="flex items-center text-sm font-medium text-red-600 hover:text-red-800 transition-colors">
                                                            <i data-lucide="message-square" class="w-4 h-4 mr-1.5"></i>
                                                            Request Info
                                                        </button>
                                                        <button
                                                            class="flex items-center text-sm font-medium text-gray-600 hover:text-gray-800 transition-colors">
                                                            <i data-lucide="upload" class="w-4 h-4 mr-1.5"></i>
                                                            Upload Proof
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Arrival -->
                        <div id="docs-arrival" class="docs-panel space-y-6">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <!-- Arrival Details -->
                                <div class="border border-gray-200 rounded-xl p-5 bg-white">
                                    <h3 class="text-lg font-semibold text-gray-900 mb-4">Arrival Details</h3>
                                    <div class="space-y-4">
                                        <div class="flex items-start justify-between">
                                            <div class="flex items-center">
                                                <i data-lucide="calendar" class="w-5 h-5 text-red-600 mr-2"></i>
                                                <span class="text-sm font-medium text-gray-900">Arrival Status:</span>
                                            </div>
                                            <span
                                                class="px-3 py-1 bg-red-50 text-red-800 text-xs font-medium rounded-full border border-red-100">
                                                Confirmed - Sep 20, 2025
                                            </span>
                                        </div>

                                        <div class="bg-gray-50 p-4 rounded-lg border border-gray-100 space-y-3">
                                            <div class="flex items-start">
                                                <i data-lucide="clock" class="w-4 h-4 text-red-600 mt-0.5 mr-2"></i>
                                                <div>
                                                    <p class="text-sm font-medium text-gray-900">Flight Details</p>
                                                    <p class="text-sm text-gray-700">DL 1234 - Arrived at 15:30 (EST)
                                                    </p>
                                                    <p class="text-xs text-gray-500">Detroit Metro Airport (DTW)</p>
                                                </div>
                                            </div>
                                            <div class="flex items-start">
                                                <i data-lucide="map-pin" class="w-4 h-4 text-red-600 mt-0.5 mr-2"></i>
                                                <div>
                                                    <p class="text-sm font-medium text-gray-900">Campus Address</p>
                                                    <p class="text-sm text-gray-700">155 Miami St, Tiffin, OH 44883</p>
                                                    <p class="text-xs text-gray-500">Dorm: Franks Hall, Room 205</p>
                                                </div>
                                            </div>
                                            <div class="flex items-start">
                                                <i data-lucide="phone" class="w-4 h-4 text-red-600 mt-0.5 mr-2"></i>
                                                <div>
                                                    <p class="text-sm font-medium text-gray-900">Emergency Contact</p>
                                                    <p class="text-sm text-gray-700">Sarah Johnson (Aunt)</p>
                                                    <p class="text-xs text-gray-500">+1 (419) 555-0187</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- School Liaison -->
                                <div class="border border-gray-200 rounded-xl p-5 bg-white">
                                    <h3 class="text-lg font-semibold text-gray-900 mb-4">Tiffin University</h3>
                                    <div class="space-y-4">
                                        <div class="bg-gray-50 p-4 rounded-lg border border-gray-100">
                                            <div class="flex items-center space-x-3 mb-3">
                                                <div class="p-2 bg-red-50 rounded-lg">
                                                    <i data-lucide="user-check" class="w-5 h-5 text-red-600"></i>
                                                </div>
                                                <div>
                                                    <p class="text-sm font-medium text-gray-900">International Student
                                                        Office</p>
                                                    <p class="text-xs text-gray-500">Primary Contact</p>
                                                </div>
                                            </div>
                                            <div class="space-y-2 pl-11">
                                                <div class="flex items-center text-sm">
                                                    <i data-lucide="user" class="w-4 h-4 text-red-600 mr-2"></i>
                                                    <span class="text-gray-700">Dr. Michael Chen</span>
                                                </div>
                                                <div class="flex items-center text-sm">
                                                    <i data-lucide="mail" class="w-4 h-4 text-red-600 mr-2"></i>
                                                    <span class="text-gray-700">mchen@tiffin.edu</span>
                                                </div>
                                                <div class="flex items-center text-sm">
                                                    <i data-lucide="phone" class="w-4 h-4 text-red-600 mr-2"></i>
                                                    <span class="text-gray-700">+1 (419) 555-0123 ext. 456</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- First Month Check-in -->
                                <div class="border border-gray-200 rounded-xl p-5 bg-white">
                                    <div class="flex items-center justify-between mb-4">
                                        <h3 class="text-lg font-semibold text-gray-900">First Month Check-in</h3>
                                        <span
                                            class="px-3 py-1 bg-red-50 text-red-800 text-xs font-medium rounded-full border border-red-100">
                                            Scheduled: Oct 10
                                        </span>
                                    </div>
                                    <div class="space-y-4">
                                        <div class="bg-gray-50 p-4 rounded-lg border border-gray-100">
                                            <div class="grid grid-cols-2 gap-4">
                                                <div>
                                                    <p class="text-xs font-medium text-gray-500 mb-1">Date</p>
                                                    <p class="text-sm text-gray-900">Oct 10, 2025</p>
                                                </div>
                                                <div>
                                                    <p class="text-xs font-medium text-gray-500 mb-1">Time</p>
                                                    <p class="text-sm text-gray-900">14:00 - 14:45 (EST)</p>
                                                </div>
                                            </div>
                                            <div class="mt-4 pt-4 border-t border-gray-100">
                                                <button
                                                    class="text-sm font-medium text-red-600 hover:text-red-800 flex items-center">
                                                    <i data-lucide="video" class="w-4 h-4 mr-1"></i>
                                                    Join Meeting
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Current Status -->
                                <div class="border border-gray-200 rounded-xl p-5 bg-white">
                                    <h3 class="text-lg font-semibold text-gray-900 mb-4">Current Status</h3>
                                    <div class="space-y-3">
                                        <div class="flex items-start p-3 bg-red-50 rounded-lg border border-red-100">
                                            <i data-lucide="alert-circle" class="w-5 h-5 text-red-600 mr-2 mt-0.5"></i>
                                            <div>
                                                <p class="text-sm font-medium text-gray-900">Housing Issue</p>
                                                <p class="text-sm text-gray-700">AC not working in dorm room</p>
                                                <p class="text-xs text-gray-500 mt-1">Reported: Sep 20 - In Progress</p>
                                            </div>
                                        </div>
                                        <div class="flex items-start p-3 bg-gray-50 rounded-lg border border-gray-100">
                                            <i data-lucide="check-circle" class="w-5 h-5 text-gray-600 mr-2 mt-0.5"></i>
                                            <div>
                                                <p class="text-sm font-medium text-gray-900">Orientation</p>
                                                <p class="text-sm text-gray-700">Completed on Sep 22</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Feedback Section -->
                    <div class="bg-white rounded-2xl shadow-md p-6">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-semibold text-gray-900">Feedback for Student</h3>
                            <button id="toggle-feedback-form"
                                class="text-red-600 hover:text-red-700 text-sm font-medium flex items-center">
                                <i data-lucide="plus" class="w-4 h-4 mr-1"></i> Add Feedback
                            </button>
                        </div>

                        <!-- Feedback Form (Initially Hidden) -->
                        <div id="feedback-form" class="hidden mb-6">
                            <textarea id="feedback-message" rows="3"
                                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
                                placeholder="Type your feedback here..."></textarea>
                            <div class="flex justify-end mt-2 space-x-3">
                                <button id="cancel-feedback"
                                    class="px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200">
                                    Cancel
                                </button>
                                <button id="submit-feedback"
                                    class="px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700">
                                    Send Feedback
                                </button>
                            </div>
                        </div>

                        <!-- Feedback List -->
                        <div id="feedback-list" class="space-y-4">
                            <!-- Feedback items will be dynamically added here -->
                            <div class="p-4 bg-gray-50 rounded-lg">
                                <div class="flex justify-between items-start">
                                    <div class="flex items-start space-x-3">
                                        <div class="w-8 h-8 rounded-full bg-red-100 flex items-center justify-center">
                                            <i data-lucide="user" class="w-4 h-4 text-red-600"></i>
                                        </div>
                                        <div>
                                            <p class="text-sm text-gray-700">Please submit your English test results by
                                                the end of this week.</p>
                                            <p class="text-xs text-gray-500 mt-1">You - Sep 25, 2024 10:30 AM</p>
                                        </div>
                                    </div>
                                    <button class="text-gray-400 hover:text-red-600">
                                        <i data-lucide="trash-2" class="w-4 h-4"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Right Column - Application Timeline -->
                <div class="w-full lg:w-3/12 space-y-6">
                    <div class="bg-white rounded-2xl shadow-md p-6 sticky top-6">
                        <h3 class="text-lg font-semibold text-gray-900 mb-4">Application Timeline</h3>

                        <!-- Timeline Step 1: Initial Advising -->
                        <div class="timeline-step cursor-pointer hover:bg-gray-50 rounded-lg p-2 transition-colors"
                            data-step="initial-advising">
                            <div class="timeline-dot completed"></div>
                            <div class="pl-6">
                                <h4 class="font-medium">Initial Advising</h4>
                                <p class="mt-1 text-sm text-gray-600">Initial consultation completed</p>
                            </div>
                        </div>

                        <!-- Timeline Step 2: Application In Progress -->
                        <div class="timeline-step cursor-pointer hover:bg-gray-50 rounded-lg p-2 transition-colors current"
                            data-step="application-in-progress">
                            <div class="timeline-dot current"></div>
                            <div class="pl-6">
                                <h4 class="font-medium">Application In Progress</h4>
                                <p class="mt-1 text-sm text-gray-600">Gathering required documents</p>
                            </div>
                        </div>

                        <!-- Timeline Step 3: Submitted to School -->
                        <div class="timeline-step cursor-pointer hover:bg-gray-50 rounded-lg p-2 transition-colors"
                            data-step="submitted-to-school">
                            <div class="timeline-dot"></div>
                            <div class="pl-6">
                                <h4 class="font-medium">Submitted to School</h4>
                                <p class="mt-1 text-sm text-gray-600">Awaiting submission confirmation</p>
                            </div>
                        </div>

                        <!-- Timeline Step 4: School Response -->
                        <div class="timeline-step cursor-pointer hover:bg-gray-50 rounded-lg p-2 transition-colors"
                            data-step="school-response">
                            <div class="timeline-dot"></div>
                            <div class="pl-6">
                                <h4 class="font-medium">School Response</h4>
                                <p class="mt-1 text-sm text-gray-600">Awaiting school's response</p>
                            </div>
                        </div>

                        <!-- Timeline Step 5: Offer Letter Issued -->
                        <div class="timeline-step cursor-pointer hover:bg-gray-50 rounded-lg p-2 transition-colors"
                            data-step="offered-letter-issued">
                            <div class="timeline-dot"></div>
                            <div class="pl-6">
                                <h4 class="font-medium">Offer Letter Issued</h4>
                                <p class="mt-1 text-sm text-gray-600">Waiting for offer letter</p>
                            </div>
                        </div>

                        <!-- Timeline Step 6: Committed to School -->
                        <div class="timeline-step cursor-pointer hover:bg-gray-50 rounded-lg p-2 transition-colors"
                            data-step="committed-to-school">
                            <div class="timeline-dot"></div>
                            <div class="pl-6">
                                <h4 class="font-medium">Committed to School</h4>
                                <p class="mt-1 text-sm text-gray-600">Acceptance and deposit</p>
                            </div>
                        </div>

                        <!-- Timeline Step 7: Visa Application -->
                        <div class="timeline-step cursor-pointer hover:bg-gray-50 rounded-lg p-2 transition-colors"
                            data-step="visa-application">
                            <div class="timeline-dot"></div>
                            <div class="pl-6">
                                <h4 class="font-medium">Visa Application</h4>
                                <p class="mt-1 text-sm text-gray-600">DS-160 and supporting documents</p>
                            </div>
                        </div>

                        <!-- Timeline Step 8: Pre-Departure -->
                        <div class="timeline-step cursor-pointer hover:bg-gray-50 rounded-lg p-2 transition-colors"
                            data-step="pre-departure">
                            <div class="timeline-dot"></div>
                            <div class="pl-6">
                                <h4 class="font-medium">Pre-Departure</h4>
                                <p class="mt-1 text-sm text-gray-600">Travel arrangements and orientation</p>
                            </div>
                        </div>

                        <!-- Timeline Step 9: Arrival -->
                        <div class="timeline-step cursor-pointer hover:bg-gray-50 rounded-lg p-2 transition-colors"
                            data-step="arrival">
                            <div class="timeline-dot"></div>
                            <div class="pl-6">
                                <h4 class="font-medium">Arrival</h4>
                                <p class="mt-1 text-sm text-gray-600">Arrival confirmation and check-in</p>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </main>
    </div>

    <!-- Assign Advisor Modal -->
    <div id="assignAdvisorModal" class="fixed inset-0 bg-black bg-opacity-50 overflow-y-auto h-full w-full hidden">
        <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
            <div class="mt-3 text-center">
                <div class="mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100">
                    <i data-lucide="user-plus" class="h-6 w-6 text-red-600"></i>
                </div>
                <h3 class="text-lg leading-6 font-medium text-gray-900 mt-3">Assign Advisors</h3>
                
                <!-- Academic Advisor -->
                <div class="mt-4 px-4 py-2">
                    <label for="academicAdvisor" class="block text-sm font-medium text-gray-700 text-left mb-1">Academic Advisor <span class="text-red-500">*</span></label>
                    <select id="academicAdvisor" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-red-500 focus:ring-red-500">
                        <option value="">Select Academic Advisor</option>
                        <option value="advisor1">John Doe</option>
                        <option value="advisor2">Jane Smith</option>
                        <option value="advisor3">Robert Johnson</option>
                    </select>
                </div>
                
                <!-- Visa Advisor -->
                <div class="mt-4 px-4 py-2">
                    <label for="visaAdvisor" class="block text-sm font-medium text-gray-700 text-left mb-1">Visa Advisor <span class="text-red-500">*</span></label>
                    <select id="visaAdvisor" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-red-500 focus:ring-red-500">
                        <option value="">Select Visa Advisor</option>
                        <option value="advisor4">Emily Davis</option>
                        <option value="advisor5">Michael Brown</option>
                        <option value="advisor6">Sarah Wilson</option>
                    </select>
                </div>
                
                <!-- Senior Advisor (Optional) -->
                <div class="mt-4 px-4 py-2">
                    <label for="seniorAdvisor" class="block text-sm font-medium text-gray-700 text-left mb-1">Senior Advisor (Optional)</label>
                    <select id="seniorAdvisor" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-red-500 focus:ring-red-500">
                        <option value="">Select Senior Advisor (Optional)</option>
                        <option value="advisor7">David Miller</option>
                        <option value="advisor8">Lisa Anderson</option>
                        <option value="">None</option>
                    </select>
                </div>
                
                <div class="items-center px-4 py-4">
                    <button id="assignBtn" class="w-full justify-center px-4 py-2 bg-red-600 text-white text-base font-medium rounded-md shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500">
                        Assign Advisors
                    </button>
                    <button onclick="document.getElementById('assignAdvisorModal').classList.add('hidden')" class="mt-2 w-full justify-center px-4 py-2 bg-gray-100 text-gray-700 text-base font-medium rounded-md shadow-sm hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-300">
                        Cancel
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- History Modal -->
    <div id="historyModal" class="fixed inset-0 bg-black bg-opacity-50 overflow-y-auto h-full w-full hidden">
        <div class="relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white">
            <div class="flex justify-between items-center border-b pb-3">
                <h3 class="text-xl font-semibold text-gray-900">Application History</h3>
                <button onclick="document.getElementById('historyModal').classList.add('hidden')" class="text-gray-600 hover:text-red-600">
                    <i data-lucide="x" class="h-6 w-6"></i>
                </button>
            </div>
            
            <div class="mt-4 max-h-96 overflow-y-auto pr-2">
                <!-- Timeline container -->
                <div class="space-y-6">
                    <!-- Status Update -->
                    <div class="relative pl-6 border-l-2 border-red-200 pb-6">
                        <div class="absolute w-3 h-3 bg-red-600 rounded-full -left-1.5 border-2 border-white"></div>
                        <div class="flex items-center justify-between">
                            <span class="text-sm font-medium text-gray-900">Status Updated</span>
                            <span class="text-xs text-gray-500">2 hours ago</span>
                        </div>
                        <div class="mt-1 text-sm text-gray-600">
                            <p>Status changed from <span class="font-medium">Initial Advising</span> to <span class="font-medium text-red-600">Application In Progress</span></p>
                            <p class="mt-1 text-xs text-gray-500">Updated by: John Doe (Admin)</p>
                        </div>
                        <div class="mt-2 text-sm bg-gray-50 p-3 rounded-md">
                            <p class="text-gray-700">Additional documents required: Bank statement and English proficiency test results.</p>
                        </div>
                    </div>

                    <!-- Document Upload -->
                    <div class="relative pl-6 border-l-2 border-gray-200 pb-6">
                        <div class="absolute w-3 h-3 bg-gray-600 rounded-full -left-1.5 border-2 border-white"></div>
                        <div class="flex items-center justify-between">
                            <span class="text-sm font-medium text-gray-900">Document Uploaded</span>
                            <span class="text-xs text-gray-500">1 day ago</span>
                        </div>
                        <div class="mt-1 text-sm text-gray-600">
                            <p>New document: <span class="font-medium">IELTS Test Results.pdf</span></p>
                            <p class="mt-1 text-xs text-gray-500">Uploaded by: Sarah Chen (Student)</p>
                        </div>
                    </div>

                    <!-- Advisor Assignment -->
                    <div class="relative pl-6 border-l-2 border-red-200 pb-6">
                        <div class="absolute w-3 h-3 bg-red-600 rounded-full -left-1.5 border-2 border-white"></div>
                        <div class="flex items-center justify-between">
                            <span class="text-sm font-medium text-gray-900">Advisor Assigned</span>
                            <span class="text-xs text-gray-500">2 days ago</span>
                        </div>
                        <div class="mt-1 text-sm text-gray-600">
                            <p>Academic Advisor: <span class="font-medium">John Doe</span></p>
                            <p>Visa Advisor: <span class="font-medium">Emily Davis</span></p>
                            <p class="mt-1 text-xs text-gray-500">Assigned by: Michael Johnson (Admin)</p>
                        </div>
                    </div>

                    <!-- Feedback Added -->
                    <div class="relative pl-6 border-l-2 border-gray-200">
                        <div class="absolute w-3 h-3 bg-gray-600 rounded-full -left-1.5 border-2 border-white"></div>
                        <div class="flex items-center justify-between">
                            <span class="text-sm font-medium text-gray-900">Feedback Added</span>
                            <span class="text-xs text-gray-500">3 days ago</span>
                        </div>
                        <div class="mt-1 text-sm text-gray-600">
                            <p>Advisor: <span class="font-medium">John Doe</span></p>
                            <div class="mt-2 bg-gray-50 p-3 rounded-md">
                                <p class="text-gray-700">"Student needs to improve their statement of purpose. The current version is too generic and doesn't highlight their unique qualifications for the program."</p>
                            </div>
                            <p class="mt-2 text-xs text-gray-500">Feedback for: Statement of Purpose</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="mt-4 pt-3 border-t flex justify-end">
                <button onclick="document.getElementById('historyModal').classList.add('hidden')" class="px-4 py-2 bg-red-600 text-white text-base font-medium rounded-md shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500">
                    Close
                </button>
            </div>
        </div>
    </div>

    <script>
        // Close modal when clicking outside of it
        window.onclick = function(event) {
            const modal = document.getElementById('assignAdvisorModal');
            if (event.target === modal) {
                modal.classList.add('hidden');
            }
        }

        // Handle assign button click
        document.getElementById('assignBtn').addEventListener('click', function() {
            const academicAdvisor = document.getElementById('academicAdvisor');
            const visaAdvisor = document.getElementById('visaAdvisor');
            const seniorAdvisor = document.getElementById('seniorAdvisor');
            
            // Validate required fields
            if (!academicAdvisor.value) {
                alert('Please select an Academic Advisor');
                return;
            }
            
            if (!visaAdvisor.value) {
                alert('Please select a Visa Advisor');
                return;
            }
            
            // Get selected advisor names
            const academicName = academicAdvisor.options[academicAdvisor.selectedIndex].text;
            const visaName = visaAdvisor.options[visaAdvisor.selectedIndex].text;
            const seniorName = seniorAdvisor.value ? 
                seniorAdvisor.options[seniorAdvisor.selectedIndex].text : 'None';
            
            // Here you would typically make an API call to save the data
            console.log('Academic Advisor:', academicName);
            console.log('Visa Advisor:', visaName);
            console.log('Senior Advisor:', seniorName);
            
            // Show success message
            alert(`Advisors assigned successfully!\n\n` +
                  `Academic: ${academicName}\n` +
                  `Visa: ${visaName}\n` +
                  `Senior: ${seniorName}`);
            
            // Close the modal
            document.getElementById('assignAdvisorModal').classList.add('hidden');
        });
    </script>

    <script>
        // Initialize Lucide Icons
        lucide.createIcons();

        // Feedback functionality
        document.addEventListener('DOMContentLoaded', function () {
            const toggleBtn = document.getElementById('toggle-feedback-form');
            const feedbackForm = document.getElementById('feedback-form');
            const cancelBtn = document.getElementById('cancel-feedback');
            const submitBtn = document.getElementById('submit-feedback');
            const feedbackMessage = document.getElementById('feedback-message');
            const feedbackList = document.getElementById('feedback-list');

            // Toggle feedback form
            toggleBtn?.addEventListener('click', () => {
                feedbackForm.classList.toggle('hidden');
                const isVisible = !feedbackForm.classList.contains('hidden');
                toggleBtn.innerHTML = isVisible
                    ? '<i data-lucide="x" class="w-4 h-4 mr-1"></i> Cancel'
                    : '<i data-lucide="plus" class="w-4 h-4 mr-1"></i> Add Feedback';
                lucide.createIcons();
            });

            // Cancel feedback
            cancelBtn?.addEventListener('click', () => {
                feedbackForm.classList.add('hidden');
                feedbackMessage.value = '';
                toggleBtn.innerHTML = '<i data-lucide="plus" class="w-4 h-4 mr-1"></i> Add Feedback';
                lucide.createIcons();
            });

            // Submit feedback
            submitBtn?.addEventListener('click', () => {
                const message = feedbackMessage.value.trim();
                if (message) {
                    const now = new Date();
                    const timeString = now.toLocaleString('en-US', {
                        month: 'short',
                        day: 'numeric',
                        year: 'numeric',
                        hour: '2-digit',
                        minute: '2-digit',
                        hour12: true
                    });

                    const feedbackItem = `
                        <div class="p-4 bg-gray-50 rounded-lg">
                            <div class="flex justify-between items-start">
                                <div class="flex items-start space-x-3">
                                    <div class="w-8 h-8 rounded-full bg-red-100 flex items-center justify-center">
                                        <i data-lucide="user" class="w-4 h-4 text-red-600"></i>
                                    </div>
                                    <div>
                                        <p class="text-sm text-gray-700">${message}</p>
                                        <p class="text-xs text-gray-500 mt-1">You - ${timeString}</p>
                                    </div>
                                </div>
                                <button class="delete-feedback text-gray-400 hover:text-red-600">
                                    <i data-lucide="trash-2" class="w-4 h-4"></i>
                                </button>
                            </div>
                        </div>
                    `;

                    feedbackList.insertAdjacentHTML('afterbegin', feedbackItem);
                    feedbackMessage.value = '';
                    feedbackForm.classList.add('hidden');
                    toggleBtn.innerHTML = '<i data-lucide="plus" class="w-4 h-4 mr-1"></i> Add Feedback';
                    lucide.createIcons();

                    // Add event listener to the new delete button
                    const deleteBtn = feedbackList.querySelector('.delete-feedback');
                    if (deleteBtn) {
                        deleteBtn.addEventListener('click', (e) => {
                            e.target.closest('.p-4').remove();
                        });
                    }
                }
            });

            // Add event delegation for delete buttons
            feedbackList?.addEventListener('click', (e) => {
                if (e.target.closest('.delete-feedback') || e.target.classList.contains('delete-feedback')) {
                    e.target.closest('.p-4').remove();
                }
            });
        });

        // Handle logout
        function handleLogout() {
            // Add your logout logic here
            console.log('Logging out...');
            // Redirect to login page
            window.location.href = 'login.html';
        }

        // Toggle user dropdown
        document.addEventListener('DOMContentLoaded', function () {
            const userMenuButton = document.getElementById('user-menu-button');
            const userMenu = document.getElementById('user-menu');

            if (userMenuButton && userMenu) {
                userMenuButton.addEventListener('click', function () {
                    const expanded = userMenuButton.getAttribute('aria-expanded') === 'true' || false;
                    userMenuButton.setAttribute('aria-expanded', !expanded);
                    userMenu.classList.toggle('hidden');
                });
            }

            // Close dropdown when clicking outside
            document.addEventListener('click', function (event) {
                if (!userMenuButton.contains(event.target) && !userMenu.contains(event.target)) {
                    userMenu.classList.add('hidden');
                    userMenuButton.setAttribute('aria-expanded', 'false');
                }
            });
        });

        // Timeline -> Documents panel switcher
        document.addEventListener('DOMContentLoaded', function () {
            const panels = document.querySelectorAll('.docs-panel');
            const steps = document.querySelectorAll('.timeline-step');
            let currentStepIndex = 1; // Default to Application In Progress (index 1)

            function updateTimelineState(clickedStepIndex) {
                // Update all steps
                steps.forEach((step, index) => {
                    const dot = step.querySelector('.timeline-dot');
                    if (!dot) return;

                    // Reset all dots
                    dot.classList.remove('completed', 'current');

                    // Update dot states based on position
                    if (index < clickedStepIndex) {
                        dot.classList.add('completed');
                    } else if (index === clickedStepIndex) {
                        dot.classList.add('current');
                    }

                    // Update step styles
                    step.classList.remove('bg-red-50');
                    if (index === clickedStepIndex) {
                        step.classList.add('bg-red-50');
                    }
                });

                currentStepIndex = clickedStepIndex;
            }

            function showDocsFor(stepId) {
                // Hide all panels
                panels.forEach(p => p.classList.add('hidden'));

                // Show the selected panel
                const target = document.getElementById(`docs-${stepId}`);
                if (target) target.classList.remove('hidden');

                // Update the current step index based on the stepId
                const stepElements = Array.from(steps);
                const currentStep = document.querySelector(`.timeline-step[data-step="${stepId}"]`);
                const currentIndex = stepElements.indexOf(currentStep);

                if (currentIndex !== -1) {
                    updateTimelineState(currentIndex);
                }

                // Re-render lucide icons if needed
                if (window.lucide) lucide.createIcons();
            }

            // Add click event listeners to all timeline steps
            steps.forEach((step, index) => {
                step.addEventListener('click', () => {
                    const stepId = step.getAttribute('data-step');
                    showDocsFor(stepId);
                });
            });

            // Initialize with the current step
            updateTimelineState(currentStepIndex);
            showDocsFor('application-in-progress');
        });

        // Training video link
        document.getElementById('training-video-link').addEventListener('click', function(e) {
            e.preventDefault();
            // Replace this URL with your actual training video URL
            window.open('https://example.com/training-video', '_blank');
        });

        // View History Modal Elements
        const viewHistoryModal = document.getElementById('viewHistoryModal');
        const viewHistoryBtn = document.querySelector('button:has(i[data-lucide="clock"])');
        const closeHistoryModal = document.getElementById('closeHistoryModal');
        const closeHistoryBtn = document.getElementById('closeHistoryBtn');
        
        // Sample history data (in a real app, this would come from an API)
        const historyData = [
            {
                id: 1,
                type: 'status',
                title: 'Status updated to "Under Review"',
                description: 'Application is now being reviewed by the admissions team.',
                date: '2025-09-29T10:30:00',
                user: 'John Doe',
                icon: 'refresh-cw',
                color: 'text-blue-500',
                bgColor: 'bg-blue-50'
            },
            {
                id: 2,
                type: 'document',
                title: 'Document uploaded: English Test',
                description: 'IELTS Academic - Overall Score: 7.5',
                date: '2025-09-28T14:15:00',
                user: 'Sarah Chen',
                icon: 'file-text',
                color: 'text-green-500',
                bgColor: 'bg-green-50'
            },
            {
                id: 3,
                type: 'note',
                title: 'Note added',
                description: 'Need to verify financial documents. Waiting for bank statement.',
                date: '2025-09-27T11:20:00',
                user: 'Jane Smith',
                icon: 'message-square',
                color: 'text-purple-500',
                bgColor: 'bg-purple-50'
            },
            {
                id: 4,
                type: 'application',
                title: 'Application submitted',
                description: 'Application submitted to Tiffin University',
                date: '2025-09-26T09:45:00',
                user: 'System',
                icon: 'send',
                color: 'text-red-500',
                bgColor: 'bg-red-50'
            },
            {
                id: 5,
                type: 'creation',
                title: 'Application created',
                description: 'New application record created in the system',
                date: '2025-09-25T15:10:00',
                user: 'System',
                icon: 'file-plus',
                color: 'text-yellow-500',
                bgColor: 'bg-yellow-50'
            }
        ];

        // Format date to a readable format
        function formatDate(dateString) {
            const options = { 
                year: 'numeric', 
                month: 'short', 
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            };
            return new Date(dateString).toLocaleDateString('en-US', options);
        }

        // Render history items
        function renderHistoryItems() {
            const timeline = document.querySelector('.timeline');
            if (!timeline) return;

            timeline.innerHTML = historyData.map(item => `
                <div class="relative pb-8">
                    <div class="relative flex items-start group">
                        <div class="flex items-center h-9">
                            <div class="absolute left-4 -ml-px h-full w-0.5 bg-gray-200"></div>
                            <div class="${item.bgColor} h-8 w-8 rounded-full flex items-center justify-center ring-8 ring-white">
                                <i data-lucide="${item.icon}" class="h-4 w-4 ${item.color}" aria-hidden="true"></i>
                            </div>
                        </div>
                        <div class="min-w-0 flex-1 pt-1.5 flex justify-between space-x-4">
                            <div>
                                <p class="text-sm text-gray-800">
                                    ${item.title}
                                    ${item.description ? `<span class="block text-sm text-gray-500 mt-1">${item.description}</span>` : ''}
                                </p>
                                <p class="text-xs text-gray-500 mt-1">
                                    By ${item.user} • ${formatDate(item.date)}
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
            
            // Refresh Lucide icons
            if (window.lucide) lucide.createIcons();
        }

        // Open history modal
        viewHistoryBtn?.addEventListener('click', () => {
            document.getElementById('historyModal').classList.remove('hidden');
            document.body.style.overflow = 'hidden';
            renderHistoryItems();
        });

        // Close history modal
        function closeHistoryModalFunc() {
            document.getElementById('historyModal').classList.add('hidden');
            document.body.style.overflow = 'auto';
        }

        closeHistoryModal?.addEventListener('click', closeHistoryModalFunc);
        closeHistoryBtn?.addEventListener('click', closeHistoryModalFunc);

        // Close modal when clicking outside
        window.addEventListener('click', (e) => {
            if (e.target === document.getElementById('historyModal')) {
                closeHistoryModalFunc();
            }
        });
    </script>
    <script>
        // Scholarships linking logic for Offer Letter Issued step (mockup mode)
        (function(){
            const LS_KEYS = {
                scholarships: 'appl_lead_scholarships',
                appScholar: 'appl_lead_application_scholarships'
            };
            function load(key, fb){ try{ const raw=localStorage.getItem(key); return raw?JSON.parse(raw):(fb??[]);}catch{ return fb??[]; } }
            function save(key, val){ localStorage.setItem(key, JSON.stringify(val)); }

            // For this details page, assume an application id can be parsed from URL (?appId=...) or default to 'app-detail-1'
            const params = new URLSearchParams(location.search);
            const appId = params.get('appId') || 'app-detail-1';

            // Seed mock scholarships if none exist
            (function ensureSeed(){
                const list = load(LS_KEYS.scholarships, []);
                if (!list || list.length === 0) {
                    const seed = [
                        { id: 'SCH-MERIT-2025', name: 'Merit Scholarship 2025' },
                        { id: 'SCH-ATH-2025', name: 'Athletic Scholarship 2025' },
                        { id: 'SCH-ART-2025', name: 'Arts Scholarship 2025' },
                        { id: 'SCH-LEAD-2025', name: 'Leadership Excellence Award' }
                    ];
                    save(LS_KEYS.scholarships, seed);
                }
            })();

            function getMap(){ return load(LS_KEYS.appScholar, {}); }
            function setMap(m){ save(LS_KEYS.appScholar, m); }

            function renderChips(){
                const chips = document.getElementById('detailScholarChips');
                if (!chips) return;
                chips.innerHTML = '';
                const map = getMap();
                const ids = map[appId] || [];
                const all = load(LS_KEYS.scholarships, []);
                const byId = Object.fromEntries(all.map(s=>[s.id,s]));
                if (ids.length===0){ chips.innerHTML = '<p class="text-xs text-gray-500">No scholarships linked.</p>'; return; }
                ids.forEach(id=>{
                    const s = byId[id] || { name:id };
                    const span = document.createElement('span');
                    span.className = 'px-2 py-1 text-xs rounded-full bg-purple-100 text-purple-800 flex items-center gap-1';
                    span.innerHTML = `<span>${s.name || s.title || id}</span>`;
                    const btn = document.createElement('button');
                    btn.className = 'ml-1 text-purple-600 hover:text-purple-800';
                    btn.textContent = '×';
                    btn.addEventListener('click', ()=>{
                        const m = getMap();
                        m[appId] = (m[appId]||[]).filter(x=>x!==id);
                        setMap(m); renderChips();
                    });
                    span.appendChild(btn);
                    chips.appendChild(span);
                });
            }

            function scanOffer(){
                // Mock: we already have an uploaded file; simulate OCR by picking up to 3 configured scholarships
                const all = load(LS_KEYS.scholarships, []);
                if (!all || all.length === 0) { alert('No scholarships configured. Add them in CRM-scholarships.'); return; }
                // Prefer names containing typical keywords
                const priority = all.filter(s => /merit|athletic|arts|leadership|excellence/i.test(s.name||s.title||''));
                const pool = priority.length ? priority : all;
                const found = pool.slice(0, 3).map(s => s.id);
                const m = getMap();
                const set = new Set([...(m[appId]||[]), ...found]);
                m[appId] = Array.from(set);
                setMap(m); renderChips();
                alert('Mock scan linked: '+found.length+' scholarship(s) from Offer Letter.');
            }

            // Modal-based selection
            function openSelect(){
                const modal = document.getElementById('scholarModalDetail');
                const list = document.getElementById('scholarListDetail');
                const all = load(LS_KEYS.scholarships, []);
                const map = getMap();
                const selected = new Set(map[appId] || []);
                list.innerHTML = '';
                if (!all || all.length===0){
                    list.innerHTML = '<p class="text-sm text-gray-600">No scholarships configured. Please add in CRM-scholarships.</p>';
                } else {
                    all.forEach(s => {
                        const row = document.createElement('label');
                        row.className = 'flex items-center gap-2 text-sm';
                        row.innerHTML = `<input type='checkbox' value='${s.id}' ${selected.has(s.id)?'checked':''} class='sch-cb-detail'> <span>${s.name || s.title || s.id}</span>`;
                        list.appendChild(row);
                    });
                }
                modal.classList.remove('hidden');
                modal.classList.add('flex');
                document.getElementById('scholarSearchDetail').value='';
            }

            function applySearchDetail(){
                const q = document.getElementById('scholarSearchDetail').value.trim().toLowerCase();
                const items = document.querySelectorAll('#scholarListDetail label');
                items.forEach(lb => {
                    const text = lb.textContent.toLowerCase();
                    lb.style.display = text.includes(q) ? '' : 'none';
                });
            }

            function closeSelect(){
                const modal = document.getElementById('scholarModalDetail');
                modal.classList.add('hidden');
                modal.classList.remove('flex');
            }

            function saveSelection(){
                const cbs = document.querySelectorAll('#scholarListDetail input.sch-cb-detail');
                const ids = Array.from(cbs).filter(cb=>cb.checked).map(cb=>cb.value);
                const m = getMap(); m[appId]=ids; setMap(m); renderChips();
                closeSelect();
            }

            // Use event delegation so it works regardless of element order
            document.addEventListener('click', (e) => {
                const t = e.target;
                if (!(t instanceof Element)) return;
                const id = t.id;
                if (id === 'btnScanOfferDetail') { e.preventDefault(); scanOffer(); }
                if (id === 'btnSelectScholarDetail') { e.preventDefault(); openSelect(); }
                if (id === 'scholarModalCloseDetail' || id === 'scholarCancelDetail') { e.preventDefault(); closeSelect(); }
                if (id === 'scholarSaveDetail') { e.preventDefault(); saveSelection(); }
                // Click on backdrop closes modal
                const modal = document.getElementById('scholarModalDetail');
                if (modal && t === modal) { closeSelect(); }
            });
            document.addEventListener('input', (e) => {
                const t = e.target;
                if (!(t instanceof Element)) return;
                if (t.id === 'scholarSearchDetail') applySearchDetail();
            });
            // Allow ESC to close
            document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeSelect(); });
            renderChips();
        })();
    </script>
    <!-- Scholarship selection modal (Detail page) -->
    <div id="scholarModalDetail" class="fixed inset-0 bg-black/40 hidden items-center justify-center z-50">
      <div class="bg-white rounded-lg p-4 w-[520px] max-h-[75vh] overflow-y-auto">
        <div class="flex items-center justify-between mb-2">
          <h3 class="text-base font-semibold">Select Scholarships</h3>
          <button id="scholarModalCloseDetail" class="text-gray-500 hover:text-gray-700">✕</button>
        </div>
        <input id="scholarSearchDetail" placeholder="Search scholarships..." class="w-full border rounded-lg px-3 py-2 text-sm mb-3" />
        <div id="scholarListDetail" class="space-y-2"></div>
        <div class="mt-3 flex justify-end gap-2">
          <button id="scholarCancelDetail" class="px-3 py-1 border rounded-lg text-sm hover:bg-gray-50">Cancel</button>
          <button id="scholarSaveDetail" class="px-3 py-1 text-white rounded-lg text-sm" style="background-color:#d82128;">Save</button>
        </div>
      </div>
    </div>

</body>

</html>