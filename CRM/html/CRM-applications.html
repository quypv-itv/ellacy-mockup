<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Applications - APPLYLEAD</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="modal-script.js" defer></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
    </style>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            lucide.createIcons();
        });
    </script>
</head>

<body class="bg-white">
    <div class="flex h-screen overflow-hidden">
        <!-- Sidebar -->
        <aside class="fixed left-0 top-0 h-screen w-64 bg-white shadow-lg">
            <div class="p-6">
                <div class="flex items-center mb-2">
                    <img src="../../ApplyLead_logo.png" alt="ApplyLead" class="h-9">
                </div>
                <div class="flex items-center">
                    <span class="px-2 py-1 text-xs font-medium bg-red-100 text-red-800 rounded-full">Admin</span>
                </div>
            </div>
            <nav class="mt">
                <a href="CRM-dashboard.html" class="flex items-center px-6 py-3 text-gray-600 hover:bg-red-50">
                    <i data-lucide="layout-dashboard" class="w-5 h-5 mr-3"></i>
                    Dashboard
                </a>
                <a href="#" class="flex items-center px-6 py-3 text-white" style="background-color: #d82128;">
                    <i data-lucide="file-text" class="w-5 h-5 mr-3"></i>
                    Applications
                </a>
                <a href="CRM-agent.html" class="flex items-center px-6 py-3 text-gray-600 hover:bg-red-50">
                    <i data-lucide="users" class="w-5 h-5 mr-3"></i>
                    Agents
                </a>
                <a href="CRM-scholarships.html" class="flex items-center px-6 py-3 text-gray-600 hover:bg-red-50">
                    <i data-lucide="graduation-cap" class="w-5 h-5 mr-3"></i>
                    Scholarships
                </a>
                <a href="CRM-institutions.html" class="flex items-center px-6 py-3 text-gray-600 hover:bg-red-50">
                    <i data-lucide="building" class="w-5 h-5 mr-3"></i>
                    Institutions
                </a>
                <a href="CRM-students.html" class="flex items-center px-6 py-3 text-gray-600 hover:bg-red-50">
                    <i data-lucide="user" class="w-5 h-5 mr-3"></i>
                    Students
                </a>
                <a href="CRM-payment.html" class="flex items-center px-6 py-3 text-gray-600 hover:bg-red-50">
                    <i data-lucide="credit-card" class="w-5 h-5 mr-3"></i>
                    Payments
                </a>
                <a href="CRM-tasks.html" class="flex items-center px-6 py-3 text-gray-600 hover:bg-red-50">
                    <i data-lucide="check-circle" class="w-5 h-5 mr-3"></i>
                    Tasks
                </a>
                <a href="CRM-Campaigns.html" class="flex items-center px-6 py-3 text-gray-600 hover:bg-red-50">
                    <i data-lucide="brick-wall-shield" class="w-5 h-5 mr-3"></i>
                    Campaigns
                </a>
                <a href="CRM-report.html" class="flex items-center px-6 py-3 text-gray-600 hover:bg-red-50">
                    <i data-lucide="bar-chart" class="w-5 h-5 mr-3"></i>
                    Reports
                </a>
                <a href="CRM-messages.html" class="flex items-center px-6 py-3 text-gray-600 hover:bg-red-50">
                    <i data-lucide="message-circle" class="w-5 h-5 mr-3"></i>
                    Messages
                </a>
                <a href="CRM-user-admin.html" class="flex items-center px-6 py-3 text-gray-600 hover:bg-red-50">
                    <i data-lucide="shield" class="w-5 h-5 mr-3"></i>
                    User Admin
                </a>
                <a href="CRM-Setting.html" class="flex items-center px-6 py-3 text-gray-600 hover:bg-red-50">
                    <i data-lucide="settings" class="w-5 h-5 mr-3"></i>
                    Settings
                </a>
            </nav>
            <div class="mt-auto px-6 py-4 border-t border-gray-200">
                <p class="text-sm text-gray-600 text-center">Designed & developed by Innotech Viet Nam</p>
            </div>
        </aside>

        <!-- Main Content -->
        <div class="ml-64 flex-1 flex flex-col overflow-hidden">
            <!-- Header -->
            <header class="h-16 bg-white shadow-sm flex items-center justify-between px-6">
                <h2 class="text-xl font-semibold text-gray-900">Applications</h2>
                <div class="flex items-center space-x-4">
                    <button class="p-2 hover:bg-red-50 rounded-full">
                        <i data-lucide="bell" class="w-5 h-5 text-gray-600"></i>
                    </button>
                    <div class="relative" id="profile-menu">
                        <button class="flex items-center">
                            <img src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80"
                                alt="Admin profile" class="w-8 h-8 rounded-full object-cover">
                        </button>
                        <div id="profile-dropdown"
                            class="hidden absolute right-0 mt-2 w-48 bg-white rounded-xl shadow-lg py-1">
                            <a href="CRM-Setting.html"
                                class="block px-4 py-2 text-sm text-gray-700 hover:bg-red-50">Settings</a>
                            <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-red-50"
                                onclick="handleLogout()">Logout</a>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Main -->
            <main class="flex-1 overflow-y-auto">
                <!-- Filter, Search and New Application -->
                <div class="p-4 flex items-center justify-between">
                    <div class="flex items-center space-x-4">
                        <div class="relative">
                            <i data-lucide="search"
                                class="w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                            <input type="text" placeholder="Search applications..."
                                class="pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-red-400 focus:border-red-400 w-64">
                        </div>
                        <button id="filter-toggle"
                            class="inline-flex items-center px-4 py-2 border border-red-400 text-red-400 rounded-lg hover:bg-red-50 transition-colors">
                            <i data-lucide="filter" class="w-4 h-4 mr-2"></i>
                            Filters
                        </button>
                    </div>
                    <div class="flex items-center space-x-3">
                        <div class="flex items-center gap-2">
                            <button data-view="table" class="view-toggle px-3 py-2 text-sm font-medium rounded-lg bg-red-600 text-white">
                                <i data-lucide="list" class="w-4 h-4 inline-block mr-1"></i> Table
                            </button>
                            <button data-view="board" class="view-toggle px-3 py-2 text-sm font-medium rounded-lg bg-gray-100 text-gray-600 hover:bg-gray-200">
                                <i data-lucide="columns" class="w-4 h-4 inline-block mr-1"></i> Board
                            </button>
                        </div>
                        <button
                            class="inline-flex items-center px-4 py-2 bg-red-400 text-white rounded-lg hover:bg-red-700 transition-colors whitespace-nowrap">
                            <i data-lucide="plus" class="w-4 h-4 mr-2"></i>
                            New Application
                        </button>
                    </div>
                </div>

                <!-- Filter Drawer Backdrop -->
                <div id="filter-backdrop"
                    class="fixed inset-0 bg-black bg-opacity-50 z-40 opacity-0 pointer-events-none transition-opacity duration-300">
                </div>

                <!-- Filter Drawer -->
                <div id="filter-drawer"
                    class="fixed top-0 right-0 h-full w-96 bg-white shadow-xl transform translate-x-full transition-transform duration-300 ease-in-out z-50 overflow-y-auto">
                    <div class="p-4 border-b flex justify-between items-center sticky top-0 bg-white z-10">
                        <h3 class="text-lg font-medium text-gray-900">Filters</h3>
                        <button id="close-filter" class="text-gray-400 hover:text-red-400">
                            <i data-lucide="x" class="w-5 h-5"></i>
                        </button>
                    </div>

                    <!-- Filter Content -->
                    <div class="p-6 space-y-6">
                        <!-- Status Filter -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Status</label>
                            <select class="w-full border-gray-300 rounded-lg focus:ring-red-400 focus:border-red-400">
                                <option value="all">All Status</option>
                                <option value="submitted">Submitted</option>
                                <option value="in-review">In Review</option>
                                <option value="accepted">Accepted</option>
                                <option value="rejected">Rejected</option>
                            </select>
                        </div>

                        <!-- Country Filter -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Country</label>
                            <select class="w-full border-gray-300 rounded-lg focus:ring-red-400 focus:border-red-400">
                                <option value="all">All Countries</option>
                                <option value="australia">Australia</option>
                                <option value="canada">Canada</option>
                                <option value="uk">United Kingdom</option>
                                <option value="usa">United States</option>
                            </select>
                        </div>

                        <!-- University/Scholarship Filter -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">University/Scholarship</label>
                            <select class="w-full border-gray-300 rounded-lg focus:ring-red-400 focus:border-red-400">
                                <option value="all">All Scholarships</option>
                                <option value="1">University of Melbourne - BBA</option>
                                <option value="2">University of Toronto - CS</option>
                                <option value="3">Imperial College - MSc CS</option>
                            </select>
                        </div>

                        <!-- Agent Filter -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Agent</label>
                            <select class="w-full border-gray-300 rounded-lg focus:ring-red-400 focus:border-red-400">
                                <option value="all">All Agents</option>
                                <option value="sarah">Sarah Wilson</option>
                                <option value="michael">Michael Chen</option>
                            </select>
                        </div>

                        <!-- Date Range -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Date Range</label>
                            <div class="grid grid-cols-2 gap-3">
                                <div>
                                    <label class="block text-xs text-gray-500 mb-1">From</label>
                                    <input type="date"
                                        class="w-full border-gray-300 rounded-lg focus:ring-red-400 focus:border-red-400 text-sm">
                                </div>
                                <div>
                                    <label class="block text-xs text-gray-500 mb-1">To</label>
                                    <input type="date"
                                        class="w-full border-gray-300 rounded-lg focus:ring-red-400 focus:border-red-400 text-sm">
                                </div>
                            </div>
                        </div>

                        <!-- Assigned Reviewer -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Assigned Reviewer</label>
                            <select class="w-full border-gray-300 rounded-lg focus:ring-red-400 focus:border-red-400">
                                <option value="all">All Reviewers</option>
                                <option value="1">John Smith</option>
                                <option value="2">Emma Davis</option>
                                <option value="3">Alex Wong</option>
                            </select>
                        </div>

                        <!-- Scholarship Status -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Scholarship Status</label>
                            <select class="w-full border-gray-300 rounded-lg focus:ring-red-400 focus:border-red-400">
                                <option value="all">All</option>
                                <option value="yes">Assigned</option>
                                <option value="no">Not Assigned</option>
                            </select>
                        </div>
                    </div>

                    <!-- Drawer Footer -->
                    <div class="p-4 border-t flex justify-end space-x-3 sticky bottom-0 bg-white">
                        <button id="reset-filters"
                            class="px-4 py-2 text-sm font-medium text-gray-700 hover:bg-red-50 rounded-lg transition-colors">
                            Reset
                        </button>
                        <button id="apply-filters"
                            class="px-4 py-2 text-sm font-medium text-white rounded-lg transition-colors hover:bg-red-700"
                            style="background-color: #d82128;">
                            Apply Filters
                        </button>
                    </div>
                </div>

                <!-- Application Table -->
                <div id="table-view" class="px-6 py-4">
                    <div class="bg-white rounded-lg shadow overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th scope="col"
                                        class="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider">
                                        UID</th>
                                    <th scope="col"
                                        class="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider">
                                        Student Name</th>
                                    <th scope="col"
                                        class="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider">
                                        Program</th>
                                    <th scope="col"
                                        class="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider">
                                        University</th>
                                    <th scope="col"
                                        class="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider" style="min-width: 280px;">
                                        Scholarship</th>
                                    <th scope="col"
                                        class="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider">
                                        Country</th>
                                    <th scope="col"
                                        class="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider">
                                        Agent</th>
                                    <th scope="col"
                                        class="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider">
                                        Status</th>
                                    <th scope="col"
                                        class="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider">
                                        Time Created</th>
                                    <th scope="col"
                                        class="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider">
                                        Last Updated</th>
                                    <th scope="col"
                                        class="px-6 py-3 text-right text-xs font-medium text-gray-700 uppercase tracking-wider">
                                        Actions</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200">
                                <!-- Row 1 -->
                                <tr>
                                    <td class="px-6 py-4">
                                        <a href="CRM-application-details.html" target="_blank" class="text-sm font-medium text-gray-900 hover:text-red-400 transition-colors">FB-VNSG-SENSLJS100001</a>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="flex items-center">
                                            <img class="h-8 w-8 rounded-full"
                                                src="https://ui-avatars.com/api/?name=John+Smith" alt="">
                                            <div class="ml-4">
                                                <a href="CRM-application-details.html" target="_blank"
                                                    class="text-sm font-medium text-gray-900 hover:text-red-400 transition-colors">John
                                                    Smith</a>
                                                <div class="text-sm text-gray-500">john.smith@example.com</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="text-sm text-gray-900">Guaranteed Scholarship Program</div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="text-sm text-gray-900">Tiffin University</div>
                                    </td>
                                    <td class="px-6 py-4" style="min-width: 280px;">
                                        <div class="space-y-1">
                                            <div class="text-sm text-gray-900">+ Merit Scholarship</div>
                                            <div class="text-sm text-gray-900">+ Academic Excellence Award</div>
                                            <div class="text-sm text-gray-900">+ International Student Grant</div>
                                            <div class="text-sm text-gray-900">+ STEM Achievement Scholarship</div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="text-sm text-gray-900">United States</div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="text-sm text-gray-900">Sarah Wilson</div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span
                                            class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800">
                                            Initial Advising
                                        </span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                        Apr 1, 2024
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                        Apr 15, 2024
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                                        <button onclick="window.open('CRM-application-details.html', '_blank')"
                                            class="text-red-400 hover:text-red-700 mr-3" title="View">
                                            <i data-lucide="eye" class="w-4 h-4"></i>
                                        </button>
                                        <button onclick="openAdvisorModal()"
                                            class="text-red-400 hover:text-red-700 mr-3" title="Edit">
                                            <i data-lucide="pencil" class="w-4 h-4"></i>
                                        </button>
                                        <button class="text-red-400 hover:text-red-700" title="Feedback">
                                            <i data-lucide="message-square" class="w-4 h-4"></i>
                                        </button>
                                    </td>
                                </tr>

                                <!-- Row 2 -->
                                <tr>
                                    <td class="px-6 py-4">
                                        <a href="CRM-application-details.html" target="_blank" class="text-sm font-medium text-gray-900 hover:text-red-400 transition-colors">INS-VNHN-SENSLEC100002</a>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="flex items-center">
                                            <img class="h-8 w-8 rounded-full"
                                                src="https://ui-avatars.com/api/?name=Emily+Chen" alt="">
                                            <div class="ml-4">
                                                <a href="CRM-application-details.html" target="_blank"
                                                    class="text-sm font-medium text-gray-900 hover:text-red-400 transition-colors">Emily
                                                    Chen</a>
                                                <div class="text-sm text-gray-500">emily.chen@example.com</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="text-sm text-gray-900">Elite Admission Program</div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="text-sm text-gray-900">Boston University</div>
                                    </td>
                                    <td class="px-6 py-4" style="min-width: 280px;">
                                        <div class="scholarship-container">
                                            <div class="space-y-1">
                                                <div class="text-sm text-gray-900">+ Green Future Scholarship</div>
                                                <div class="hidden-scholarships hidden">
                                                    <div class="text-sm text-gray-900">+ Leadership Excellence Award</div>
                                                    <div class="text-sm text-gray-900">+ Community Service Grant</div>
                                                </div>
                                            </div>
                                            <button onclick="toggleScholarships(this)" class="text-xs text-red-600 hover:text-red-800 mt-1 inline-flex items-center">
                                                <span class="more-text">+2 more</span>
                                                <span class="less-text hidden">Show less</span>
                                                <i data-lucide="chevron-down" class="w-3 h-3 ml-1 more-icon"></i>
                                                <i data-lucide="chevron-up" class="w-3 h-3 ml-1 less-icon hidden"></i>
                                            </button>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="text-sm text-gray-900">United States</div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="text-sm text-gray-900">Michael Chen</div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span
                                            class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800">
                                            Application In Progress
                                        </span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                        Apr 10, 2024
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                        Apr 16, 2024
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                                        <button onclick="window.open('CRM-application-details.html', '_blank')"
                                            class="text-red-400 hover:text-red-700 mr-3" title="View">
                                            <i data-lucide="eye" class="w-4 h-4"></i>
                                        </button>
                                        <button onclick="openAdvisorModal()"
                                            class="text-red-400 hover:text-red-700 mr-3" title="Edit">
                                            <i data-lucide="pencil" class="w-4 h-4"></i>
                                        </button>
                                        <button class="text-red-400 hover:text-red-700" title="Feedback">
                                            <i data-lucide="message-square" class="w-4 h-4"></i>
                                        </button>
                                    </td>
                                </tr>

                                <!-- Row 3 -->
                                <tr>
                                    <td class="px-6 py-4">
                                        <a href="CRM-application-details.html" target="_blank" class="text-sm font-medium text-gray-900 hover:text-red-400 transition-colors">DIRECT-VNDN-SENSLEJ100003</a>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="flex items-center">
                                            <img class="h-8 w-8 rounded-full"
                                                src="https://ui-avatars.com/api/?name=Emily+Johnson" alt="">
                                            <div class="ml-4">
                                                <a href="CRM-application-details.html" target="_blank"
                                                    class="text-sm font-medium text-gray-900 hover:text-red-400 transition-colors">Emily
                                                    Johnson</a>
                                                <div class="text-sm text-gray-500">emily.johnson@example.com</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="text-sm text-gray-900">Ivy Global Student Program</div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="text-sm text-gray-900">Columbia University</div>
                                    </td>
                                    <td class="px-6 py-4">
                                        <div class="text-sm text-gray-900">+ International Excellence Scholarship</div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="text-sm text-gray-900">United States</div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="text-sm text-gray-900">Michael Chen</div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span
                                            class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800">
                                            Submitted to School
                                        </span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                        2024-04-07
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                        2024-04-07
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                                        <button onclick="window.open('CRM-application-details.html', '_blank')"
                                            class="text-red-400 hover:text-red-700 mr-3" title="View">
                                            <i data-lucide="eye" class="w-4 h-4"></i>
                                        </button>
                                        <button onclick="openAdvisorModal()"
                                            class="text-red-400 hover:text-red-700 mr-3" title="Edit">
                                            <i data-lucide="pencil" class="w-4 h-4"></i>
                                        </button>
                                        <button class="text-red-400 hover:text-red-700" title="Feedback">
                                            <i data-lucide="message-square" class="w-4 h-4"></i>
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Table Actions -->
                    <div class="mt-4 flex justify-between items-center">
                        <div class="text-sm text-gray-700">
                            Showing <span class="font-medium">1</span> to <span class="font-medium">10</span> of <span
                                class="font-medium">97</span> results
                        </div>
                        <div class="flex items-center space-x-4">
                            <button
                                class="inline-flex items-center px-4 py-2 border border-red-400 text-red-400 rounded-lg hover:bg-red-50 transition-colors">
                                <i data-lucide="download" class="w-4 h-4 mr-2"></i>
                                Export
                            </button>
                            <button
                                class="inline-flex items-center px-4 py-2 border border-red-400 text-red-400 rounded-lg hover:bg-red-50 transition-colors">
                                <i data-lucide="mail" class="w-4 h-4 mr-2"></i>
                                Send Reminder
                            </button>
                        </div>
                    </div>

                    <!-- Pagination -->
                    <div class="mt-4 flex justify-between items-center">
                        <div class="flex-1"></div>
                        <div class="flex items-center space-x-2">
                            <button
                                class="inline-flex items-center px-3 py-1.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-red-50 disabled:opacity-50"
                                disabled>
                                <i data-lucide="chevron-left" class="w-4 h-4"></i>
                            </button>
                            <button class="px-3 py-1.5 border border-red-400 text-red-400 rounded-lg hover:bg-red-50">
                                1
                            </button>
                            <button class="px-3 py-1.5 border border-red-400 text-red-400 rounded-lg hover:bg-red-50">
                                2
                            </button>
                            <button class="px-3 py-1.5 border border-red-400 text-red-400 rounded-lg hover:bg-red-50">
                                3
                            </button>
                            <button
                                class="inline-flex items-center px-3 py-1.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-red-50 disabled:opacity-50"
                                disabled>
                                <i data-lucide="chevron-right" class="w-4 h-4"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Kanban Board View -->
                <div id="board-view" class="hidden mt-6 px-6">
                    <div class="overflow-x-auto">
                        <div class="flex space-x-4 min-w-max pb-4">
                            <!-- Step 1: Initial Advising -->
                            <div class="flex-shrink-0 w-72">
                                <div class="bg-white rounded-2xl shadow-sm">
                                    <div class="p-4 border-b border-gray-200">
                                        <div class="flex items-center justify-between">
                                            <h3 class="font-semibold text-gray-900">Initial Advising</h3>
                                            <span id="count-initial_advising" class="text-sm text-gray-500 bg-gray-100 px-2 py-1 rounded-full">1</span>
                                        </div>
                                    </div>
                                    <div id="col-initial_advising" class="p-4 space-y-3 min-h-96 dropzone" data-status="initial_advising">
                                        <!-- Example Card -->
                                        <div class="bg-gray-50 rounded-xl p-3 border border-gray-200 hover:shadow-md transition-shadow cursor-move" draggable="true" data-app-id="app-1" data-status="initial_advising">
                                            <div class="flex items-center justify-between mb-2">
                                                <a href="CRM-application-details.html" target="_blank" rel="noopener noreferrer" class="font-medium text-sm text-red-600 hover:text-red-800">John Smith</a>
                                                <span class="status-badge text-xs px-2 py-1 rounded-full bg-red-100 text-red-800">Initial Advising</span>
                                            </div>
                                            <div class="text-xs text-gray-500 mb-1">Guaranteed Scholarship Program – Tiffin University</div>
                                            <div class="text-xs text-gray-400 mb-2">Agent: Sarah Wilson</div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Step 2: Application In Progress -->
                            <div class="flex-shrink-0 w-72">
                                <div class="bg-white rounded-2xl shadow-sm">
                                    <div class="p-4 border-b border-gray-200">
                                        <div class="flex items-center justify-between">
                                            <h3 class="font-semibold text-gray-900">Application In Progress</h3>
                                            <span id="count-application_in_progress" class="text-sm text-gray-500 bg-gray-100 px-2 py-1 rounded-full">0</span>
                                        </div>
                                    </div>
                                    <div id="col-application_in_progress" class="p-4 space-y-3 min-h-96 dropzone" data-status="application_in_progress"></div>
                                </div>
                            </div>

                            <!-- Step 3: Submitted to School -->
                            <div class="flex-shrink-0 w-72">
                                <div class="bg-white rounded-2xl shadow-sm">
                                    <div class="p-4 border-b border-gray-200">
                                        <div class="flex items-center justify-between">
                                            <h3 class="font-semibold text-gray-900">Submitted to School</h3>
                                            <span id="count-submitted_to_school" class="text-sm text-gray-500 bg-gray-100 px-2 py-1 rounded-full">0</span>
                                        </div>
                                    </div>
                                    <div id="col-submitted_to_school" class="p-4 space-y-3 min-h-96 dropzone" data-status="submitted_to_school"></div>
                                </div>
                            </div>

                            <!-- Step 4: School Response -->
                            <div class="flex-shrink-0 w-72">
                                <div class="bg-white rounded-2xl shadow-sm">
                                    <div class="p-4 border-b border-gray-200">
                                        <div class="flex items-center justify-between">
                                            <h3 class="font-semibold text-gray-900">School Response</h3>
                                            <span id="count-school_response" class="text-sm text-gray-500 bg-gray-100 px-2 py-1 rounded-full">0</span>
                                        </div>
                                    </div>
                                    <div id="col-school_response" class="p-4 space-y-3 min-h-96 dropzone" data-status="school_response"></div>
                                </div>
                            </div>

                            <!-- Step 5: Offer Letter Issued -->
                            <div class="flex-shrink-0 w-72">
                                <div class="bg-white rounded-2xl shadow-sm">
                                    <div class="p-4 border-b border-gray-200">
                                        <div class="flex items-center justify-between">
                                            <h3 class="font-semibold text-gray-900">Offer Letter Issued</h3>
                                            <span id="count-offer_letter_issued" class="text-sm text-gray-500 bg-gray-100 px-2 py-1 rounded-full">0</span>
                                        </div>
                                    </div>
                                    <div id="col-offer_letter_issued" class="p-4 space-y-3 min-h-96 dropzone" data-status="offer_letter_issued"></div>
                                </div>
                            </div>

                            <!-- Step 6: Committed to School -->
                            <div class="flex-shrink-0 w-72">
                                <div class="bg-white rounded-2xl shadow-sm">
                                    <div class="p-4 border-b border-gray-200">
                                        <div class="flex items-center justify-between">
                                            <h3 class="font-semibold text-gray-900">Committed to School</h3>
                                            <span id="count-committed_to_school" class="text-sm text-gray-500 bg-gray-100 px-2 py-1 rounded-full">0</span>
                                        </div>
                                    </div>
                                    <div id="col-committed_to_school" class="p-4 space-y-3 min-h-96 dropzone" data-status="committed_to_school"></div>
                                </div>
                            </div>

                            <!-- Step 7: Visa Application -->
                            <div class="flex-shrink-0 w-72">
                                <div class="bg-white rounded-2xl shadow-sm">
                                    <div class="p-4 border-b border-gray-200">
                                        <div class="flex items-center justify-between">
                                            <h3 class="font-semibold text-gray-900">Visa Application</h3>
                                            <span id="count-visa_application" class="text-sm text-gray-500 bg-gray-100 px-2 py-1 rounded-full">0</span>
                                        </div>
                                    </div>
                                    <div id="col-visa_application" class="p-4 space-y-3 min-h-96 dropzone" data-status="visa_application"></div>
                                </div>
                            </div>

                            <!-- Step 8: Pre-Departure -->
                            <div class="flex-shrink-0 w-72">
                                <div class="bg-white rounded-2xl shadow-sm">
                                    <div class="p-4 border-b border-gray-200">
                                        <div class="flex items-center justify-between">
                                            <h3 class="font-semibold text-gray-900">Pre-Departure</h3>
                                            <span id="count-pre_departure" class="text-sm text-gray-500 bg-gray-100 px-2 py-1 rounded-full">0</span>
                                        </div>
                                    </div>
                                    <div id="col-pre_departure" class="p-4 space-y-3 min-h-96 dropzone" data-status="pre_departure"></div>
                                </div>
                            </div>

                            <!-- Step 9: Arrival -->
                            <div class="flex-shrink-0 w-72">
                                <div class="bg-white rounded-2xl shadow-sm">
                                    <div class="p-4 border-b border-gray-200">
                                        <div class="flex items-center justify-between">
                                            <h3 class="font-semibold text-gray-900">Arrival</h3>
                                            <span id="count-arrival" class="text-sm text-gray-500 bg-gray-100 px-2 py-1 rounded-full">0</span>
                                        </div>
                                    </div>
                                    <div id="col-arrival" class="p-4 space-y-3 min-h-96 dropzone" data-status="arrival"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
        </div>
        </main>
    </div>

    <!-- AI Assistant Floating Button -->
    <div id="ai-assistant" class="fixed bottom-6 right-6 z-50">
        <button id="ai-toggle"
            class="w-14 h-14 rounded-full text-white shadow-lg hover:shadow-xl transition-all duration-300 flex items-center justify-center"
            style="background-color: #d82128;">
            <i data-lucide="message-circle" class="w-6 h-6"></i>
        </button>

        <!-- AI Chat Panel -->
        <div id="ai-chat-panel"
            class="hidden absolute bottom-16 right-0 w-80 h-96 bg-white rounded-lg shadow-xl border border-gray-200">
            <!-- Chat Header -->
            <div class="flex items-center justify-between p-4 border-b border-gray-200"
                style="background-color: #d82128;">
                <div class="flex items-center">
                    <div class="w-8 h-8 rounded-full bg-red-100 flex items-center justify-center mr-3">
                        <i data-lucide="bot" class="w-4 h-4" style="color: #d82128;"></i>
                    </div>
                    <div>
                        <h3 class="text-sm font-medium text-white">AI Assistant</h3>
                        <p class="text-xs text-red-100">Online</p>
                    </div>
                </div>
                <button id="ai-close" class="text-white hover:text-red-100">
                    <i data-lucide="x" class="w-4 h-4"></i>
                </button>
            </div>

            <!-- Chat Messages -->
            <div id="chat-messages" class="flex-1 p-4 h-64 overflow-y-auto">
                <div class="mb-4">
                    <div class="flex items-start">
                        <div class="w-6 h-6 rounded-full bg-red-100 flex items-center justify-center mr-2 mt-1">
                            <i data-lucide="bot" class="w-3 h-3" style="color: #d82128;"></i>
                        </div>
                        <div class="bg-gray-100 rounded-lg p-3 max-w-xs">
                            <p class="text-sm text-gray-800">Hello! I can help you analyze application trends, review
                                statuses, and provide processing recommendations. What would you like to know?</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Chat Input -->
            <div class="p-4 border-t border-gray-200">
                <div class="flex items-center">
                    <input type="text" id="chat-input" placeholder="Ask about applications..."
                        class="flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-red-400 focus:border-red-400">
                    <button id="send-message" class="ml-2 p-2 rounded-lg text-white" style="background-color: #d82128;">
                        <i data-lucide="send" class="w-4 h-4"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Application Detail Modal -->
    <div id="applicationModal" class="fixed inset-0 bg-gray-500 bg-opacity-75 hidden z-50">
        <div class="flex items-start justify-center min-h-screen p-4">
            <div class="bg-white rounded-xl shadow-xl w-full max-w-4xl overflow-hidden relative my-8">
                <!-- Modal Header -->
                <div class="px-6 py-4 border-b flex items-center justify-between sticky top-0 bg-white z-10">
                    <div class="flex items-center space-x-4">
                        <h3 class="text-lg font-semibold text-gray-900">Application Details</h3>
                        <div class="px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800"
                            id="modalStatus">Submitted</div>
                    </div>
                    <div class="flex items-center space-x-3">
                        <button
                            class="inline-flex items-center px-3 py-1.5 border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-red-50"
                            onclick="editApplication()">
                            <i data-lucide="edit" class="w-4 h-4 mr-1"></i>
                            Edit
                        </button>
                        <button
                            class="inline-flex items-center px-3 py-1.5 border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-red-50"
                            onclick="closeModal()">
                            <i data-lucide="x" class="w-4 h-4 mr-1"></i>
                            Close
                        </button>
                    </div>
                    Edit
                    </button>
                    <button onclick="closeApplicationModal()" class="text-gray-400 hover:text-gray-500">
                        <i data-lucide="x" class="w-5 h-5"></i>
                    </button>
                </div>
            </div>

            <!-- Modal Content -->
            <div class="overflow-y-auto" style="max-height: calc(100vh - 12rem);">
                <!-- Tabs -->
                <div class="px-6 py-2 border-b bg-white sticky top-[0.5rem] z-10">
                    <nav class="flex space-x-4">
                        <button role="tab" data-tab="profile"
                            class="rounded-lg px-4 py-2 text-sm font-medium bg-red-50 text-red-400">
                            Profile
                        </button>
                        <button role="tab" data-tab="documents"
                            class="rounded-lg px-4 py-2 text-sm font-medium text-gray-500 hover:bg-red-50">
                            Documents
                        </button>
                        <button role="tab" data-tab="checklist"
                            class="rounded-lg px-4 py-2 text-sm font-medium text-gray-500 hover:bg-red-50">
                            Checklist
                        </button>
                        <button role="tab" data-tab="history"
                            class="rounded-lg px-4 py-2 text-sm font-medium text-gray-500 hover:bg-red-50">
                            History
                        </button>
                    </nav>
                </div>

                <!-- Tab Contents -->
                <div class="p-6">
                    <!-- Profile Tab -->
                    <div id="profile-tab" class="space-y-8">
                        <!-- Personal Information -->
                        <div>
                            <h4 class="text-base font-medium text-gray-900 mb-4">Personal Information</h4>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Full Name</label>
                                    <div class="text-sm text-gray-900">John Smith</div>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                                    <div class="text-sm text-gray-900">john.smith@example.com</div>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Phone</label>
                                    <div class="text-sm text-gray-900">+1 234 567 8900</div>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Nationality</label>
                                    <div class="text-sm text-gray-900">United States</div>
                                </div>
                            </div>
                        </div>

                        <!-- Academic Information -->
                        <div>
                            <h4 class="text-base font-medium text-gray-900 mb-4">Academic Information</h4>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Current/Previous
                                        Institution</label>
                                    <div class="text-sm text-gray-900">University of Washington</div>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Major</label>
                                    <div class="text-sm text-gray-900">Business Administration</div>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">GPA</label>
                                    <div class="text-sm text-gray-900">3.8/4.0</div>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">English
                                        Proficiency</label>
                                    <div class="text-sm text-gray-900">IELTS 7.5</div>
                                </div>
                            </div>
                        </div>

                        <!-- Application Details -->
                        <div>
                            <h4 class="text-base font-medium text-gray-900 mb-4">Application Details</h4>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Scholarship</label>
                                    <div class="text-sm text-gray-900">BBA - University of Melbourne</div>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Intake</label>
                                    <div class="text-sm text-gray-900">Fall 2025</div>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Agent</label>
                                    <div class="text-sm text-gray-900">Sarah Wilson</div>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Submission Date</label>
                                    <div class="text-sm text-gray-900">April 8, 2024</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Documents Tab -->
                    <div id="documents-tab" class="hidden">
                        <div class="space-y-6">
                            <h4 class="text-base font-medium text-gray-900 mb-4">Documents</h4>
                            <div class="grid grid-cols-1 gap-4">
                                <!-- Passport -->
                                <div class="border rounded-lg p-4">
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <h5 class="text-sm font-medium text-gray-900">Passport</h5>
                                            <p class="text-sm text-gray-500">Valid until 2029</p>
                                        </div>
                                        <div class="flex items-center space-x-2">
                                            <button
                                                class="inline-flex items-center px-3 py-1.5 border border-gray-300 text-gray-700 text-sm font-medium rounded-lg hover:bg-red-50">
                                                <i data-lucide="eye" class="w-4 h-4 mr-1"></i>
                                                View
                                            </button>
                                            <button
                                                class="inline-flex items-center px-3 py-1.5 border border-gray-300 text-gray-700 text-sm font-medium rounded-lg hover:bg-red-50">
                                                <i data-lucide="download" class="w-4 h-4 mr-1"></i>
                                                Download
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                <!-- Academic Transcript -->
                                <div class="border rounded-lg p-4">
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <h5 class="text-sm font-medium text-gray-900">Academic Transcript</h5>
                                            <p class="text-sm text-gray-500">Latest semester included</p>
                                        </div>
                                        <div class="flex items-center space-x-2">
                                            <button
                                                class="inline-flex items-center px-3 py-1.5 border border-gray-300 text-gray-700 text-sm font-medium rounded-lg hover:bg-red-50">
                                                <i data-lucide="eye" class="w-4 h-4 mr-1"></i>
                                                View
                                            </button>
                                            <button
                                                class="inline-flex items-center px-3 py-1.5 border border-gray-300 text-gray-700 text-sm font-medium rounded-lg hover:bg-red-50">
                                                <i data-lucide="download" class="w-4 h-4 mr-1"></i>
                                                Download
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                <!-- IELTS Certificate -->
                                <div class="border rounded-lg p-4">
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <h5 class="text-sm font-medium text-gray-900">IELTS Certificate</h5>
                                            <p class="text-sm text-gray-500">Overall Band: 7.5</p>
                                        </div>
                                        <div class="flex items-center space-x-2">
                                            <button
                                                class="inline-flex items-center px-3 py-1.5 border border-gray-300 text-gray-700 text-sm font-medium rounded-lg hover:bg-red-50">
                                                <i data-lucide="eye" class="w-4 h-4 mr-1"></i>
                                                View
                                            </button>
                                            <button
                                                class="inline-flex items-center px-3 py-1.5 border border-gray-300 text-gray-700 text-sm font-medium rounded-lg hover:bg-red-50">
                                                <i data-lucide="download" class="w-4 h-4 mr-1"></i>
                                                Download
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Checklist Tab -->
                    <div id="checklist-tab" class="hidden">
                        <div class="space-y-6">
                            <h4 class="text-base font-medium text-gray-900 mb-4">Application Checklist</h4>

                            <!-- Step 1: Document Submission -->
                            <div>
                                <div class="flex items-center">
                                    <div class="flex-shrink-0">
                                        <span
                                            class="w-8 h-8 flex items-center justify-center rounded-full bg-green-100 text-green-600">
                                            <i data-lucide="check" class="w-5 h-5"></i>
                                        </span>
                                    </div>
                                    <div class="ml-4">
                                        <h5 class="text-sm font-medium text-gray-900">Document Submission</h5>
                                        <p class="text-sm text-gray-500">All required documents have been submitted</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Step 2: Document Verification -->
                            <div>
                                <div class="flex items-center">
                                    <div class="flex-shrink-0">
                                        <span
                                            class="w-8 h-8 flex items-center justify-center rounded-full bg-green-100 text-green-600">
                                            <i data-lucide="check" class="w-5 h-5"></i>
                                        </span>
                                    </div>
                                    <div class="ml-4">
                                        <h5 class="text-sm font-medium text-gray-900">Document Verification</h5>
                                        <p class="text-sm text-gray-500">Documents have been verified</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Step 3: Application Review -->
                            <div>
                                <div class="flex items-center">
                                    <div class="flex-shrink-0">
                                        <span
                                            class="w-8 h-8 flex items-center justify-center rounded-full bg-blue-100 text-red-400">
                                            <i data-lucide="clock" class="w-5 h-5"></i>
                                        </span>
                                    </div>
                                    <div class="ml-4">
                                        <h5 class="text-sm font-medium text-gray-900">Application Review</h5>
                                        <p class="text-sm text-gray-500">Under review by the admissions team</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Step 4: Interview -->
                            <div>
                                <div class="flex items-center">
                                    <div class="flex-shrink-0">
                                        <span
                                            class="w-8 h-8 flex items-center justify-center rounded-full bg-gray-100 text-gray-400">
                                            <i data-lucide="video" class="w-5 h-5"></i>
                                        </span>
                                    </div>
                                    <div class="ml-4">
                                        <h5 class="text-sm font-medium text-gray-900">Interview</h5>
                                        <p class="text-sm text-gray-500">Not scheduled yet</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Step 5: Final Decision -->
                            <div>
                                <div class="flex items-center">
                                    <div class="flex-shrink-0">
                                        <span
                                            class="w-8 h-8 flex items-center justify-center rounded-full bg-gray-100 text-gray-400">
                                            <i data-lucide="check-circle" class="w-5 h-5"></i>
                                        </span>
                                    </div>
                                    <div class="ml-4">
                                        <h5 class="text-sm font-medium text-gray-900">Final Decision</h5>
                                        <p class="text-sm text-gray-500">Pending</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- History Tab -->
                    <div id="history-tab" class="hidden">
                        <div class="space-y-6">
                            <h4 class="text-base font-medium text-gray-900 mb-4">Application History</h4>

                            <div class="flow-root">
                                <ul role="list" class="-mb-8">
                                    <li>
                                        <div class="relative pb-8">
                                            <span class="absolute top-4 left-4 -ml-px h-full w-0.5 bg-gray-200"
                                                aria-hidden="true"></span>
                                            <div class="relative flex space-x-3">
                                                <div>
                                                    <span
                                                        class="h-8 w-8 rounded-full bg-blue-500 flex items-center justify-center ring-8 ring-white">
                                                        <i data-lucide="file-text" class="w-5 h-5 text-white"></i>
                                                    </span>
                                                </div>
                                                <div class="min-w-0 flex-1 pt-1.5 flex justify-between space-x-4">
                                                    <div>
                                                        <p class="text-sm text-gray-500">Application submitted by <span
                                                                class="font-medium text-gray-900">Sarah Wilson</span>
                                                        </p>
                                                    </div>
                                                    <div class="text-right text-sm whitespace-nowrap text-gray-500">
                                                        <time datetime="2024-04-08">Apr 8, 2024</time>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </li>

                                    <li>
                                        <div class="relative pb-8">
                                            <span class="absolute top-4 left-4 -ml-px h-full w-0.5 bg-gray-200"
                                                aria-hidden="true"></span>
                                            <div class="relative flex space-x-3">
                                                <div>
                                                    <span
                                                        class="h-8 w-8 rounded-full bg-green-500 flex items-center justify-center ring-8 ring-white">
                                                        <i data-lucide="check" class="w-5 h-5 text-white"></i>
                                                    </span>
                                                </div>
                                                <div class="min-w-0 flex-1 pt-1.5 flex justify-between space-x-4">
                                                    <div>
                                                        <p class="text-sm text-gray-500">Documents verified by <span
                                                                class="font-medium text-gray-900">Admin</span></p>
                                                    </div>
                                                    <div class="text-right text-sm whitespace-nowrap text-gray-500">
                                                        <time datetime="2024-04-09">Apr 9, 2024</time>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </li>

                                    <li>
                                        <div class="relative">
                                            <div class="relative flex space-x-3">
                                                <div>
                                                    <span
                                                        class="h-8 w-8 rounded-full bg-blue-500 flex items-center justify-center ring-8 ring-white">
                                                        <i data-lucide="eye" class="w-5 h-5 text-white"></i>
                                                    </span>
                                                </div>
                                                <div class="min-w-0 flex-1 pt-1.5 flex justify-between space-x-4">
                                                    <div>
                                                        <p class="text-sm text-gray-500">Application under review by
                                                            <span class="font-medium text-gray-900">Admissions
                                                                Team</span>
                                                        </p>
                                                    </div>
                                                    <div class="text-right text-sm whitespace-nowrap text-gray-500">
                                                        <time datetime="2024-04-10">Apr 10, 2024</time>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>
    </div>

    <!-- Assign Advisor Modal -->
    <div id="assignAdvisorModal" class="fixed inset-0 bg-black bg-opacity-50 overflow-y-auto h-full w-full hidden">
        <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
            <div class="mt-3 text-center">
                <div class="mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100">
                    <i data-lucide="user-plus" class="h-6 w-6 text-red-600"></i>
                </div>
                <h3 class="text-lg leading-6 font-medium text-gray-900 mt-3">Assign Advisors</h3>

                <!-- Academic Advisor -->
                <div class="mt-4 px-4 py-2">
                    <label for="academicAdvisor" class="block text-sm font-medium text-gray-700 text-left mb-1">Academic
                        Advisor <span class="text-red-500">*</span></label>
                    <select id="academicAdvisor"
                        class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-red-500 focus:ring-red-500">
                        <option value="">Select Academic Advisor</option>
                        <option value="advisor1">John Doe</option>
                        <option value="advisor2">Jane Smith</option>
                        <option value="advisor3">Robert Johnson</option>
                    </select>
                </div>

                <!-- Visa Advisor -->
                <div class="mt-4 px-4 py-2">
                    <label for="visaAdvisor" class="block text-sm font-medium text-gray-700 text-left mb-1">Visa Advisor
                        <span class="text-red-500">*</span></label>
                    <select id="visaAdvisor"
                        class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-red-500 focus:ring-red-500">
                        <option value="">Select Visa Advisor</option>
                        <option value="advisor4">Emily Davis</option>
                        <option value="advisor5">Michael Brown</option>
                        <option value="advisor6">Sarah Wilson</option>
                    </select>
                </div>

                <!-- Senior Advisor (Optional) -->
                <div class="mt-4 px-4 py-2">
                    <label for="seniorAdvisor" class="block text-sm font-medium text-gray-700 text-left mb-1">Senior
                        Advisor (Optional)</label>
                    <select id="seniorAdvisor"
                        class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-red-500 focus:ring-red-500">
                        <option value="">Select Senior Advisor (Optional)</option>
                        <option value="advisor7">David Miller</option>
                        <option value="advisor8">Lisa Anderson</option>
                        <option value="">None</option>
                    </select>
                </div>

                <div class="items-center px-4 py-4">
                    <button id="assignBtn"
                        class="w-full justify-center px-4 py-2 bg-red-600 text-white text-base font-medium rounded-md shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500">
                        Assign Advisors
                    </button>
                    <button onclick="closeAdvisorModal()"
                        class="mt-2 w-full justify-center px-4 py-2 bg-gray-100 text-gray-700 text-base font-medium rounded-md shadow-sm hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-300">
                        Cancel
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Initialize Lucide Icons
        lucide.createIcons();

        // Function to open advisor modal
        function openAdvisorModal() {
            document.getElementById('assignAdvisorModal').classList.remove('hidden');
        }

        // Function to close advisor modal
        function closeAdvisorModal() {
            document.getElementById('assignAdvisorModal').classList.add('hidden');
        }

        // Close modal when clicking outside
        window.onclick = function (event) {
            const modal = document.getElementById('assignAdvisorModal');
            if (event.target === modal) {
                closeAdvisorModal();
            }
        }

        // Handle assign button click
        document.getElementById('assignBtn').addEventListener('click', function () {
            const academicAdvisor = document.getElementById('academicAdvisor').value;
            const visaAdvisor = document.getElementById('visaAdvisor').value;

            // Basic validation
            if (!academicAdvisor || !visaAdvisor) {
                alert('Please select both Academic Advisor and Visa Advisor');
                return;
            }

            // Here you would typically make an API call to save the advisors
            console.log('Assigning advisors:', {
                academicAdvisor,
                visaAdvisor,
                seniorAdvisor: document.getElementById('seniorAdvisor').value || 'None'
            });

            // Close the modal after assignment
            closeAdvisorModal();

            // Show success message (you can replace this with a toast notification)
            alert('Advisors assigned successfully!');
        });

        // Initialize Lucide Icons
        lucide.createIcons();

        // Handle logout
        function handleLogout() {
            window.location.href = '../../login.html';
        }

        // Profile Dropdown Toggle
        const profileMenu = document.getElementById('profile-menu');
        const profileDropdown = document.getElementById('profile-dropdown');

        profileMenu.addEventListener('click', () => {
            profileDropdown.classList.toggle('hidden');
        });

        // Close dropdown when clicking outside
        document.addEventListener('click', (e) => {
            if (!profileMenu.contains(e.target)) {
                profileDropdown.classList.add('hidden');
            }
        });

        // Modal Functions
        const modal = document.getElementById('applicationModal');
        const modalStatus = document.getElementById('modalStatus');

        function openModal(status) {
            modal.classList.remove('hidden');
            modalStatus.textContent = status;
            modalStatus.className = `px-2 py-1 rounded-full text-xs font-medium ${status === 'Accepted' ? 'bg-green-100 text-green-800' :
                status === 'Rejected' ? 'bg-red-100 text-red-800' :
                    status === 'In Review' ? 'bg-yellow-100 text-yellow-800' :
                        'bg-red-100 text-red-800'
                }`;
        }

        function closeModal() {
            modal.classList.add('hidden');
        }

        function editApplication() {
            // Handle edit application logic
            console.log('Edit application');
        }

        // AI Assistant functionality
        const aiToggle = document.getElementById('ai-toggle');
        const aiChatPanel = document.getElementById('ai-chat-panel');
        const aiClose = document.getElementById('ai-close');
        const chatInput = document.getElementById('chat-input');
        const sendMessage = document.getElementById('send-message');
        const chatMessages = document.getElementById('chat-messages');

        aiToggle.addEventListener('click', () => {
            aiChatPanel.classList.toggle('hidden');
        });

        aiClose.addEventListener('click', () => {
            aiChatPanel.classList.add('hidden');
        });

        function addMessage(message, isUser = false) {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'mb-4';

            if (isUser) {
                messageDiv.innerHTML = `
                    <div class="flex items-start justify-end">
                        <div class="rounded-lg p-3 max-w-xs text-white" style="background-color: #d82128;">
                            <p class="text-sm">${message}</p>
                        </div>
                    </div>
                `;
            } else {
                messageDiv.innerHTML = `
                    <div class="flex items-start">
                        <div class="w-6 h-6 rounded-full bg-red-100 flex items-center justify-center mr-2 mt-1">
                            <i data-lucide="bot" class="w-3 h-3" style="color: #d82128;"></i>
                        </div>
                        <div class="bg-gray-100 rounded-lg p-3 max-w-xs">
                            <p class="text-sm text-gray-800">${message}</p>
                        </div>
                    </div>
                `;
            }

            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
            lucide.createIcons();
        }

        function handleSendMessage() {
            const message = chatInput.value.trim();
            if (message) {
                addMessage(message, true);
                chatInput.value = '';

                // Simulate AI response
                setTimeout(() => {
                    const responses = [
                        "I see 3 applications currently in review status. The average processing time is 5 days. Would you like me to prioritize any specific applications?",
                        "Based on the data, applications from Sarah Wilson have a 95% acceptance rate. Michael Chen's applications show strong academic profiles.",
                        "There are 2 applications missing documents. Should I help you send reminder notifications to the students?",
                        "The acceptance rate for Australian universities is 78% this month. UK scholarships show 65% acceptance rate. Would you like detailed analytics?"
                    ];
                    const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                    addMessage(randomResponse);
                }, 1000);
            }
        }

        sendMessage.addEventListener('click', handleSendMessage);
        chatInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                handleSendMessage();
            }
        });

        // Close modal when clicking outside
        modal.addEventListener('click', (e) => {
            if (e.target === modal) {
                closeModal();
            }
        });

        // Filter Drawer Functionality
        const filterToggle = document.getElementById('filter-toggle');
        const filterDrawer = document.getElementById('filter-drawer');
        const filterBackdrop = document.getElementById('filter-backdrop');
        const closeFilter = document.getElementById('close-filter');
        const applyFiltersBtn = document.getElementById('apply-filters');
        const resetFiltersBtn = document.getElementById('reset-filters');

        // Open drawer
        function openFilterDrawer() {
            filterDrawer.classList.remove('translate-x-full');
            filterBackdrop.classList.remove('opacity-0', 'pointer-events-none');
            filterBackdrop.classList.add('opacity-100');
            document.body.style.overflow = 'hidden';
        }

        // Close drawer
        function closeFilterDrawer() {
            filterDrawer.classList.add('translate-x-full');
            filterBackdrop.classList.add('opacity-0', 'pointer-events-none');
            filterBackdrop.classList.remove('opacity-100');
            document.body.style.overflow = '';
        }

        // Event Listeners
        if (filterToggle) filterToggle.addEventListener('click', openFilterDrawer);
        if (closeFilter) closeFilter.addEventListener('click', closeFilterDrawer);
        if (filterBackdrop) filterBackdrop.addEventListener('click', closeFilterDrawer);

        // Close with Escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeFilterDrawer();
            }
        });

        // Show toast notification
        function showToast(message, type = 'success') {
            // Add toast notification logic here
            console.log(`${type}: ${message}`);
        }

        // Apply filters
        if (applyFiltersBtn) {
            applyFiltersBtn.addEventListener('click', () => {
                // Here you would typically apply the filters to your data
                closeFilterDrawer();
                showToast('Filters applied successfully', 'success');
            });
        }

        // Reset filters
        if (resetFiltersBtn) {
            resetFiltersBtn.addEventListener('click', () => {
                const selects = filterDrawer.querySelectorAll('select');
                const inputs = filterDrawer.querySelectorAll('input[type="date"]');

                selects.forEach(select => {
                    select.selectedIndex = 0; // Reset to first option
                });

                inputs.forEach(input => {
                    input.value = ''; // Clear date inputs
                });

                showToast('Filters reset', 'info');
            });
        }

        // View Toggle Functionality
        document.addEventListener('DOMContentLoaded', function () {
            const listViewBtn = document.getElementById('list-view-btn');
            const boardViewBtn = document.getElementById('board-view-btn');
            const tableView = document.querySelector('.px-6.py-4'); // The table view container
            const boardView = document.getElementById('board-view');

            // Set initial view (list view)
            function setView(isBoardView) {
                if (isBoardView) {
                    // Show board view, hide table view
                    if (boardView) boardView.classList.remove('hidden');
                    if (tableView) tableView.classList.add('hidden');

                    // Update button states
                    if (boardViewBtn) {
                        boardViewBtn.classList.remove('text-gray-400');
                        boardViewBtn.classList.add('text-gray-700');
                    }
                    if (listViewBtn) {
                        listViewBtn.classList.remove('text-gray-700');
                        listViewBtn.classList.add('text-gray-400');
                    }
                } else {
                    // Show table view, hide board view
                    if (tableView) tableView.classList.remove('hidden');
                    if (boardView) boardView.classList.add('hidden');

                    // Update button states
                    if (listViewBtn) {
                        listViewBtn.classList.remove('text-gray-400');
                        listViewBtn.classList.add('text-gray-700');
                    }
                    if (boardViewBtn) {
                        boardViewBtn.classList.remove('text-gray-700');
                        boardViewBtn.classList.add('text-gray-400');
                    }
                }
            }

            // Event listeners for view toggle buttons
            if (listViewBtn) {
                listViewBtn.addEventListener('click', () => setView(false));
            }
            if (boardViewBtn) {
                boardViewBtn.addEventListener('click', () => setView(true));
            }

            // Make cards draggable
            const draggables = document.querySelectorAll('[draggable="true"]');
            const containers = document.querySelectorAll('.flex-shrink-0.w-72');

            draggables.forEach(draggable => {
                draggable.addEventListener('dragstart', () => {
                    draggable.classList.add('opacity-50', 'ring-2', 'ring-red-400');
                });

                draggable.addEventListener('dragend', () => {
                    draggable.classList.remove('opacity-50', 'ring-2', 'ring-red-400');
                });
            });

            containers.forEach(container => {
                container.addEventListener('dragover', e => {
                    e.preventDefault();
                    const afterElement = getDragAfterElement(container, e.clientY);
                    const draggable = document.querySelector('.opacity-50');
                    if (draggable) {
                        const lastChild = container.querySelector('div:last-child');
                        if (afterElement == null && lastChild) {
                            lastChild.appendChild(draggable);
                        } else if (afterElement) {
                            container.insertBefore(draggable, afterElement);
                        }
                    }
                });
            });

            function getDragAfterElement(container, y) {
                const draggableElements = [...container.querySelectorAll('[draggable="true"]:not(.opacity-50)')];

                return draggableElements.reduce((closest, child) => {
                    const box = child.getBoundingClientRect();
                    const offset = y - box.top - box.height / 2;
                    if (offset < 0 && offset > closest.offset) {
                        return { offset: offset, element: child };
                    } else {
                        return closest;
                    }
                }, { offset: Number.NEGATIVE_INFINITY }).element;
            }
        });

        // Toggle Scholarships Function
        function toggleScholarships(button) {
            const container = button.closest('.scholarship-container');
            const hiddenScholarships = container.querySelector('.hidden-scholarships');
            const moreText = button.querySelector('.more-text');
            const lessText = button.querySelector('.less-text');
            const moreIcon = button.querySelector('.more-icon');
            const lessIcon = button.querySelector('.less-icon');

            // Toggle visibility
            hiddenScholarships.classList.toggle('hidden');
            moreText.classList.toggle('hidden');
            lessText.classList.toggle('hidden');
            moreIcon.classList.toggle('hidden');
            lessIcon.classList.toggle('hidden');

            // Reinitialize lucide icons
            lucide.createIcons();
        }

        // View Toggle for Table/Board
        (function() {
            const table = document.getElementById('table-view');
            const board = document.getElementById('board-view');
            const buttons = document.querySelectorAll('.view-toggle');

            function setActive(isBoard) {
                if (!table || !board) return;
                if (isBoard) {
                    table.classList.add('hidden');
                    board.classList.remove('hidden');
                } else {
                    table.classList.remove('hidden');
                    board.classList.add('hidden');
                }
                // update button styles
                buttons.forEach(btn => {
                    const wantBoard = btn.getAttribute('data-view') === 'board';
                    btn.classList.toggle('bg-red-600', wantBoard === isBoard);
                    btn.classList.toggle('text-white', wantBoard === isBoard);
                    btn.classList.toggle('bg-gray-100', wantBoard !== isBoard);
                    btn.classList.toggle('text-gray-600', wantBoard !== isBoard);
                });
                localStorage.setItem('viewMode', isBoard ? 'board' : 'table');
            }

            // Set table view as default on page load
            document.addEventListener('DOMContentLoaded', function() {
                setActive(false); // This will show the table view by default
                
                // Bind click events for view toggle buttons
                buttons.forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        e.preventDefault();
                        const view = btn.getAttribute('data-view');
                        setActive(view === 'board');
                    });
                });
            });
        })();

        // Drag & Drop for Kanban Board
        (function initKanbanDnD() {
            const boardRoot = document.getElementById('board-view');
            if (!boardRoot) return;

            const dropzones = boardRoot.querySelectorAll('.dropzone');
            const statusOrder = [
                'initial_advising',
                'application_in_progress',
                'submitted_to_school',
                'school_response',
                'offer_letter_issued',
                'committed_to_school',
                'visa_application',
                'pre_departure',
                'arrival'
            ];

            function updateCounts() {
                statusOrder.forEach(status => {
                    const col = document.getElementById(`col-${status}`);
                    const countSpan = document.getElementById(`count-${status}`);
                    if (col && countSpan) {
                        const count = col.querySelectorAll('[draggable="true"]').length;
                        countSpan.textContent = count;
                    }
                });
            }

            function updateBadgeAppearance(card, status) {
                const badge = card.querySelector('.status-badge');
                if (!badge) return;
                // reset
                badge.className = 'status-badge text-xs px-2 py-1 rounded-full';
                switch (status) {
                    case 'initial_advising':
                        badge.textContent = 'Initial Advising';
                        badge.classList.add('bg-red-100','text-red-800');
                        break;
                    case 'application_in_progress':
                        badge.textContent = 'Application In Progress';
                        badge.classList.add('bg-yellow-100','text-yellow-800');
                        break;
                    case 'submitted_to_school':
                        badge.textContent = 'Submitted to School';
                        badge.classList.add('bg-blue-100','text-blue-800');
                        break;
                    case 'school_response':
                        badge.textContent = 'School Response';
                        badge.classList.add('bg-amber-100','text-amber-800');
                        break;
                    case 'offer_letter_issued':
                        badge.textContent = 'Offer Letter Issued';
                        badge.classList.add('bg-purple-100','text-purple-800');
                        break;
                    case 'committed_to_school':
                        badge.textContent = 'Committed to School';
                        badge.classList.add('bg-indigo-100','text-indigo-800');
                        break;
                    case 'visa_application':
                        badge.textContent = 'Visa Application';
                        badge.classList.add('bg-pink-100','text-pink-800');
                        break;
                    case 'pre_departure':
                        badge.textContent = 'Pre-Departure';
                        badge.classList.add('bg-teal-100','text-teal-800');
                        break;
                    case 'arrival':
                        badge.textContent = 'Arrival';
                        badge.classList.add('bg-green-100','text-green-800');
                        break;
                }
            }

            let draggedCard = null;

            // Drag start
            boardRoot.addEventListener('dragstart', (e) => {
                if (e.target.hasAttribute('draggable')) {
                    draggedCard = e.target;
                    e.target.style.opacity = '0.4';
                }
            });

            // Drag end
            boardRoot.addEventListener('dragend', (e) => {
                if (e.target.hasAttribute('draggable')) {
                    e.target.style.opacity = '1';
                }
            });

            // Drag over
            dropzones.forEach(zone => {
                zone.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    zone.classList.add('bg-gray-100');
                });

                zone.addEventListener('dragleave', () => {
                    zone.classList.remove('bg-gray-100');
                });

                zone.addEventListener('drop', (e) => {
                    e.preventDefault();
                    zone.classList.remove('bg-gray-100');
                    
                    if (draggedCard) {
                        const newStatus = zone.getAttribute('data-status');
                        draggedCard.setAttribute('data-status', newStatus);
                        zone.appendChild(draggedCard);
                        updateBadgeAppearance(draggedCard, newStatus);
                        updateCounts();
                        
                        // Here you would typically make an API call to update the status
                        console.log(`Card moved to: ${newStatus}`);
                    }
                });
            });

            // Initial count update
            updateCounts();
        })();
    </script>
</body>

</html>