<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Find University - APPLYLEAD</title>
    <!-- Tailwind CSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Inter Font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }

        .gradient-bg {
            background: linear-gradient(to right top, #EDE5D6, #9ED5C5, #ffffff);
        }
    </style>
    <!-- Add Select2 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <style>
        /* Custom Select2 styles */
        .select2-container--default .select2-selection--single {
            height: 40px;
            border: 1px solid #d1d5db !important;
            border-radius: 0.5rem !important;
            padding: 0.4rem 0.75rem;
        }

        .select2-container--default .select2-selection--single .select2-selection__arrow {
            height: 38px;
            right: 8px;
        }

        .select2-container--default .select2-selection--single .select2-selection__rendered {
            line-height: 24px;
            padding-left: 0;
        }

        .select2-container--default.select2-container--focus .select2-selection--single {
            border-color: #ef4444 !important;
            box-shadow: 0 0 0 2px rgba(239, 68, 68, 0.2) !important;
        }

        .select2-container--default .select2-results__option--highlighted[aria-selected] {
            background-color: #fecaca;
            color: #b91c1c;
        }
    </style>
</head>

<body class="bg-gray-50">
    <!-- Main Content -->
    <div class="min-h-screen">
        <!-- Header with Navigation -->
        <header class="bg-white shadow-sm">
            <div class="px-6 py-4">
                <div class="flex items-center justify-between">
                    <!-- Logo -->
                    <div class="flex items-center">
                        <a href="Student-Dashboard.html" class="flex items-center">
                            <img src="../../ApplyLead_logo.png" alt="ApplyLead Logo" class="h-8 w-auto mr-4">
                            <span class="text-sm text-gray-500 bg-gray-100 px-2 py-1 rounded-full">Student</span>
                        </a>
                    </div>

                    <!-- Navigation Menu -->
                    <nav class="flex items-center space-x-3">
                        <a href="Student-Dashboard.html"
                            class="flex items-center text-gray-600 hover:text-red-600 px-3 py-2 rounded-lg font-medium transition-colors">
                            <i data-lucide="layout-dashboard" class="w-4 h-4 mr-2"></i>
                            Dashboard
                        </a>
                        <a href="Student-product-page.html"
                            class="flex items-center text-gray-600 hover:text-red-600 px-3 py-2 rounded-lg font-medium transition-colors">
                            <i data-lucide="package" class="w-4 h-4 mr-2"></i>
                            Ellacy Program
                        </a>
                        <a href="Student-find-program.html"
                            class="flex items-center text-red-600 bg-red-50 px-3 py-2 rounded-lg font-medium transition-colors">
                            <i data-lucide="search" class="w-4 h-4 mr-2"></i>
                            Find University
                        </a>
                        <a href="Student-favorites.html"
                            class="flex items-center text-gray-600 hover:text-red-600 px-3 py-2 rounded-lg font-medium transition-colors">
                            <i data-lucide="heart" class="w-4 h-4 mr-2"></i>
                            Favorites (4)
                        </a>
                        <a href="Student-my-application.html"
                            class="flex items-center text-gray-600 hover:text-red-600 px-3 py-2 rounded-lg font-medium transition-colors">
                            <i data-lucide="file-text" class="w-4 h-4 mr-2"></i>
                            My Applications (8)
                        </a>
                        <a href="Student-payment.html"
                            class="flex items-center text-gray-600 hover:text-red-600 px-3 py-2 rounded-lg font-medium transition-colors">
                            <i data-lucide="credit-card" class="w-4 h-4 mr-2"></i>
                            Payment
                        </a>
                    </nav>

                    <!-- Right Side -->
                    <div class="flex items-center space-x-4">
                        <a href="Student-messages.html"
                            class="p-2 text-gray-600 hover:text-blue-600 hover:bg-gray-50 rounded-lg" title="Messages">
                            <i data-lucide="mail" class="w-5 h-5"></i>
                        </a>

                        <button class="relative">
                            <i data-lucide="bell" class="w-6 h-6 text-gray-600"></i>
                            <span class="absolute top-0 right-0 w-2 h-2 bg-red-500 rounded-full"></span>
                        </button>
                        <!-- Profile Dropdown -->
                        <div class="relative">
                            <button id="profile-menu"
                                class="flex items-center space-x-2 p-2 hover:bg-gray-100 rounded-full">
                                <img src="https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=100&h=100&fit=crop"
                                    alt="Profile" class="w-8 h-8 rounded-full object-cover">
                            </button>

                            <!-- Dropdown Menu -->
                            <div id="profile-dropdown"
                                class="hidden absolute right-0 mt-2 w-48 bg-white rounded-xl shadow-lg py-1 z-50">
                                <a href="Student-profile.html"
                                    class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                                    <i data-lucide="user" class="w-4 h-4 inline-block mr-2"></i> Profile
                                </a>
                                <a href="Student-profile.html"
                                    class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                                    <i data-lucide="settings" class="w-4 h-4 inline-block mr-2"></i> Settings
                                </a>
                                <a href="#" onclick="handleLogout()"
                                    class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                                    <i data-lucide="log-out" class="w-4 h-4 inline-block mr-2"></i> Logout
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Dashboard Content -->
        <main class="p-6">
            <!-- Country Selection Tabs and View Toggle -->
            <div class="flex justify-between items-center mb-4">
                <div class="flex-1">
                    <div class="flex gap-2 overflow-x-auto pb-2">
                        <button id="scholarships-btn"
                            class="flex items-center px-4 py-2 text-white rounded-lg text-sm font-medium whitespace-nowrap"
                            style="background-color: #d82128;" onclick="toggleTabs('scholarships')">
                            <i data-lucide="award" class="w-4 h-4 mr-2 text-yellow-600"></i>
                            Scholarships
                        </button>
                        <button id="joint-program-btn"
                            class="flex items-center px-4 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 whitespace-nowrap"
                            onclick="toggleTabs('joint-program')">
                            <i data-lucide="graduation-cap" class="w-4 h-4 mr-2"></i>
                            Joint Program
                        </button>
                        <button
                            class="flex items-center px-4 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 whitespace-nowrap">
                            <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAyMCAxNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjIwIiBoZWlnaHQ9IjE0IiBmaWxsPSIjMDAyODY4Ii8+CjxyZWN0IHk9IjEiIHdpZHRoPSIyMCIgaGVpZ2h0PSIxIiBmaWxsPSJ3aGl0ZSIvPgo8cmVjdCB5PSIzIiB3aWR0aD0iMjAiIGhlaWdodD0iMSIgZmlsbD0id2hpdGUiLz4KPC9zdmc+"
                                alt="USA Flag" class="w-5 h-3 mr-2">
                            United States
                        </button>
                        <button
                            class="flex items-center px-4 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 whitespace-nowrap">
                            <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAyMCAxNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjIwIiBoZWlnaHQ9IjE0IiBmaWxsPSIjRkYwMDAwIi8+CjxyZWN0IHdpZHRoPSI0IiBoZWlnaHQ9IjE0IiBmaWxsPSJ3aGl0ZSIvPgo8cmVjdCB4PSI4IiB3aWR0aD0iNCIgaGVpZ2h0PSIxNCIgZmlsbD0id2hpdGUiLz4KPC9zdmc+"
                                alt="Canada Flag" class="w-5 h-3 mr-2">
                            Canada
                        </button>
                        <button
                            class="flex items-center px-4 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 whitespace-nowrap">
                            <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAyMCAxNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjIwIiBoZWlnaHQ9IjE0IiBmaWxsPSIjMDA4MUNGIi8+CjxyZWN0IHk9IjciIHdpZHRoPSIyMCIgaGVpZ2h0PSI3IiBmaWxsPSIjMDA4MUNGIi8+CjxyZWN0IHdpZHRoPSIxMCIgaGVpZ2h0PSI3IiBmaWxsPSIjMDAyODY4Ii8+Cjxwb2x5Z29uIHBvaW50cz0iMTAsNyAxMi41LDEwIDcuNSwxMCIgZmlsbD0id2hpdGUiLz4KPC9zdmc+"
                                alt="Australia Flag" class="w-5 h-3 mr-2">
                            Australia
                        </button>
                    </div>
                </div>
                <!-- View Toggle Buttons -->
                <div class="flex space-x-2">
                    <button id="listViewBtn" class="p-2 rounded-lg bg-red-600 text-white" title="List View">
                        <i data-lucide="list" class="w-5 h-5"></i>
                    </button>
                    <button id="cardViewBtn" class="p-2 rounded-lg bg-gray-200 text-gray-600 hover:bg-gray-300"
                        title="Card View">
                        <i data-lucide="layout-grid" class="w-5 h-5"></i>
                    </button>
                </div>
            </div>

            <!-- Search Bar -->
            <div class="mb-6">
                <!-- Search Row Container -->
                <div class="flex gap-0 mb-4 bg-white rounded-xl border overflow-hidden">
                    <!-- Program Tier Dropdown -->
                    <div class="w-80">
                        <select
                            class="w-full px-4 py-3 bg-transparent border-0 focus:ring-0 focus:outline-none text-gray-700 border-r">
                            <option value="">Select Scholarship Tier</option>
                            <option value="scholarship-guarantee">Guaranteed Scholarship Program</option>
                            <option value="elite-admission">Elite Admission Program</option>
                            <option value="ivy-global">Ivy Global Student Program</option>
                            <option value="ivy-global">Joint Program (Vietnam to US Transfer)</option>
                        </select>
                    </div>

                    <!-- Search Input -->
                    <div class="relative flex-1">
                        <input type="text" placeholder="Search area of study (i.e business or accounting)"
                            class="w-full px-4 py-3 pl-4 bg-transparent border-0 focus:ring-0 focus:outline-none">
                        <button
                            class="absolute right-3 top-1/2 transform -translate-y-1/2 text-white px-4 py-1 rounded text-sm font-medium"
                            style="background-color: #d82128;">
                            Search Now!
                        </button>
                    </div>
                </div>
            </div>

            <div class="flex gap-6">
                <!-- Filter Sidebar -->
                <div class="w-72">
                    <div class="bg-white rounded-3xl shadow-md p-6">
                        <h2 class="text-lg font-semibold mb-4">Filters</h2>

                        <!-- State Filter -->
                        <div class="mb-4">
                            <button
                                class="filter-toggle w-full flex items-center justify-between p-3 text-left hover:bg-gray-50 rounded-lg"
                                data-filter="state">
                                <span class="text-gray-700">State<span class="text-gray-500">(15)</span></span>
                                <i data-lucide="chevron-down" class="w-4 h-4 text-gray-500 transition-transform"></i>
                            </button>
                            <div class="filter-content hidden mt-2 p-3 bg-gray-50 rounded-lg max-h-48 overflow-y-auto"
                                data-filter="state">
                                <div class="mb-2">
                                    <input type="text" placeholder="Search"
                                        class="w-full px-3 py-2 text-sm border rounded-lg">
                                </div>
                                <div class="space-y-2">
                                    <label class="flex items-center"><input type="checkbox" class="mr-2"><span
                                            class="text-sm">California</span></label>
                                    <label class="flex items-center"><input type="checkbox" class="mr-2"><span
                                            class="text-sm">Florida</span></label>
                                    <label class="flex items-center"><input type="checkbox" class="mr-2"><span
                                            class="text-sm">Illinois</span></label>
                                    <label class="flex items-center"><input type="checkbox" class="mr-2"><span
                                            class="text-sm">Indiana</span></label>
                                    <label class="flex items-center"><input type="checkbox" class="mr-2"><span
                                            class="text-sm">Massachusetts</span></label>
                                    <label class="flex items-center"><input type="checkbox" class="mr-2"><span
                                            class="text-sm">Missouri</span></label>
                                    <label class="flex items-center"><input type="checkbox" class="mr-2"><span
                                            class="text-sm">Montana</span></label>
                                </div>
                            </div>
                        </div>

                        <!-- Cities Filter -->
                        <div class="mb-4">
                            <button
                                class="filter-toggle w-full flex items-center justify-between p-3 text-left hover:bg-gray-50 rounded-lg"
                                data-filter="cities">
                                <span class="text-gray-700">Cities<span class="text-gray-500">(30)</span></span>
                                <i data-lucide="chevron-down" class="w-4 h-4 text-gray-500 transition-transform"></i>
                            </button>
                            <div class="filter-content hidden mt-2 p-3 bg-gray-50 rounded-lg max-h-48 overflow-y-auto"
                                data-filter="cities">
                                <div class="mb-2">
                                    <input type="text" placeholder="Search"
                                        class="w-full px-3 py-2 text-sm border rounded-lg">
                                </div>
                                <div class="space-y-2">
                                    <label class="flex items-center"><input type="checkbox" class="mr-2"><span
                                            class="text-sm">New York</span></label>
                                    <label class="flex items-center"><input type="checkbox" class="mr-2"><span
                                            class="text-sm">Los Angeles</span></label>
                                    <label class="flex items-center"><input type="checkbox" class="mr-2"><span
                                            class="text-sm">Chicago</span></label>
                                    <label class="flex items-center"><input type="checkbox" class="mr-2"><span
                                            class="text-sm">Boston</span></label>
                                </div>
                            </div>
                        </div>

                        <!-- University Filter -->
                        <div class="mb-4">
                            <button
                                class="filter-toggle w-full flex items-center justify-between p-3 text-left hover:bg-gray-50 rounded-lg"
                                data-filter="university">
                                <span class="text-gray-700">University<span class="text-gray-500">(40)</span></span>
                                <i data-lucide="chevron-down" class="w-4 h-4 text-gray-500 transition-transform"></i>
                            </button>
                            <div class="filter-content hidden mt-2 p-3 bg-gray-50 rounded-lg max-h-48 overflow-y-auto"
                                data-filter="university">
                                <div class="mb-2">
                                    <input type="text" placeholder="Search"
                                        class="w-full px-3 py-2 text-sm border rounded-lg">
                                </div>
                                <div class="space-y-2">
                                    <label class="flex items-center"><input type="checkbox" class="mr-2"><span
                                            class="text-sm">Harvard University</span></label>
                                    <label class="flex items-center"><input type="checkbox" class="mr-2"><span
                                            class="text-sm">MIT</span></label>
                                    <label class="flex items-center"><input type="checkbox" class="mr-2"><span
                                            class="text-sm">Stanford University</span></label>
                                </div>
                            </div>
                        </div>

                        <!-- School Types Filter -->
                        <div class="mb-4">
                            <button
                                class="filter-toggle w-full flex items-center justify-between p-3 text-left hover:bg-gray-50 rounded-lg"
                                data-filter="school-types">
                                <span class="text-gray-700">School Types</span>
                                <i data-lucide="chevron-down" class="w-4 h-4 text-gray-500 transition-transform"></i>
                            </button>
                            <div class="filter-content hidden mt-2 p-3 bg-gray-50 rounded-lg"
                                data-filter="school-types">
                                <div class="space-y-2">
                                    <label class="flex items-center"><input type="checkbox" class="mr-2"><span
                                            class="text-sm">Public</span></label>
                                    <label class="flex items-center"><input type="checkbox" class="mr-2"><span
                                            class="text-sm">Private</span></label>
                                    <label class="flex items-center"><input type="checkbox" class="mr-2"><span
                                            class="text-sm">Community College</span></label>
                                </div>
                            </div>
                        </div>

                        <!-- Tuition Filter -->
                        <div class="mb-6">
                            <button
                                class="filter-toggle w-full flex items-center justify-between p-3 text-left hover:bg-gray-50 rounded-lg"
                                data-filter="tuition">
                                <span class="text-gray-700">Tuition (USD)</span>
                                <i data-lucide="chevron-down" class="w-4 h-4 text-gray-500 transition-transform"></i>
                            </button>
                            <div class="filter-content hidden mt-2 p-3 bg-gray-50 rounded-lg" data-filter="tuition">
                                <div class="space-y-2">
                                    <input type="range" class="w-full" min="0" max="100000" step="1000">
                                    <div class="flex justify-between text-sm text-gray-600">
                                        <span>$0</span>
                                        <span>$100,000+</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Reset Filter -->
                        <button class="w-full px-4 py-2 text-gray-600 border rounded-xl hover:bg-gray-50">
                            Reset Filters
                        </button>
                    </div>
                </div>

                <!-- Results Section -->
                <div class="flex-1 space-y-6">

                    <!-- List View Content -->
                    <div id="listViewContainer" class="space-y-4">
                        <!-- University Table -->
                        <div class="bg-white rounded-2xl shadow-sm overflow-hidden">
                            <div class="overflow-x-auto">
                                <table class="w-full" style="min-width: 1200px;">
                                    <thead class="bg-gray-50">
                                        <tr>
                                            <th class="px-6 py-4 text-left text-sm font-semibold text-gray-800 min-w-[250px]">
                                                Scholarship & Program Name</th>
                                            <th class="px-6 py-4 text-left text-sm font-semibold text-gray-800 min-w-[150px]">
                                                Location</th>
                                            <th class="px-6 py-4 text-left text-sm font-semibold text-gray-800 min-w-[150px]">
                                                Intake</th>
                                            <th class="px-6 py-4 text-left text-sm font-semibold text-gray-800 min-w-[100px]">
                                                Duration</th>
                                            <th class="px-6 py-4 text-left text-sm font-semibold text-gray-800 min-w-[150px]">
                                                Tuition Fee</th>
                                            <th class="px-6 py-4 text-left text-sm font-semibold text-gray-800 min-w-[150px]">
                                                Award Value	</th>
                                            <th class="px-6 py-4 text-right text-sm font-semibold text-gray-800 min-w-[120px]">
                                                Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody class="divide-y divide-gray-100" id="university-table-body">
                                        <!-- University of California, Berkeley Group -->
                                        <tr class="bg-gray-100 university-group-header cursor-pointer hover:bg-red-50">
                                            <td class="px-6 py-3" colspan="7">
                                                <div class="flex items-center justify-between">
                                                    <div class="flex items-center">
                                                        <div class="flex items-center" onclick="toggleUniversityGroup('ucb', event)">
                                                            <i id="ucb-icon" data-lucide="minus"
                                                                class="w-4 h-4 mr-2 text-gray-600"></i>
                                                            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/a1/Seal_of_University_of_California%2C_Berkeley.svg/1200px-Seal_of_University_of_California%2C_Berkeley.svg.png" 
                                                                 class="w-6 h-6 mr-2 object-contain">
                                                        </div>
                                                        <span class="text-sm font-semibold text-gray-800 hover:text-red-600 cursor-pointer" onclick="showUniversityPopup('ucb', event)">University of Berkeley</span>
                                                    </div>
                                                    <div class="flex items-center space-x-2 pr-2">
                                                        <button class="p-1 text-gray-800 hover:text-red-600" title="Add to Favorites">
                                                            <i data-lucide="heart" class="w-4 h-4"></i>
                                                        </button>
                                                        <button class="p-1 text-white rounded-full p-2" style="background-color: #d82128;" title="Apply Now">
                                                            <i data-lucide="send" class="w-4 h-4"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>
                                        
                                        <!-- Program 1 - Under UCB -->
                                        <tr class="hover:bg-red-50 program-row ucb-programs">
                                            <td class="px-6 py-4">
                                                <div class="flex items-center pl-6">
                                                    <div>
                                                        <div class="flex items-center">
                                                            <span class="text-sm font-medium text-gray-900">Berkeley Undergraduate Scholarship</span>
                                                            <span class="ml-2 px-2 py-0.5 bg-red-100 text-red-800 text-xs font-medium rounded-full">Featured</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td class="px-6 py-4">
                                                <div class="flex items-center">
                                                    <i data-lucide="map-pin" class="w-4 h-4 mr-1 text-gray-500"></i>
                                                    <span class="text-sm text-gray-800">Berkeley, CA, USA</span>
                                                </div>
                                            </td>
                                            <td class="px-6 py-4 text-sm text-gray-800 whitespace-nowrap">
                                                <div class="flex flex-wrap gap-1">
                                                    <span class="px-2 py-1 bg-red-100 text-red-800 text-xs rounded-full whitespace-nowrap">Spring 2026</span>
                                                </div>
                                            </td>
                                            <td class="px-6 py-4 text-sm text-gray-800">4 years</td>
                                            <td class="px-6 py-4">
                                                <div class="text-sm font-medium text-gray-900">$15,900</div>
                                                <div class="text-xs text-gray-600">per semester</div>
                                            </td>
                                            <td class="px-6 py-4">
                                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">
                                                    Up to $15,000
                                                </span>
                                            </td>
                                            <td class="px-6 py-4 text-right">
                                                <!-- Action buttons have been removed -->
                                            </td>
                                        </tr>

                                        <!-- Program 2 - Under UCB -->
                                        <tr class="hover:bg-red-50 program-row ucb-programs">
                                            <td class="px-6 py-4">
                                                <div class="flex items-center pl-6">
                                                    <div>
                                                        <div class="text-sm font-medium text-gray-900">Haas Scholarships (Undergrad / MBA)</div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td class="px-6 py-4">
                                                <div class="flex items-center">
                                                    <i data-lucide="map-pin" class="w-4 h-4 mr-1 text-gray-500"></i>
                                                    <span class="text-sm text-gray-800">Berkeley, CA, USA</span>
                                                </div>
                                            </td>
                                            <td class="px-6 py-4 text-sm text-gray-800 whitespace-nowrap">
                                                <div class="flex flex-wrap gap-1">
                                                    <span class="px-2 py-1 bg-red-100 text-red-800 text-xs rounded-full whitespace-nowrap">Spring 2026</span>
                                                </div>
                                            </td>
                                            <td class="px-6 py-4 text-sm text-gray-600">2 years</td>
                                            <td class="px-6 py-4">
                                                <div class="text-sm font-medium text-gray-900">$60,000</div>
                                                <div class="text-xs text-gray-600">total program</div>
                                            </td>
                                            <td class="px-6 py-4">
                                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">
                                                    Up to $12,000
                                                </span>
                                            </td>
                                            <td class="px-6 py-4 text-right">
                                                <!-- Action buttons have been removed -->
                                            </td>
                                        </tr>
                                        
                                        <!-- Tiffin University Group -->
                                        <tr class="bg-gray-100 university-group-header">
                                            <td class="px-6 py-3" colspan="7">
                                                <div class="flex items-center justify-between">
                                                    <div class="flex items-center">
                                                        <div class="flex items-center" onclick="toggleUniversityGroup('tiffin', event)">
                                                            <i id="tiffin-icon" data-lucide="minus"
                                                                class="w-4 h-4 mr-2 text-gray-600"></i>
                                                        <img src="https://imgs.search.brave.com/MvKHPQEGzs5G8gqdqMvlCkFPEnhEADaHYvu2t6dENSA/rs:fit:32:32:1:0/g:ce/aHR0cDovL2Zhdmlj/b25zLnNlYXJjaC5i/cmF2ZS5jb20vaWNv/bnMvZGU1NmEwMGY3/MDU2ZTNlZWQyMjRm/MzdhMDdkZGU4MjQw/NDA4NmQ5YTg0ZjYy/NGIxMWEyMGI4NWVk/NDg5ODhjZC93d3cu/dGlmZmluLmVkdS8" 
                                                                 class="w-6 h-6 mr-2 object-contain">
                                                        </div>
                                                        <span class="text-sm font-semibold text-gray-800 hover:text-red-600 cursor-pointer" onclick="showUniversityPopup('tiffin', event)">Tiffin University</span>
                                                    </div>
                                                    <div class="flex items-center space-x-2 pr-2">
                                                        <button class="p-1 text-gray-800 hover:text-red-600" title="Add to Favorites">
                                                            <i data-lucide="heart" class="w-4 h-4"></i>
                                                        </button>
                                                        <button class="p-1 text-white rounded-full p-2" style="background-color: #d82128;" title="Apply Now">
                                                            <i data-lucide="send" class="w-4 h-4"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>
                                        
                                        <!-- Program 1 - Under Tiffin (initially hidden) -->
                                        <tr class="hover:bg-red-50 program-row tiffin-programs">
                                            <td class="px-6 py-4">
                                                <div class="flex items-center pl-6">
                                                    <div>
                                                        <div class="flex items-center">
                                                            <span class="text-sm font-medium text-gray-900">International Academic Scholarship</span>
                                                            <span class="ml-2 px-2 py-0.5 bg-red-100 text-red-800 text-xs font-medium rounded-full">Featured</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td class="px-6 py-4">
                                                <div class="flex items-center">
                                                    <i data-lucide="map-pin" class="w-4 h-4 mr-1 text-gray-500"></i>
                                                    <span class="text-sm text-gray-800">Tiffin, OH, USA</span>
                                                </div>
                                            </td>
                                            <td class="px-6 py-4 text-sm text-gray-800 whitespace-nowrap">
                                                <div class="flex flex-wrap gap-1">
                                                    <span class="px-2 py-1 bg-red-100 text-red-800 text-xs rounded-full whitespace-nowrap">Winter 2025</span>
                                                </div>
                                            </td>
                                            <td class="px-6 py-4 text-sm text-gray-800">4 years</td>
                                            <td class="px-6 py-4">
                                                <div class="text-sm font-medium text-gray-900">$12,000</div>
                                                <div class="text-xs text-gray-600">per semester</div>
                                            </td>
                                            <td class="px-6 py-4">
                                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">
                                                    Up to $5,000
                                                </span>
                                            </td>
                                        </tr>
                                        
                                        <!-- Program 2 - Under Tiffin (initially hidden) -->
                                        <tr class="hover:bg-red-50 program-row tiffin-programs">
                                            <td class="px-6 py-4">
                                                <div class="flex items-center pl-6">
                                                    <div>
                                                        <div class="text-sm font-medium text-gray-900">Green & Gold Grant</div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td class="px-6 py-4">
                                                <div class="flex items-center">
                                                    <i data-lucide="map-pin" class="w-4 h-4 mr-1 text-gray-500"></i>
                                                    <span class="text-sm text-gray-800">Tiffin, OH, USA</span>
                                                </div>
                                            </td>
                                            <td class="px-6 py-4 text-sm text-gray-800 whitespace-nowrap">
                                                <div class="flex flex-wrap gap-1">
                                                    <span class="px-2 py-1 bg-red-100 text-red-800 text-xs rounded-full whitespace-nowrap">Spring 2026</span>
                                                </div>
                                            </td>
                                            <td class="px-6 py-4 text-sm text-gray-800">4 years</td>
                                            <td class="px-6 py-4">
                                                <div class="text-sm font-medium text-gray-900">$10,000</div>
                                                <div class="text-xs text-gray-600">per semester</div>
                                            </td>
                                            <td class="px-6 py-4">
                                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">
                                                    Up to $3,000
                                                </span>
                                            </td>
                                            <td class="px-6 py-4 text-right">
                                                <!-- Action buttons have been removed -->
                                            </td>
                                        </tr>

                                        <!-- Program 3 - Under Tiffin (initially hidden) -->
                                        <tr class="hover:bg-red-50 program-row tiffin-programs">
                                            <td class="px-6 py-4">
                                                <div class="flex items-center pl-6">
                                                    <div>
                                                        <div class="text-sm font-medium text-gray-900">1888 Grant</div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td class="px-6 py-4">
                                                <div class="flex items-center">
                                                    <i data-lucide="map-pin" class="w-4 h-4 mr-1 text-gray-500"></i>
                                                    <span class="text-sm text-gray-800">Tiffin, OH, USA</span>
                                                </div>
                                            </td>
                                            <td class="px-6 py-4 text-sm text-gray-800 whitespace-nowrap">
                                                <div class="flex flex-wrap gap-1">
                                                    <span class="px-2 py-1 bg-red-100 text-red-800 text-xs rounded-full whitespace-nowrap">Winter 2025</span>
                                                </div>
                                            </td>
                                            <td class="px-6 py-4 text-sm text-gray-800">4 years</td>
                                            <td class="px-6 py-4">
                                                <div class="text-sm font-medium text-gray-900">$10,000</div>
                                                <div class="text-xs text-gray-600">per semester</div>
                                            </td>
                                            <td class="px-6 py-4">
                                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">
                                                    Up to $3,000
                                                </span>
                                            </td>
                                            <td class="px-6 py-4 text-right">
                                                <!-- Action buttons have been removed -->
                                            </td>
                                        </tr>
                                        
                                        <!-- University of Arizona Group -->
                                        <tr class="bg-gray-100 university-group-header">
                                            <td class="px-6 py-3" colspan="7">
                                                <div class="flex items-center justify-between">
                                                    <div class="flex items-center">
                                                        <div class="flex items-center" onclick="toggleUniversityGroup('arizona', event)">
                                                            <i id="arizona-icon" data-lucide="minus"
                                                                class="w-4 h-4 mr-2 text-gray-600"></i>
                                                            <img src="https://imgs.search.brave.com/7v5wHxjf3AvFxuaSkfR5sJMHz6iSmtZffXliKTeJsH8/rs:fit:500:0:1:0/g:ce/aHR0cHM6Ly9pbWFn/ZXMuZm9vdGJhbGxm/YW5hdGljcy5jb20v/YXJpem9uYS13aWxk/Y2F0cy9hcml6b25h/LXdpbGRjYXRzLTI0/LXJvdW5kLWhlcml0/YWdlLWxvZ28tc2ln/bl9waTQwOTUwMDBf/ZmZfNDA5NTc4MS1i/NDg4NGQ0Y2Y2MjM1/YTE0MDk0M19mdWxs/LmpwZz9faHY9MiZ3/PTQwMA" 
                                                                 class="w-6 h-6 mr-2 object-contain">
                                                        </div>
                                                        <span class="text-sm font-semibold text-gray-800 hover:text-red-600 cursor-pointer" onclick="showUniversityPopup('arizona', event)">University of Arizona</span>
                                                    </div>
                                                    <div class="flex items-center space-x-2 pr-2">
                                                        <button class="p-1 text-gray-800 hover:text-red-600" title="Add to Favorites">
                                                            <i data-lucide="heart" class="w-4 h-4"></i>
                                                        </button>
                                                        <button class="p-1 text-white rounded-full p-2" style="background-color: #d82128;" title="Apply Now">
                                                            <i data-lucide="send" class="w-4 h-4"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>
                                        
                                        <!-- Program 1 - Under Arizona (initially hidden) -->
                                        <tr class="hover:bg-red-50 program-row arizona-programs">
                                            <td class="px-6 py-4">
                                                <div class="flex items-center pl-6">
                                                    <div>
                                                        <div class="text-sm font-medium text-gray-900">1+3 Program</div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td class="px-6 py-4">
                                                <div class="flex items-center">
                                                    <i data-lucide="map-pin" class="w-4 h-4 mr-1 text-gray-500"></i>
                                                    <span class="text-sm text-gray-800">Tucson, AZ, USA</span>
                                                </div>
                                            </td>
                                            <td class="px-6 py-4 text-sm text-gray-800 whitespace-nowrap">
                                                <div class="flex flex-wrap gap-1">
                                                    <span class="px-2 py-1 bg-red-100 text-red-800 text-xs rounded-full whitespace-nowrap">Winter 2025</span>
                                                </div>
                                            </td>
                                            <td class="px-6 py-4 text-sm text-gray-800">4 years</td>
                                            <td class="px-6 py-4">
                                                <div class="text-sm font-medium text-gray-900">$35,000</div>
                                                <div class="text-xs text-gray-600">per year</div>
                                            </td>
                                            <td class="px-6 py-4">
                                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">
                                                    Up to $10,000
                                                </span>
                                            </td>
                                            <td class="px-6 py-4 text-right">
                                                <!-- Action buttons have been removed -->
                                            </td>
                                        </tr>

                                        <!-- Program 2 - Under Arizona (initially hidden) -->
                                        <tr class="hover:bg-red-50 program-row arizona-programs">
                                            <td class="px-6 py-4">
                                                <div class="flex items-center pl-6">
                                                    <div>
                                                        <div class="text-sm font-medium text-gray-900">Joint MBA Program</div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td class="px-6 py-4">
                                                <div class="flex items-center">
                                                    <i data-lucide="map-pin" class="w-4 h-4 mr-1 text-gray-500"></i>
                                                    <span class="text-sm text-gray-800">Phoenix, AZ, USA</span>
                                                </div>
                                            </td>
                                            <td class="px-6 py-4 text-sm text-gray-800 whitespace-nowrap">
                                                <div class="flex flex-wrap gap-1">
                                                    <span class="px-2 py-1 bg-red-100 text-red-800 text-xs rounded-full whitespace-nowrap">Fall 2025</span>
                                                </div>
                                            </td>
                                            <td class="px-6 py-4 text-sm text-gray-800">4 years</td>
                                            <td class="px-6 py-4">
                                                <div class="text-sm font-medium text-gray-900">$12,000</div>
                                                <div class="text-xs text-gray-600">per semester</div>
                                            </td>
                                            <td class="px-6 py-4">
                                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">
                                                    Up to $8,000
                                                </span>
                                            </td>
                                            <td class="px-6 py-4 text-right">
                                                <!-- Action buttons have been removed -->
                                            </td>
                                        </tr>

                                        <!-- University of Angelo State Group -->
                                        <tr class="bg-gray-100 university-group-header">
                                            <td class="px-6 py-3" colspan="7">
                                                <div class="flex items-center justify-between">
                                                    <div class="flex items-center">
                                                        <div class="flex items-center" onclick="toggleUniversityGroup('angelo', event)">
                                                            <i id="angelo-icon" data-lucide="minus"
                                                                class="w-4 h-4 mr-2 text-gray-600"></i>
                                                            <img src="https://imgs.search.brave.com/0hWMuoaUWNAyGWv5n6H4tzAYFH3X_pleytwTvgVAKAg/rs:fit:32:32:1:0/g:ce/aHR0cDovL2Zhdmlj/b25zLnNlYXJjaC5i/cmF2ZS5jb20vaWNv/bnMvNGY2ZWY4MWJh/MzM3MmNlYWM5ZGEw/MDMyZmRmZjBhZWYy/NDNlYWYyNjc1NmUz/YmNiNThjZDk2MTg0/NjcxOTE1Yy93d3cu/YW5nZWxvLmVkdS8" 
                                                                 class="w-6 h-6 mr-2 object-contain">
                                                        </div>
                                                        <span class="text-sm font-semibold text-gray-800 hover:text-red-600 cursor-pointer" onclick="showUniversityPopup('angelo', event)">Angelo State University</span>
                                                    </div>
                                                    <div class="flex items-center space-x-2 pr-2">
                                                        <button class="p-1 text-gray-800 hover:text-red-600" title="Add to Favorites">
                                                            <i data-lucide="heart" class="w-4 h-4"></i>
                                                        </button>
                                                        <button class="p-1 text-white rounded-full p-2" style="background-color: #d82128;" title="Apply Now">
                                                            <i data-lucide="send" class="w-4 h-4"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>

                                        <!-- Program 1 - Under Angelo State (initially hidden) -->
                                        <tr class="hover:bg-red-50 program-row arizona-programs">
                                            <td class="px-6 py-4">
                                                <div class="flex items-center pl-6">
                                                    <div>
                                                        <div class="text-sm font-medium text-gray-900">2+2 Program</div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td class="px-6 py-4">
                                                <div class="flex items-center">
                                                    <i data-lucide="map-pin" class="w-4 h-4 mr-1 text-gray-500"></i>
                                                    <span class="text-sm text-gray-800"> San Angelo, TX, USA</span>
                                                </div>
                                            </td>
                                            <td class="px-6 py-4 text-sm text-gray-800 whitespace-nowrap">
                                                <div class="flex flex-wrap gap-1">
                                                    <span class="px-2 py-1 bg-red-100 text-red-800 text-xs rounded-full whitespace-nowrap">Fall 2025</span>
                                                </div>
                                            </td>
                                            <td class="px-6 py-4 text-sm text-gray-800">4 years</td>
                                            <td class="px-6 py-4">
                                                <div class="text-sm font-medium text-gray-900">$12,000</div>
                                                <div class="text-xs text-gray-600">per semester</div>
                                            </td>
                                            <td class="px-6 py-4">
                                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">
                                                    Up to $8,000
                                                </span>
                                            </td>
                                            <td class="px-6 py-4 text-right">
                                                <!-- Action buttons have been removed -->
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- Card View Content -->
                    <div class="space-y-6">
                        <!-- Program Card 1 -->
                        <div class="bg-white rounded-3xl shadow-md p-6 hover:shadow-lg transition-shadow program-card">
                            <div class="flex items-start mb-4">
                                <!-- Institution Logo -->
                                <div
                                    class="w-36 h-36 bg-gray-200 rounded-xl flex items-center justify-center mr-4 flex-shrink-0">
                                    <img src="https://images.unsplash.com/photo-1523580494863-6f3031224c94?w=144&h=144&fit=crop"
                                        alt="University of Berkeley" class="w-32 h-32 rounded-lg object-cover">
                                </div>

                                <div class="flex-1">
                                    <!-- School Name (Clickable) -->
                                    <h2 class="text-xl font-bold mb-2 flex justify-between">
                                        <button
                                            class="school-name-btn text-gray-900 hover:text-red-600 hover:underline cursor-pointer transition-colors"
                                            data-school="university-of-california-berkeley">
                                            University of Berkeley
                                        </button>
                                        <p class="text-lg font-semibold mb-4">(Mockup for incomplete profile)</p>
                                    </h2>

                                    <!-- Institution Type Tags -->
                                    <div class="flex flex-wrap gap-2 mb-2">
                                        <span
                                            class="px-2 py-1 bg-blue-100 text-blue-600 rounded text-xs font-medium">World
                                            Top 5</span>
                                        <span
                                            class="px-2 py-1 bg-green-100 text-green-600 rounded text-xs font-medium">Russell
                                            Group</span>
                                        <span
                                            class="px-2 py-1 bg-purple-100 text-purple-600 rounded text-xs font-medium">Research
                                            Intensive</span>
                                    </div>

                                    <!-- Program Duration -->
                                    <p class="text-sm text-gray-500 mb-1">Duration: 1 year</p>

                                    <!-- Scholarship Name Dropdowns -->
                                    <div class="flex flex-wrap gap-4 mb-3">
                                        <!-- Scholarship Name Dropdown -->
                                        <div class="flex-1 max-w-[200px]">
                                            <label class="text-sm text-gray-600 mb-1 block">Scholarship Name</label>
                                            <div class="relative">
                                                <select
                                                    class="appearance-none bg-white border border-gray-300 rounded-lg px-3 py-2 pr-8 text-sm focus:outline-none focus:ring-2 focus:ring-red-500 w-full">
                                                    <option value="rhodes" selected>Berkeley Undergraduate Scholarship</option>
                                                    <option value="chevening">Haas Scholarships (Undergrad / MBA)</option>
                                                </select>
                                                <i data-lucide="chevron-down"
                                                    class="absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none"></i>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Intake Period Dropdown -->
                                    <div class="flex items-center gap-4 mb-4">
                                        <div class="relative">
                                            <select
                                                class="appearance-none bg-gray-50 border rounded-lg px-3 py-2 pr-8 text-sm focus:outline-none focus:ring-2 focus:ring-red-500">
                                                <option value="winter-2025">Winter 2025</option>
                                                <option value="spring-2026">Spring 2026</option>
                                            </select>
                                            <i data-lucide="chevron-down"
                                                class="absolute right-2 top-2.5 w-4 h-4 text-gray-500"></i>
                                        </div>

                                        <!-- Action Buttons -->
                                        <div class="flex items-center gap-3">
                                            <button
                                                class="text-red-600 hover:text-red-700 flex items-center text-sm font-medium">
                                                <i data-lucide="heart" class="w-4 h-4 mr-1"></i>
                                                Add to Favorites
                                            </button>
                                            <button class="text-white px-4 py-2 rounded-lg text-sm font-medium"
                                                style="background-color: #d82128;"
                                                onmouseover="this.style.backgroundColor='#d82128'"
                                                onmouseout="this.style.backgroundColor='#d82128'">
                                                Apply Now
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Scholarship Section -->
                            <div class="border-t pt-4">
                                <div class="flex border-b mb-4">
                                    <button
                                        class="tab-btn px-4 py-2 text-sm font-medium text-red-600 border-b-2 border-red-600"
                                        data-tab="fees" data-card="3">Fees</button>
                                    <button
                                        class="tab-btn px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-700"
                                        data-tab="requirements" data-card="3">Requirements</button>
                                    <button
                                        class="tab-btn px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-700"
                                        data-tab="course-detail" data-card="3">Course Detail</button>
                                </div>

                                <!-- Fees Tab Content -->
                                <div class="tab-content" data-tab="fees" data-card="3" id="feesContent3">
                                    <div class="space-y-6 text-center py-8">
                                        <p class="text-gray-600 mb-6">To view details, please complete all the required
                                            fields in the profile.</p>
                                        <a href="Student-profile.html" target="_blank"
                                            class="inline-flex items-center px-6 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500">
                                            Go to your profile
                                        </a>
                                    </div>
                                </div>

                                <!-- Requirements Tab Content -->
                                <div class="tab-content hidden" data-tab="requirements" data-card="3"
                                    id="requirementsContent3">
                                    <div class="space-y-6 text-center py-8">
                                        <p class="text-gray-600 mb-6">To view details, please complete all the required
                                            fields in the profile.</p>
                                        <a href="Student-profile.html" target="_blank"
                                            class="inline-flex items-center px-6 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500">
                                            Go to your profile
                                        </a>
                                    </div>
                                </div>

                                <!-- Course Detail Tab Content -->
                                <div class="tab-content hidden" data-tab="course-detail" data-card="3"
                                    id="courseDetailContent3">
                                    <div class="space-y-6 text-center py-8">
                                        <p class="text-gray-600 mb-6">To view details, please complete all the required
                                            fields in the profile.</p>
                                        <a href="Student-profile.html" target="_blank"
                                            class="inline-flex items-center px-6 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500">
                                            Go to your profile
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Program Card 2 -->
                        <div class="bg-white rounded-3xl shadow-md p-6 hover:shadow-lg transition-shadow program-card">
                            <div class="flex items-start mb-4">
                                <!-- Institution Logo -->
                                <div
                                    class="w-36 h-36 bg-gray-200 rounded-xl flex items-center justify-center mr-4 flex-shrink-0">
                                    <img src="https://images.unsplash.com/photo-1607237138185-eedd9c632b0b?w=144&h=144&fit=crop"
                                        alt="University Logo" class="w-32 h-32 rounded-lg object-cover">
                                </div>

                                <div class="flex-1">
                                    <!-- School Name (Clickable) -->
                                    <h2 class="text-xl font-bold mb-2 flex justify-between">
                                        <button
                                            class="school-name-btn text-gray-900 hover:text-red-600 hover:underline cursor-pointer transition-colors"
                                            data-school="tiffin-university">
                                            Tiffin University
                                        </button>
                                        <p class="text-lg font-semibold mb-4">(Mockup for complete profile)</p>
                                    </h2>

                                    <!-- Institution Type Tags -->
                                    <div class="flex flex-wrap gap-2 mb-2">
                                        <span class="px-2 py-1 bg-blue-100 text-blue-600 rounded text-xs font-medium">US
                                            University</span>
                                        <span
                                            class="px-2 py-1 bg-purple-100 text-purple-600 rounded text-xs font-medium">Private
                                            University</span>
                                    </div>

                                    <!-- Program Duration -->
                                    <p class="text-sm text-gray-500 mb-1">Duration: 4 years</p>

                                    <!-- Scholarship Name Dropdowns -->
                                    <div class="flex flex-wrap gap-4 mb-3">
                                        <!-- Scholarship Name Dropdown -->
                                        <div class="flex-1 max-w-[200px]">
                                            <label class="text-sm text-gray-600 mb-1 block">Scholarship Name</label>
                                            <div class="relative">
                                                <select
                                                    class="appearance-none bg-white border border-gray-300 rounded-lg px-3 py-2 pr-8 text-sm focus:outline-none focus:ring-2 focus:ring-red-500 w-full">
                                                    <option value="rhodes" selected>International Academic Scholarship</option>
                                                    <option value="chevening">Green & Gold Grant</option>
                                                </select>
                                                <i data-lucide="chevron-down"
                                                    class="absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none"></i>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Intake Period Dropdown -->
                                    <div class="flex items-center gap-4 mb-4">
                                        <div class="relative">
                                            <select
                                                class="appearance-none bg-gray-50 border rounded-lg px-3 py-2 pr-8 text-sm focus:outline-none focus:ring-2 focus:ring-red-500">
                                                <option value="spring-2026">Spring 2026</option>
                                                <option value="summer-2026">Summer 2026</option>
                                            </select>
                                            <i data-lucide="chevron-down"
                                                class="absolute right-2 top-2.5 w-4 h-4 text-gray-500"></i>
                                        </div>

                                        <!-- Action Buttons -->
                                        <div class="flex items-center gap-3">
                                            <button
                                                class="text-red-600 hover:text-red-700 flex items-center text-sm font-medium">
                                                <i data-lucide="heart" class="w-4 h-4 mr-1"></i>
                                                Add to Favorites
                                            </button>
                                            <a href="Student-application-form.html?program=MSc%20in%20Computer%20Science&university=University%20of%20Toronto"
                                                target="_blank"
                                                class="inline-block text-white px-4 py-2 rounded-lg text-sm font-medium"
                                                style="background-color: #d82128;"
                                                onmouseover="this.style.backgroundColor='#d82128'"
                                                onmouseout="this.style.backgroundColor='#d82128'">
                                                Apply Now
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Tabbed Information Section -->
                            <div class="border-t pt-4">
                                <div class="flex border-b mb-4">
                                    <button
                                        class="tab-btn px-4 py-2 text-sm font-medium text-red-600 border-b-2 border-red-600"
                                        data-tab="fees" data-card="2">Fees</button>
                                    <button
                                        class="tab-btn px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-700"
                                        data-tab="requirements" data-card="2">Requirements</button>
                                    <button
                                        class="tab-btn px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-700"
                                        data-tab="course-detail" data-card="2">Course Detail</button>
                                </div>

                                <!-- Fees Tab Content -->
                                <div class="tab-content" data-tab="fees" data-card="2">
                                    <div class="space-y-4">
                                        <div class="flex justify-between items-center">
                                            <span class="text-gray-600">Application Fee</span>
                                            <span class="font-semibold" id="applicationFee2">$100</span>
                                        </div>
                                        <div class="flex justify-between items-center">
                                            <span class="text-gray-600">Tuition (per year)</span>
                                            <span class="font-semibold" id="tuitionFee2">$25,000 - $30,000</span>
                                        </div>
                                        <div class="flex justify-between items-center">
                                            <span class="text-gray-600">Books & Supplies</span>
                                            <span class="font-semibold" id="booksSupplies2">$800</span>
                                        </div>
                                        <hr class="my-4">
                                        <div class="flex justify-between items-center text-red-600">
                                            <span>Scholarship up to $30,000</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- Requirements Tab Content -->
                                <div class="tab-content hidden" data-tab="requirements" data-card="2">
                                    <div class="space-y-4">
                                        <div class="bg-white rounded-lg p-4 border">
                                            <h4 class="font-semibold mb-2 text-black">Academic Requirements</h4>
                                            <ul class="list-disc list-inside text-sm text-gray-700 space-y-1"
                                                id="academicRequirements2">
                                                <li>Minimum GPA of 3.7/4.0 or equivalent</li>
                                                <li>Bachelor's degree in relevant field</li>
                                                <li>Academic excellence demonstrated through transcripts</li>
                                                <li>Dean's list or honor roll recognition preferred</li>
                                            </ul>
                                        </div>
                                        <div class="bg-white rounded-lg p-4 border">
                                            <h4 class="font-semibold mb-2 text-black">Language Requirements</h4>
                                            <ul class="list-disc list-inside text-sm text-gray-700 space-y-1"
                                                id="languageRequirements2">
                                                <li>IELTS: 7.0 overall (no band below 6.5)</li>
                                                <li>TOEFL iBT: 100 overall</li>
                                                <li>Duolingo: 125 overall</li>
                                            </ul>
                                        </div>
                                        <div class="bg-white rounded-lg p-4 border">
                                            <h4 class="font-semibold mb-2 text-black">Required Documents</h4>
                                            <ul class="list-disc list-inside text-sm text-gray-700 space-y-1"
                                                id="requiredDocuments2">
                                                <li>Academic transcripts with grade verification</li>
                                                <li>Two academic letters of recommendation</li>
                                                <li>Personal statement highlighting achievements</li>
                                                <li>Portfolio of academic work (if applicable)</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>

                                <!-- Course Detail Tab Content -->
                                <div class="tab-content hidden" data-tab="course-detail" data-card="2">
                                    <div class="space-y-4">
                                        <div>
                                            <h4 class="font-semibold mb-2">Scholarship Overview</h4>
                                            <p class="text-gray-600 text-sm leading-relaxed" id="programOverview2">
                                                Merit-based scholarship program designed for academically outstanding
                                                students who have demonstrated exceptional performance in their
                                                undergraduate studies.
                                            </p>
                                        </div>
                                        <div>
                                            <h4 class="font-semibold mb-2">Core Courses</h4>
                                            <ul class="list-disc list-inside text-sm text-gray-600 space-y-1"
                                                id="coreCourses2">
                                                <li>Advanced Research Methodologies</li>
                                                <li>Leadership in Academic Excellence</li>
                                                <li>Scholarly Communication</li>
                                                <li>Independent Study Project</li>
                                            </ul>
                                        </div>
                                        <div>
                                            <p class="text-sm text-gray-500">Duration</p>
                                            <p class="font-semibold" id="programDuration2">2 years full-time</p>
                                        </div>
                                        <div>
                                            <p class="text-sm text-gray-500">Semester breakdown</p>
                                            <p class="font-semibold" id="semesterBreakdown2">4 semesters over 2 years
                                            </p>
                                        </div>
                                        <div>
                                            <p class="text-sm text-gray-500">Specialization tracks</p>
                                            <p class="font-semibold" id="specializationTracks2">Research Focus, Academic
                                                Leadership, Scholarly Publications</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- JavaScript for page functionality -->

    <!-- Program Details Modal (Hidden by default) -->
    <div id="programModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white rounded-3xl p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-start mb-6">
                <div>
                    <h2 class="text-2xl font-semibold" id="modalProgramName">MSc in Data Science</h2>
                    <p class="text-gray-600" id="modalUniversityName">University of British Columbia</p>
                    <div class="flex items-center mt-2">
                        <i data-lucide="map-pin" class="w-4 h-4 text-gray-500 mr-1"></i>
                        <span class="text-sm text-gray-600" id="modalLocation">Vancouver, Canada</span>
                    </div>
                </div>
                <button id="closeModal" class="text-gray-500 hover:text-gray-700">
                    <i data-lucide="x" class="w-6 h-6"></i>
                </button>
            </div>

            <!-- Modal Content Grid -->
            <div class="grid md:grid-cols-2 gap-6 mb-6">
                <!-- Institution Details -->
                <div class="bg-blue-50 rounded-2xl p-4">
                    <h4 class="font-semibold mb-3 text-blue-800">Institution Details</h4>
                    <div class="space-y-2 text-sm">
                        <div class="flex justify-between">
                            <span class="text-gray-600">School ID:</span>
                            <span id="modalSchoolId">UBC-001</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Year Founded:</span>
                            <span id="modalYearFounded">1908</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Institution Type:</span>
                            <span id="modalInstitutionType">Public</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Duration:</span>
                            <span id="modalDuration">2 Years</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Level:</span>
                            <span id="modalLevel">Master's</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Intake:</span>
                            <span id="modalIntake">Fall 2025</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Language:</span>
                            <span id="modalLanguage">English</span>
                        </div>
                    </div>
                </div>

                <!-- Cost and Tuition -->
                <div class="bg-green-50 rounded-2xl p-4">
                    <h4 class="font-semibold mb-3 text-green-800">Cost and Tuition</h4>
                    <div class="space-y-2 text-sm">
                        <div class="flex justify-between">
                            <span class="text-gray-600">Application Fee:</span>
                            <span id="modalAppFee">$150</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Program Length:</span>
                            <span id="modalProgramLength">24 months</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Cost of Living:</span>
                            <span id="modalCostOfLiving">$15,000/year</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Gross Tuition:</span>
                            <span class="font-semibold" id="modalTuition">$35,000 - $40,000</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Deadline:</span>
                            <span class="text-red-600" id="modalDeadline">March 15, 2025</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Scholarship Program Offer -->
            <div class="bg-yellow-50 rounded-2xl p-4 mb-6">
                <h4 class="font-semibold mb-3 text-yellow-800">Scholarship Program Offer</h4>
                <div class="grid md:grid-cols-2 gap-4">
                    <div>
                        <div class="flex justify-between mb-2">
                            <span class="text-gray-600">Amount Offered:</span>
                            <span class="font-semibold text-green-600" id="modalScholarshipAmount">$10,000</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Coverage:</span>
                            <span id="modalScholarshipCoverage">Partial Tuition</span>
                        </div>
                    </div>
                    <div>
                        <h5 class="font-medium mb-2">Summary about the scholarship program</h5>
                        <p class="text-sm text-gray-600" id="modalScholarshipSummary">
                            Merit-based scholarship for international students with excellent academic records.
                            Renewable for the duration of the program based on maintaining GPA requirements.
                        </p>
                    </div>
                </div>
            </div>

            <!-- Summary about the schools -->
            <div class="bg-purple-50 rounded-2xl p-4 mb-6">
                <h4 class="font-semibold mb-3 text-purple-800">Summary about the schools</h4>
                <p class="text-sm text-gray-600" id="modalSchoolSummary">
                    The University of British Columbia is a globally recognized research university located in
                    Vancouver, Canada. Known for its strong programs in technology, business, and sciences, UBC
                    consistently ranks among the top 40 universities worldwide. The campus offers state-of-the-art
                    facilities, diverse student community, and excellent career support services.
                </p>
            </div>

            <div class="space-y-6">
                <!-- Full Program Description -->
                <div>
                    <h3 class="text-lg font-semibold mb-3">Scholarship Overview</h3>
                    <p class="text-gray-600" id="modalDescription">
                        The Master of Science in Data Science program at UBC provides students with comprehensive
                        training in data science methodologies, statistical analysis, machine learning algorithms, and
                        big data technologies. This program is designed for students who want to develop expertise in
                        extracting insights from complex datasets and applying data-driven solutions to real-world
                        problems.
                    </p>
                </div>

                <!-- Admission Requirements -->
                <div>
                    <h3 class="text-lg font-semibold mb-3">Admission Requirements</h3>
                    <div class="bg-blue-50 rounded-xl p-4">
                        <ul class="list-disc list-inside text-gray-700 space-y-2" id="modalRequirements">
                            <li>Bachelor's degree in Computer Science, Mathematics, Statistics, or related field</li>
                            <li>Minimum GPA of 3.0/4.0 or equivalent</li>
                            <li>IELTS score of 6.5 (no band below 6.0) or TOEFL iBT 90</li>
                            <li>Two academic letters of recommendation</li>
                            <li>Statement of Purpose (500-1000 words)</li>
                            <li>Resume/CV highlighting relevant experience</li>
                            <li>Programming experience in Python, R, or similar languages (preferred)</li>
                        </ul>
                    </div>
                </div>

                <!-- Course Structure -->
                <div>
                    <h3 class="text-lg font-semibold mb-3">Course Structure</h3>
                    <div class="grid md:grid-cols-2 gap-4">
                        <div class="border rounded-xl p-4">
                            <h4 class="font-medium mb-2">Core Courses</h4>
                            <ul class="list-disc list-inside text-gray-600 text-sm space-y-1" id="modalCoreCourses">
                                <li>Statistical Methods for Data Science</li>
                                <li>Machine Learning Fundamentals</li>
                                <li>Big Data Analytics</li>
                                <li>Data Visualization and Communication</li>
                                <li>Research Methods in Data Science</li>
                            </ul>
                        </div>
                        <div class="border rounded-xl p-4">
                            <h4 class="font-medium mb-2">Elective Options</h4>
                            <ul class="list-disc list-inside text-gray-600 text-sm space-y-1" id="modalElectives">
                                <li>Deep Learning and Neural Networks</li>
                                <li>Natural Language Processing</li>
                                <li>Computer Vision</li>
                                <li>Business Analytics</li>
                                <li>Capstone Project</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Career Prospects -->
                <div>
                    <h3 class="text-lg font-semibold mb-3">Career Prospects</h3>
                    <div class="flex flex-wrap gap-2" id="modalCareers">
                        <span class="px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm">Data Scientist</span>
                        <span class="px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm">Machine Learning
                            Engineer</span>
                        <span class="px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm">Business Analyst</span>
                        <span class="px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm">Research
                            Scientist</span>
                        <span class="px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm">Data Engineer</span>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="flex justify-between items-center pt-6 border-t">
                    <a href="#" id="modalOfficialLink" class="hover:underline flex items-center hover:opacity-80"
                        style="color: #d82128;">
                        <i data-lucide="external-link" class="w-4 h-4 mr-1"></i>
                        Visit Official Website
                    </a>
                    <div class="flex space-x-3">
                        <button class="px-4 py-2 border rounded-xl hover:bg-red-50"
                            style="border-color: #d82128; color: #d82128;">
                            Save Program
                        </button>
                        <button class="text-sm font-medium hover:opacity-80" style="color: #d82128;">Apply Now</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Initialize Lucide Icons
        lucide.createIcons({ icons: lucide.icons });

        // Ensure card view is always visible
        document.addEventListener('DOMContentLoaded', function () {
            const cardViewContainer = document.querySelector('.grid.grid-cols-1.md\:grid-cols-2.lg\:grid-cols-3.gap-6');
            if (cardViewContainer) {
                cardViewContainer.style.display = 'block';
            }

            // Initialize tab functionality
            const tabs = document.querySelectorAll('.tab-button');
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabId = tab.getAttribute('data-tab');
                    toggleTabs(tabId);
                });
            });
        });

        // Tab functionality
        function toggleTabs(tabId) {
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.add('hidden');
            });

            // Remove active class from all tabs
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('bg-red-600', 'text-white');
                btn.classList.add('bg-gray-200', 'text-gray-600');
            });

            // Show selected tab content and update active tab
            const activeTab = document.getElementById(tabId);
            const activeTabButton = document.querySelector(`[data-tab="${tabId}"]`);

            if (activeTab && activeTabButton) {
                activeTab.classList.remove('hidden');
                activeTabButton.classList.remove('bg-gray-200', 'text-gray-600');
                activeTabButton.classList.add('bg-red-600', 'text-white');
            }
        }

        // Initialize with scholarships tab active by default
        document.addEventListener('DOMContentLoaded', function () {
            toggleTabs('scholarships');
        });

        // Function to get URL parameters
        function getUrlParameter(name) {
            name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
            var regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
            var results = regex.exec(location.search);
            return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
        }

        // Profile dropdown functionality
        document.addEventListener('DOMContentLoaded', function () {
            const profileButton = document.getElementById('profileButton');
            const profileDropdown = document.getElementById('profileDropdown');

            if (profileButton && profileDropdown) {
                profileButton.addEventListener('click', function () {
                    profileDropdown.classList.toggle('hidden');
                });

                // Close dropdown when clicking outside
                document.addEventListener('click', function (event) {
                    if (!profileButton.contains(event.target) && !profileDropdown.contains(event.target)) {
                        profileDropdown.classList.add('hidden');
                    }
                });

                // Close dropdown when clicking on a menu item
                profileDropdown.querySelectorAll('a').forEach(link => {
                    link.addEventListener('click', function () {
                        profileDropdown.classList.add('hidden');
                    });
                });
            }

            // University of Berkeley Modal functionality
            const berkeleyModal = document.getElementById('berkeleyModal');
            const closeBerkeleyModal = document.getElementById('closeBerkeleyModal');
            const schoolNameButtons = document.querySelectorAll('.school-name-btn');

            // University of Toronto Modal
            const torontoModal = document.getElementById('schoolModalToronto');
            const closeTorontoModalBtn = document.getElementById('closeTorontoModal');

            // Handle school name clicks
            document.querySelectorAll('.school-name-btn').forEach(button => {
                button.addEventListener('click', function () {
                    const school = this.getAttribute('data-school');
                    if (school === 'tiffin-university') {
                        torontoModal.classList.remove('hidden');
                        document.body.style.overflow = 'hidden';
                    } else if (school === 'berkeley-city-college') {
                        berkeleyModal.classList.remove('hidden');
                        document.body.style.overflow = 'hidden';
                    }
                });
            });

            // Close Toronto Modal
            if (closeTorontoModalBtn) {
                closeTorontoModalBtn.addEventListener('click', function () {
                    torontoModal.classList.add('hidden');
                    document.body.style.overflow = '';
                });
            }

            // Close Toronto Modal when clicking outside
            torontoModal.addEventListener('click', function (e) {
                if (e.target === torontoModal) {
                    torontoModal.classList.add('hidden');
                    document.body.style.overflow = '';
                }
            });

            // Toronto Tab Functionality
            const torontoTabButtons = document.querySelectorAll('.toronto-tab-btn');
            torontoTabButtons.forEach(button => {
                button.addEventListener('click', function () {
                    const tabId = this.getAttribute('data-tab');

                    // Update active tab
                    torontoTabButtons.forEach(btn => {
                        btn.classList.remove('border-red-600', 'text-red-600');
                        btn.classList.add('text-gray-500', 'hover:text-gray-700');
                    });
                    this.classList.add('border-red-600', 'text-red-600');
                    this.classList.remove('text-gray-500', 'hover:text-gray-700');

                    // Show corresponding tab content
                    document.querySelectorAll('.toronto-tab-content').forEach(content => {
                        content.classList.add('hidden');
                    });
                    document.getElementById(`toronto-${tabId}-tab`).classList.remove('hidden');
                });
            });
            const schoolNameBtns = document.querySelectorAll('.school-name-btn');
            const schoolTabBtns = document.querySelectorAll('.school-tab-btn');
            const schoolTabContents = document.querySelectorAll('.school-tab-content');

            console.log('School modal element:', schoolModal);
            console.log('Close button:', closeSchoolModalBtn);
            console.log('School name buttons found:', schoolNameBtns.length);

            // Handle school name clicks
            schoolNameBtns.forEach(btn => {
                btn.addEventListener('click', function (e) {
                    e.preventDefault();
                    console.log('School name clicked!');
                    const schoolId = btn.getAttribute('data-school');
                    console.log('School ID:', schoolId);

                    // Show school modal
                    if (schoolModal) {
                        console.log('Opening school modal');
                        schoolModal.classList.remove('hidden');

                        // Reset to overview tab
                        showSchoolTab('overview');

                        lucide.createIcons();
                    } else {
                        console.error('School modal not found');
                    }
                });
            });

            // Handle school tab switching
            schoolTabBtns.forEach(btn => {
                btn.addEventListener('click', function () {
                    const tabId = btn.getAttribute('data-tab');
                    showSchoolTab(tabId);
                });
            });

            function showSchoolTab(tabId) {
                // Remove active state from all tabs
                schoolTabBtns.forEach(tab => {
                    tab.classList.remove('border-b-2', 'border-red-600', 'text-red-600');
                    tab.classList.add('text-gray-500');
                });

                // Add active state to clicked tab
                const activeTab = document.querySelector(`[data-tab="${tabId}"].school-tab-btn`);
                if (activeTab) {
                    activeTab.classList.add('border-b-2', 'border-red-600', 'text-red-600');
                    activeTab.classList.remove('text-gray-500');
                }

                // Hide all tab contents
                schoolTabContents.forEach(content => {
                    content.classList.add('hidden');
                });

                // Show selected tab content
                const activeContent = document.getElementById(`${tabId}-tab`);
                if (activeContent) {
                    activeContent.classList.remove('hidden');
                }
            }

            // Close school modal
            if (closeSchoolModalBtn) {
                closeSchoolModalBtn.addEventListener('click', function () {
                    schoolModal.classList.add('hidden');
                    document.body.style.overflow = ''; // Reset overflow when modal is closed
                });
            }

            // Close school modal when clicking outside
            if (schoolModal) {
                schoolModal.addEventListener('click', function (e) {
                    if (e.target === schoolModal) {
                        schoolModal.classList.add('hidden');
                        document.body.style.overflow = ''; // Reset overflow when clicking outside
                    }
                });
            }

            // Close school modal with Escape key
            document.addEventListener('keydown', function (e) {
                if (e.key === 'Escape' && schoolModal && !schoolModal.classList.contains('hidden')) {
                    schoolModal.classList.add('hidden');
                }
            });
        });

        // Handle logout
        function handleLogout() {
            window.location.href = '../../login.html';
        }
    </script>

    <script>
        // Initialize Lucide Icons
        lucide.createIcons({ icons: lucide.icons });

        // Ensure card view is always visible
        document.addEventListener('DOMContentLoaded', function () {
            const cardViewContainer = document.querySelector('.grid.grid-cols-1.md\\:grid-cols-2.lg\\:grid-cols-3.gap-6');
            if (cardViewContainer) {
                cardViewContainer.style.display = 'block';
            }

            // Initialize tab functionality
            const tabs = document.querySelectorAll('.tab-button');
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabId = tab.getAttribute('data-tab');
                    toggleTabs(tabId);
                });
            });
        });

        // Tab functionality
        function toggleTabs(tabId) {
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.add('hidden');
            });

            // Remove active class from all tabs
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('bg-red-600', 'text-white');
                btn.classList.add('bg-gray-200', 'text-gray-600');
            });

            // Show selected tab content and update active tab
            const activeTab = document.getElementById(tabId);
            const activeTabButton = document.querySelector(`[data-tab="${tabId}"]`);

            if (activeTab && activeTabButton) {
                activeTab.classList.remove('hidden');
                activeTabButton.classList.remove('bg-gray-200', 'text-gray-600');
                activeTabButton.classList.add('bg-red-600', 'text-white');
            }
        }

        // Initialize with scholarships tab active by default
        document.addEventListener('DOMContentLoaded', function () {
            toggleTabs('scholarships');
        });

        // Function to get URL parameters
        function getUrlParameter(name) {
            name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
            var regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
            var results = regex.exec(location.search);
            return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
        }

        // Profile dropdown functionality
        document.addEventListener('DOMContentLoaded', function () {
            const profileButton = document.getElementById('profileButton');
            const profileDropdown = document.getElementById('profileDropdown');

            if (profileButton && profileDropdown) {
                profileButton.addEventListener('click', function () {
                    profileDropdown.classList.toggle('hidden');
                });

                // Close dropdown when clicking outside
                document.addEventListener('click', function (event) {
                    if (!profileButton.contains(event.target) && !profileDropdown.contains(event.target)) {
                        profileDropdown.classList.add('hidden');
                    }
                });

                // Close dropdown when clicking on a menu item
                profileDropdown.querySelectorAll('a').forEach(link => {
                    link.addEventListener('click', function () {
                        profileDropdown.classList.add('hidden');
                    });
                });
            }

            // School modal functionality
            const schoolModal = document.getElementById('schoolModal');
            const closeSchoolModalBtn = document.getElementById('closeSchoolModal');
            const schoolNameButtons = document.querySelectorAll('.school-name-btn');

            // Handle school name clicks
            schoolNameButtons.forEach(button => {
                button.addEventListener('click', function (e) {
                    e.preventDefault();
                    schoolModal.classList.remove('hidden');
                    document.body.style.overflow = 'hidden';
                });
            });

            // Close school modal
            if (closeSchoolModalBtn) {
                closeSchoolModalBtn.addEventListener('click', function () {
                    schoolModal.classList.add('hidden');
                    document.body.style.overflow = '';
                });
            }

            // Close school modal when clicking outside
            if (schoolModal) {
                schoolModal.addEventListener('click', function (e) {
                    if (e.target === schoolModal) {
                        schoolModal.classList.add('hidden');
                        document.body.style.overflow = '';
                    }
                });
            }
        });

        // Handle logout
        function handleLogout() {
            window.location.href = '../../login.html';
        }
    </script>

    <script>
        // Initialize Lucide Icons
        lucide.createIcons({ icons: lucide.icons });

        // Ensure card view is always visible
        document.addEventListener('DOMContentLoaded', function () {
            const cardViewContainer = document.querySelector('.grid.grid-cols-1.md\\:grid-cols-2.lg\\:grid-cols-3.gap-6');
            if (cardViewContainer) {
                cardViewContainer.style.display = 'block';
            }

            // Initialize tab functionality
            const tabs = document.querySelectorAll('.tab-button');
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabId = tab.getAttribute('data-tab');
                    toggleTabs(tabId);
                });
            });
        });

        // Tab functionality
        function toggleTabs(tabId) {
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.add('hidden');
            });

            // Remove active class from all tabs
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('bg-red-600', 'text-white');
                btn.classList.add('bg-gray-200', 'text-gray-600');
            });

            // Show selected tab content and update active tab
            const activeTab = document.getElementById(tabId);
            const activeTabButton = document.querySelector(`[data-tab="${tabId}"]`);

            if (activeTab && activeTabButton) {
                activeTab.classList.remove('hidden');
                activeTabButton.classList.remove('bg-gray-200', 'text-gray-600');
                activeTabButton.classList.add('bg-red-600', 'text-white');
            }
        }

        // Initialize with scholarships tab active by default
        document.addEventListener('DOMContentLoaded', function () {
            toggleTabs('scholarships');
        });

        // Function to get URL parameters
        function getUrlParameter(name) {
            name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
            var regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
            var results = regex.exec(location.search);
            return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
        }

        // Profile dropdown functionality
        document.addEventListener('DOMContentLoaded', function () {
            const profileButton = document.getElementById('profileButton');
            const profileDropdown = document.getElementById('profileDropdown');

            if (profileButton && profileDropdown) {
                profileButton.addEventListener('click', function () {
                    profileDropdown.classList.toggle('hidden');
                });

                // Close dropdown when clicking outside
                document.addEventListener('click', function (event) {
                    if (!profileButton.contains(event.target) && !profileDropdown.contains(event.target)) {
                        profileDropdown.classList.add('hidden');
                    }
                });

                // Close dropdown when clicking on a menu item
                profileDropdown.querySelectorAll('a').forEach(link => {
                    link.addEventListener('click', function () {
                        profileDropdown.classList.add('hidden');
                    });
                });
            }

            // School modal functionality
            const schoolModal = document.getElementById('schoolModal');
            const closeSchoolModalBtn = document.getElementById('closeSchoolModal');
            const schoolNameButtons = document.querySelectorAll('.school-name-btn');

            // Handle school name clicks
            schoolNameButtons.forEach(button => {
                button.addEventListener('click', function (e) {
                    e.preventDefault();
                    schoolModal.classList.remove('hidden');
                    document.body.style.overflow = 'hidden';
                });
            });

            // Close school modal
            if (closeSchoolModalBtn) {
                closeSchoolModalBtn.addEventListener('click', function () {
                    schoolModal.classList.add('hidden');
                    document.body.style.overflow = '';
                });
            }

            // Close school modal when clicking outside
            if (schoolModal) {
                schoolModal.addEventListener('click', function (e) {
                    if (e.target === schoolModal) {
                        schoolModal.classList.add('hidden');
                        document.body.style.overflow = '';
                    }
                });
            }
        });

        // Handle logout
        function handleLogout() {
            window.location.href = '../../login.html';
        }
    </script>

    <!-- AI Assistant Floating Button -->
    <div id="aiAssistantButton" class="fixed bottom-6 right-6 z-50">
        <button class="text-white rounded-full p-4 shadow-lg transition-all duration-300 hover:scale-110"
            style="background-color: rgb(237, 34, 23);" onmouseover="this.style.backgroundColor='#d82128'"
            onmouseout="this.style.backgroundColor='#d82128'">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                data-lucide="message-circle" class="lucide lucide-message-circle w-6 h-6">
                <path
                    d="M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719">
                </path>
            </svg>
        </button>
    </div>

    <!-- AI Assistant Chat Panel -->
    <div id="aiChatOverlay" class="fixed z-50 hidden">
        <div class="fixed bottom-0 left-0 right-0 md:right-6 md:bottom-6 md:left-auto md:w-96 bg-white rounded-3xl shadow-2xl transform transition-transform duration-300 translate-y-full"
            id="aiChatPanel">
            <!-- Chat Header -->
            <div class="flex justify-between items-start mb-6">
                <div>
                    <h3 class="text-lg font-semibold" id="aiChatTitle">AI Assistant</h3>
                    <p class="text-sm text-green-600" id="aiChatStatus">Online</p>
                </div>
                <button id="closeChatBtn" class="p-2 hover:bg-gray-100 rounded-full">
                    <i data-lucide="x" class="w-5 h-5 text-gray-500"></i>
                </button>
            </div>

            <!-- Chat Messages -->
            <div class="h-96 overflow-y-auto p-4 space-y-4" id="chatMessages">
                <div class="flex items-start space-x-3">
                    <div class="w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center flex-shrink-0">
                        <i data-lucide="bot" class="w-4 h-4 text-gray-600"></i>
                    </div>
                    <div class="bg-gray-100 rounded-2xl rounded-tl-md p-3 max-w-xs">
                        <p class="text-sm text-gray-800">Hi! I can help you find the perfect program. What are you
                            looking for?</p>
                    </div>
                </div>
            </div>

            <!-- Chat Input -->
            <div class="p-4 border-t border-gray-200">
                <div class="flex items-center space-x-2">
                    <input type="text" id="chatInput" placeholder="Type your message..."
                        class="flex-1 px-4 py-2 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-red-500"
                        style="--tw-ring-color: #d82128;">
                    <button id="sendMessageBtn" class="text-white rounded-full p-2 transition-colors"
                        style="background-color: #d82128;" onmouseover="this.style.backgroundColor='#d82128'"
                        onmouseout="this.style.backgroundColor='#d82128'">
                        <i data-lucide="send" class="w-5 h-5"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // AI Assistant Chat Functionality
        const aiButton = document.getElementById('aiAssistantButton');
        const chatOverlay = document.getElementById('aiChatOverlay');
        const chatPanel = document.getElementById('aiChatPanel');
        const closeChatBtn = document.getElementById('closeChatBtn');
        const chatInput = document.getElementById('chatInput');
        const sendMessageBtn = document.getElementById('sendMessageBtn');
        const chatMessages = document.getElementById('chatMessages');

        // Open chat
        aiButton.addEventListener('click', function () {
            chatOverlay.classList.remove('hidden');
            setTimeout(() => {
                chatPanel.classList.remove('translate-y-full');
            }, 10);
            chatInput.focus();
        });

        // Close chat
        function closeChat() {
            chatPanel.classList.add('translate-y-full');
            setTimeout(() => {
                chatOverlay.classList.add('hidden');
            }, 300);
        }

        closeChatBtn.addEventListener('click', closeChat);
        chatOverlay.addEventListener('click', function (e) {
            if (e.target === chatOverlay) {
                closeChat();
            }
        });

        // Send message
        function sendMessage() {
            const message = chatInput.value.trim();
            if (!message) return;

            // Add user message
            const userMessageDiv = document.createElement('div');
            userMessageDiv.className = 'flex items-start space-x-3 justify-end';
            userMessageDiv.innerHTML = `
                <div class="text-white rounded-2xl rounded-tr-md p-3 max-w-xs" style="background-color: #d82128;">
                    <p class="text-sm">${message}</p>
                </div>
                <div class="w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center flex-shrink-0">
                    <i data-lucide="user" class="w-4 h-4 text-gray-600"></i>
                </div>
            `;
            chatMessages.appendChild(userMessageDiv);

            // Clear input
            chatInput.value = '';

            // Simulate AI response
            setTimeout(() => {
                const aiMessageDiv = document.createElement('div');
                aiMessageDiv.className = 'flex items-start space-x-3';
                aiMessageDiv.innerHTML = `
                    <div class="w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0" style="background-color: #FEE2E2;">
                        <i data-lucide="bot" class="w-4 h-4" style="color: #d82128;"></i>
                    </div>
                    <div class="bg-gray-100 rounded-2xl rounded-tl-md p-3 max-w-xs">
                        <p class="text-sm text-gray-800">I can help you with "${message}". What specific information are you looking for about programs or universities?</p>
                    </div>
                `;
                chatMessages.appendChild(aiMessageDiv);
                chatMessages.scrollTop = chatMessages.scrollHeight;
                lucide.createIcons();
            }, 1000);

            // Scroll to bottom
            chatMessages.scrollTop = chatMessages.scrollHeight;
            lucide.createIcons();
        }

        sendMessageBtn.addEventListener('click', sendMessage);
        chatInput.addEventListener('keypress', function (e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });

        // Tab functionality
        document.addEventListener('click', function (e) {
            if (e.target.classList.contains('tab-btn')) {
                const clickedTab = e.target.getAttribute('data-tab');
                const cardId = e.target.getAttribute('data-card');

                // Remove active state from all tabs in this card
                const tabButtons = document.querySelectorAll(`[data-card="${cardId}"].tab-btn`);
                tabButtons.forEach(btn => {
                    btn.classList.remove('text-red-600', 'border-b-2', 'border-red-600');
                    btn.classList.add('text-gray-500');
                });

                // Add active state to clicked tab
                e.target.classList.remove('text-gray-500');
                e.target.classList.add('text-red-600', 'border-b-2', 'border-red-600');

                // Hide all tab content in this card
                const tabContents = document.querySelectorAll(`[data-card="${cardId}"].tab-content`);
                tabContents.forEach(content => {
                    content.classList.add('hidden');
                });

                // Show selected tab content
                const activeContent = document.querySelector(`[data-tab="${clickedTab}"][data-card="${cardId}"].tab-content`);
                if (activeContent) {
                    activeContent.classList.remove('hidden');
                }
            }
        });

        // Filter dropdown functionality
        document.addEventListener('click', function (e) {
            if (e.target.closest('.filter-toggle')) {
                const button = e.target.closest('.filter-toggle');
                const filterType = button.getAttribute('data-filter');
                const content = document.querySelector(`.filter-content[data-filter="${filterType}"]`);
                const chevron = button.querySelector('[data-lucide="chevron-down"]');

                if (content.classList.contains('hidden')) {
                    content.classList.remove('hidden');
                    chevron.style.transform = 'rotate(180deg)';
                } else {
                    content.classList.add('hidden');
                    chevron.style.transform = 'rotate(0deg)';
                }
            }
        });

        // Scholarship data for dynamic content
        const scholarshipData = {
            'merit-based': {
                applicationFee: '$100',
                tuitionFee: '$25,000 - $30,000',
                livingExpenses: '$12,000',
                booksSupplies: '$800',
                subtotal: '$38,900',
                scholarshipDiscount: '-$8,000',
                finalCost: '$30,900',
                academicRequirements: [
                    'Minimum GPA of 3.7/4.0 or equivalent',
                    'Bachelor\'s degree in relevant field',
                    'Academic excellence demonstrated through transcripts',
                    'Dean\'s list or honor roll recognition preferred'
                ],
                languageRequirements: [
                    'IELTS: 7.0 overall (no band below 6.5)',
                    'TOEFL iBT: 100 overall',
                    'Duolingo: 125 overall'
                ],
                requiredDocuments: [
                    'Academic transcripts with grade verification',
                    'Two academic letters of recommendation',
                    'Personal statement highlighting achievements',
                    'Portfolio of academic work (if applicable)'
                ],
                programOverview: 'Merit-based scholarship program designed for academically outstanding students who have demonstrated exceptional performance in their undergraduate studies.',
                coreCourses: [
                    'Advanced Research Methodologies',
                    'Leadership in Academic Excellence',
                    'Scholarly Communication',
                    'Independent Study Project'
                ],
                programDuration: '2 years full-time',
                semesterBreakdown: '4 semesters over 2 years',
                specializationTracks: 'Research Focus, Academic Leadership, Scholarly Publications'
            },
            'need-based': {
                fees: {
                    applicationFee: '$75',
                    tuition: '$20,000 - $25,000',
                    livingExpenses: '$10,000',
                    booksSupplies: '$600',
                    total: '$31,275',
                    scholarshipDiscount: '$12,000'
                },
                requirements: {
                    academic: [
                        'Minimum GPA of 3.0/4.0 or equivalent',
                        'Bachelor\'s degree from accredited institution',
                        'Demonstrated financial need through documentation',
                        'Strong academic potential despite financial constraints'
                    ],
                    language: [
                        'IELTS: 6.0 overall (no band below 5.5)',
                        'TOEFL iBT: 80 overall',
                        'Duolingo: 105 overall'
                    ],
                    documents: [
                        'Financial aid application (FAFSA or equivalent)',
                        'Family income documentation',
                        'Personal statement explaining financial circumstances',
                        'Bank statements and tax returns'
                    ]
                },
                courseDetails: {
                    overview: 'Need-based scholarship program providing financial assistance to deserving students who require support to pursue their educational goals.',
                    coreCourses: [
                        'Financial Literacy and Management',
                        'Career Development and Planning',
                        'Community Service Learning',
                        'Peer Mentoring Program'
                    ],
                    duration: '2-3 years flexible',
                    semesters: '4-6 semesters with flexible scheduling',
                    specializations: 'Community Engagement, Financial Planning, Career Services'
                }
            },
            'entrance': {
                fees: {
                    applicationFee: '$50',
                    tuition: '$22,000 - $28,000',
                    livingExpenses: '$11,000',
                    booksSupplies: '$700',
                    total: '$34,250',
                    scholarshipDiscount: '$5,000'
                },
                requirements: {
                    academic: [
                        'High school diploma or equivalent',
                        'Minimum GPA of 2.8/4.0 or equivalent',
                        'Strong performance in entrance examinations',
                        'Completion of prerequisite courses'
                    ],
                    language: [
                        'IELTS: 6.5 overall (no band below 6.0)',
                        'TOEFL iBT: 85 overall',
                        'Duolingo: 110 overall'
                    ],
                    documents: [
                        'High school transcripts',
                        'Entrance exam scores (SAT/ACT)',
                        'Letter of motivation',
                        'Extracurricular activity records'
                    ]
                },
                courseDetails: {
                    overview: 'Entrance scholarship program for new students beginning their academic journey, designed to support transition into higher education.',
                    coreCourses: [
                        'Academic Foundations',
                        'Study Skills and Time Management',
                        'Introduction to Research Methods',
                        'First-Year Seminar'
                    ],
                    duration: '4 years undergraduate',
                    semesters: '8 semesters over 4 years',
                    specializations: 'Liberal Arts, Sciences, Pre-Professional Programs'
                }
            },
            'research': {
                fees: {
                    applicationFee: '$125',
                    tuition: '$30,000 - $35,000',
                    livingExpenses: '$15,000',
                    booksSupplies: '$1,000',
                    total: '$46,125',
                    scholarshipDiscount: '$15,000'
                },
                requirements: {
                    academic: [
                        'Master\'s degree or equivalent research experience',
                        'Minimum GPA of 3.5/4.0 in graduate studies',
                        'Published research papers or conference presentations',
                        'Strong research proposal aligned with faculty interests'
                    ],
                    language: [
                        'IELTS: 7.5 overall (no band below 7.0)',
                        'TOEFL iBT: 105 overall',
                        'Duolingo: 130 overall'
                    ],
                    documents: [
                        'Research proposal (2000-3000 words)',
                        'Three academic references from research supervisors',
                        'CV highlighting research experience',
                        'Writing sample from previous research work'
                    ]
                },
                courseDetails: {
                    overview: 'Research scholarship program for doctoral candidates and advanced researchers pursuing cutting-edge research in their field of expertise.',
                    coreCourses: [
                        'Advanced Research Design',
                        'Statistical Analysis and Data Science',
                        'Grant Writing and Funding',
                        'Dissertation Seminar'
                    ],
                    duration: '3-5 years doctoral program',
                    semesters: '6-10 semesters with research focus',
                    specializations: 'STEM Research, Social Sciences, Humanities Research'
                }
            },
            'athletic': {
                fees: {
                    applicationFee: '$75',
                    tuition: '$18,000 - $24,000',
                    livingExpenses: '$9,000',
                    booksSupplies: '$500',
                    total: '$28,075',
                    scholarshipDiscount: '$10,000'
                },
                requirements: {
                    academic: [
                        'Minimum GPA of 2.8/4.0 or equivalent',
                        'High school diploma with sports participation',
                        'NCAA eligibility requirements met',
                        'Demonstrated athletic excellence in chosen sport'
                    ],
                    language: [
                        'IELTS: 6.0 overall (no band below 5.5)',
                        'TOEFL iBT: 75 overall',
                        'Duolingo: 100 overall'
                    ],
                    documents: [
                        'Athletic performance records and statistics',
                        'Coach recommendations from previous teams',
                        'Medical clearance and physical examination',
                        'Video highlights of athletic performance'
                    ]
                },
                courseDetails: {
                    overview: 'Athletic scholarship program for student-athletes who excel in sports while maintaining academic standards and representing the university in competitions.',
                    coreCourses: [
                        'Sports Science and Kinesiology',
                        'Athletic Training and Conditioning',
                        'Sports Psychology',
                        'Team Leadership and Communication'
                    ],
                    duration: '4 years with athletic commitment',
                    semesters: '8 semesters over 4 years',
                    specializations: 'Team Sports, Individual Sports, Sports Management'
                }
            },
            'diversity-inclusion': {
                fees: {
                    applicationFee: '$50',
                    tuition: '$20,000 - $26,000',
                    livingExpenses: '$10,500',
                    booksSupplies: '$650',
                    total: '$31,700',
                    scholarshipDiscount: '$9,000'
                },
                requirements: {
                    academic: [
                        'Minimum GPA of 3.0/4.0 or equivalent',
                        'Demonstrated commitment to diversity and inclusion',
                        'Leadership in community or cultural organizations',
                        'Essay on diversity, equity, and inclusion experiences'
                    ],
                    language: [
                        'IELTS: 6.5 overall (no band below 6.0)',
                        'TOEFL iBT: 85 overall',
                        'Duolingo: 110 overall'
                    ],
                    documents: [
                        'Diversity and inclusion personal statement',
                        'Community involvement and leadership records',
                        'Cultural background documentation',
                        'Letters of support from community leaders'
                    ]
                },
                courseDetails: {
                    overview: 'Diversity and inclusion scholarship program promoting educational access for underrepresented groups and fostering inclusive campus communities.',
                    coreCourses: [
                        'Cultural Studies and Identity',
                        'Social Justice and Advocacy',
                        'Community Engagement and Leadership',
                        'Intercultural Communication'
                    ],
                    duration: '2-4 years flexible',
                    semesters: '4-8 semesters with community service',
                    specializations: 'Cultural Studies, Social Work, Community Development'
                }
            }
        };

        // Function to update scholarship data for a specific card
        function updateScholarshipData(scholarshipType, cardNumber) {
            const data = scholarshipData[scholarshipType];
            if (!data) return;

            const suffix = cardNumber === '1' ? '' : cardNumber;

            // Update fees content
            const applicationFeeEl = document.getElementById(`applicationFee${suffix}`);
            const tuitionFeeEl = document.getElementById(`tuitionFee${suffix}`);
            const livingExpensesEl = document.getElementById(`livingExpenses${suffix}`);
            const booksSuppliesEl = document.getElementById(`booksSupplies${suffix}`);
            const subtotalEl = document.getElementById(`subtotal${suffix}`);
            const scholarshipDiscountEl = document.getElementById(`scholarshipDiscount${suffix}`);
            const finalCostEl = document.getElementById(`finalCost${suffix}`);

            if (applicationFeeEl) applicationFeeEl.textContent = data.fees.applicationFee;
            if (tuitionFeeEl) tuitionFeeEl.textContent = data.fees.tuition;
            if (livingExpensesEl) livingExpensesEl.textContent = data.fees.livingExpenses;
            if (booksSuppliesEl) booksSuppliesEl.textContent = data.fees.booksSupplies;
            if (subtotalEl) subtotalEl.textContent = data.fees.total;
            if (scholarshipDiscountEl) scholarshipDiscountEl.textContent = `-${data.fees.scholarshipDiscount}`;
            if (finalCostEl) {
                const total = parseInt(data.fees.total.replace(/[$,]/g, ''));
                const discount = parseInt(data.fees.scholarshipDiscount.replace(/[$,]/g, ''));
                const final = total - discount;
                finalCostEl.textContent = `$${final.toLocaleString()}`;
            }

            // Update requirements content
            const academicReqEl = document.getElementById(`academicRequirements${suffix}`);
            const languageReqEl = document.getElementById(`languageRequirements${suffix}`);
            const documentsReqEl = document.getElementById(`requiredDocuments${suffix}`);

            if (academicReqEl) {
                academicReqEl.innerHTML = data.requirements.academic.map(req => `<li>${req}</li>`).join('');
            }
            if (languageReqEl) {
                languageReqEl.innerHTML = data.requirements.language.map(req => `<li>${req}</li>`).join('');
            }
            if (documentsReqEl) {
                documentsReqEl.innerHTML = data.requirements.documents.map(doc => `<li>${doc}</li>`).join('');
            }

            // Update course details content
            const programOverviewEl = document.getElementById(`programOverview${suffix}`);
            const coreCoursesEl = document.getElementById(`coreCourses${suffix}`);
            const programDurationEl = document.getElementById(`programDuration${suffix}`);
            const semesterBreakdownEl = document.getElementById(`semesterBreakdown${suffix}`);
            const specializationTracksEl = document.getElementById(`specializationTracks${suffix}`);

            if (programOverviewEl) programOverviewEl.textContent = data.courseDetails.overview;
            if (coreCoursesEl) {
                coreCoursesEl.innerHTML = data.courseDetails.coreCourses.map(course => `<li>${course}</li>`).join('');
            }
            if (programDurationEl) programDurationEl.textContent = data.courseDetails.duration;
            if (semesterBreakdownEl) semesterBreakdownEl.textContent = data.courseDetails.semesters;
            if (specializationTracksEl) specializationTracksEl.textContent = data.courseDetails.specializations;
        }

        // Simple tab functionality for scholarship sections
        document.addEventListener('DOMContentLoaded', function () {
            // Initialize tab functionality for all scholarship sections
            const tabButtons = document.querySelectorAll('.tab-btn');

            tabButtons.forEach(button => {
                button.addEventListener('click', function () {
                    const tabId = this.getAttribute('data-tab');
                    const cardId = this.getAttribute('data-card');
                    const section = this.closest('.border-t.pt-4');

                    if (section) {
                        showTab(section, tabId);
                    }
                });
            });

            function showTab(section, tabId) {
                // Update active tab button
                const tabButtons = section.querySelectorAll('.tab-btn');
                tabButtons.forEach(btn => {
                    btn.classList.remove('text-red-600', 'border-b-2', 'border-red-600');
                    btn.classList.add('text-gray-500');
                });
                const activeButton = section.querySelector(`.tab-btn[data-tab="${tabId}"]`);
                if (activeButton) {
                    activeButton.classList.add('text-red-600', 'border-b-2', 'border-red-600');
                    activeButton.classList.remove('text-gray-500');
                }

                // Show corresponding tab content
                const tabContents = section.querySelectorAll('.tab-content');
                tabContents.forEach(content => {
                    content.classList.add('hidden');
                });
                const activeContent = section.querySelector(`.tab-content[data-tab="${tabId}"]`);
                if (activeContent) {
                    activeContent.classList.remove('hidden');
                }
            }

            // Initialize default state - show fees tab
            const scholarshipSections = document.querySelectorAll('.border-t.pt-4');
            scholarshipSections.forEach(section => {
                showTab(section, 'fees');
            });

            // Add event listeners for scholarship dropdown changes
            const scholarshipDropdowns = document.querySelectorAll('.scholarship-dropdown');
            scholarshipDropdowns.forEach(dropdown => {
                dropdown.addEventListener('change', function () {
                    const scholarshipType = this.value;
                    const cardNumber = this.getAttribute('data-card');
                    updateScholarshipData(scholarshipType, cardNumber);
                });
            });

            // Initialize with default scholarship data for all cards
            scholarshipDropdowns.forEach(dropdown => {
                const scholarshipType = dropdown.value;
                const cardNumber = dropdown.getAttribute('data-card');
                updateScholarshipData(scholarshipType, cardNumber);
            });
        });
    </script>

    <!-- Working Modal Script -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const modal = document.getElementById('programModal');
            const viewDetailsBtns = document.querySelectorAll('.view-details-btn');
            const closeBtn = document.getElementById('closeModal');

            // School modal elements
            const schoolModal = document.getElementById('schoolModal');
            const schoolNameBtns = document.querySelectorAll('.school-name-btn');
            const closeSchoolBtn = document.getElementById('closeSchoolModal');

            console.log('School name buttons found:', schoolNameBtns.length);

            // Program data
            const programs = {
                '1': {
                    name: 'MSc in Data Science',
                    university: 'University of British Columbia',
                    location: 'Vancouver, Canada'
                },
                '2': {
                    name: 'Bachelor of Computer Science',
                    university: 'Tiffin University',
                    location: 'Tiffin, Ohio, USA'
                }
            };

            // School data
            const schools = {
                'berkeley-city-college': {
                    name: 'Berkeley City College (BCC)',
                    location: 'Berkeley, California, USA'
                },
                'ubc': {
                    name: 'University of British Columbia',
                    location: 'Vancouver, Canada'
                },
                'tiffin-university': {
                    name: 'Tiffin University',
                    location: 'Tiffin, Ohio, USA'
                }
            };

            // Add click listeners to View Details buttons
            viewDetailsBtns.forEach(btn => {
                btn.addEventListener('click', function (e) {
                    e.preventDefault();
                    const programId = btn.getAttribute('data-program-id');
                    const program = programs[programId];

                    if (program && modal) {
                        // Update modal content
                        const nameEl = document.getElementById('modalProgramName');
                        const uniEl = document.getElementById('modalUniversityName');
                        const locEl = document.getElementById('modalLocation');

                        if (nameEl) nameEl.textContent = program.name;
                        if (uniEl) uniEl.textContent = program.university;
                        if (locEl) locEl.textContent = program.location;

                        // Show modal
                        modal.classList.remove('hidden');
                        lucide.createIcons();
                    }
                });
            });

            // Add click listeners to school names
            schoolNameBtns.forEach(btn => {
                btn.addEventListener('click', function (e) {
                    e.preventDefault();
                    console.log('School name clicked!');
                    const schoolId = btn.getAttribute('data-school');
                    console.log('School ID:', schoolId);
                    const school = schools[schoolId];

                    if (school && schoolModal) {
                        // Update school modal content
                        const nameEl = document.getElementById('schoolName');
                        const locEl = document.getElementById('schoolLocation');

                        if (nameEl) nameEl.textContent = school.name;
                        if (locEl) locEl.textContent = school.location;

                        // Show school modal
                        schoolModal.classList.remove('hidden');
                        console.log('School modal should be visible');
                        lucide.createIcons();
                    }
                });
            });

            // Close program modal
            if (closeBtn) {
                closeBtn.addEventListener('click', function () {
                    modal.classList.add('hidden');
                });
            }

            // Close school modal
            if (closeSchoolBtn) {
                closeSchoolBtn.addEventListener('click', function () {
                    schoolModal.classList.add('hidden');
                });
            }

            // Close on outside click
            if (modal) {
                modal.addEventListener('click', function (e) {
                    if (e.target === modal) {
                        modal.classList.add('hidden');
                    }
                });
            }

            if (schoolModal) {
                schoolModal.addEventListener('click', function (e) {
                    if (e.target === schoolModal) {
                        schoolModal.classList.add('hidden');
                    }
                });
            }

            // Handle profile completion modal
            const profileModal = document.getElementById('profileCompletionModal');
            const closeProfileModal = document.getElementById('closeProfileModal');

            // Function to show profile completion modal
            function showProfileModal() {
                if (profileModal) {
                    profileModal.classList.remove('hidden');
                    document.body.style.overflow = 'hidden';
                }
            }

            // Close modal when clicking the close button
            if (closeProfileModal) {
                closeProfileModal.addEventListener('click', function () {
                    if (profileModal) {
                        profileModal.classList.add('hidden');
                        document.body.style.overflow = '';
                    }
                });
            }

            // Close modal when clicking outside
            if (profileModal) {
                profileModal.addEventListener('click', function (e) {
                    if (e.target === profileModal) {
                        profileModal.classList.add('hidden');
                        document.body.style.overflow = '';
                    }
                });
            }

            // Add event listeners to Program Card 3 buttons
            const programCard3 = document.querySelector('.program-card');
            if (programCard3) {
                // School name button
                const schoolNameBtn = programCard3.querySelector('.school-name-btn');
                // School name click handler is now managed by the Berkeley modal code

                // Add to Favorites and Apply Now buttons
                const actionButtons = programCard3.querySelectorAll('button');
                actionButtons.forEach(button => {
                    const buttonText = button.textContent.trim();
                    if (buttonText === 'Add to Favorites' || buttonText === 'Apply Now') {
                        button.addEventListener('click', function (e) {
                            e.preventDefault();
                            showProfileModal();
                        });
                    }
                });
            }
        });
    </script>

    <!-- Tiffin University Details Modal -->
    <div id="torontoModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-2xl p-8 max-w-4xl w-full mx-4 shadow-xl max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-start mb-6">
                <div>
                    <h3 class="text-2xl font-bold text-gray-900">
                        <a href="Student-program-details-2.html" target="_blank"
                            class="hover:text-red-600 transition-colors cursor-pointer"
                            onclick="document.getElementById('torontoModal').classList.add('hidden'); document.body.style.overflow = 'auto';">
                            Tiffin University
                        </a>
                    </h3>
                    <p class="text-gray-600">Tiffin, Ohio, USA</p>
                </div>
                <button id="closeTorontoModal" class="text-gray-400 hover:text-gray-600">
                    <i data-lucide="x" class="w-6 h-6"></i>
                </button>
            </div>

            <div class="grid md:grid-cols-2 gap-8">
                <div>
                    <div class="aspect-w-16 aspect-h-9 mb-6">
                        <img src="https://images.unsplash.com/photo-1562774053-701939374585?w=800&h=450&fit=crop"
                            alt="Tiffin University Campus" class="w-full h-auto rounded-lg object-cover">
                    </div>

                    <div class="space-y-4">
                        <div>
                            <h4 class="font-semibold text-gray-900 mb-2">About</h4>
                            <p class="text-gray-600 text-sm leading-relaxed">
                                Tiffin University is a private university located in Tiffin, Ohio. Founded in 1888, TU
                                is committed to transforming lives through education.
                                Follow a path. Blaze a trail. We challenge students to enhance their global competencies
                                and skills for success in a diverse world.
                                With a 20:1 student-faculty ratio, we provide personalized attention and exceptional
                                educational experiences.
                            </p>
                        </div>

                        <div>
                            <h4 class="font-semibold text-gray-900 mb-2">Quick Facts</h4>
                            <ul class="space-y-2 text-sm text-gray-600">
                                <li class="flex items-start">
                                    <i data-lucide="award" class="w-4 h-4 mr-2 mt-0.5 text-red-600 flex-shrink-0"></i>
                                    <span>Founded in 1888 - Over 135 years of educational excellence</span>
                                </li>
                                <li class="flex items-start">
                                    <i data-lucide="users" class="w-4 h-4 mr-2 mt-0.5 text-red-600 flex-shrink-0"></i>
                                    <span>3,000+ students with 20:1 student-faculty ratio</span>
                                </li>
                                <li class="flex items-start">
                                    <i data-lucide="graduation-cap"
                                        class="w-4 h-4 mr-2 mt-0.5 text-red-600 flex-shrink-0"></i>
                                    <span>50+ undergraduate and graduate programs</span>
                                </li>
                                <li class="flex items-start">
                                    <i data-lucide="dollar-sign"
                                        class="w-4 h-4 mr-2 mt-0.5 text-red-600 flex-shrink-0"></i>
                                    <span>98% of students receive financial aid</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="space-y-6">
                    <div class="bg-gray-50 p-4 rounded-lg">
                        <h4 class="font-semibold text-gray-900 mb-3">Scholarships Available</h4>
                        <ul class="space-y-3">
                            <li class="flex items-start">
                                <i data-lucide="check-circle"
                                    class="w-5 h-5 text-green-600 mr-2 mt-0.5 flex-shrink-0"></i>
                                <div>
                                    <p class="font-medium">Computer Science</p>
                                    <p class="text-sm text-gray-500">Bachelor of Science (BSc)</p>
                                </div>
                            </li>
                            <li class="flex items-start">
                                <i data-lucide="check-circle"
                                    class="w-5 h-5 text-green-600 mr-2 mt-0.5 flex-shrink-0"></i>
                                <div>
                                    <p class="font-medium">Engineering Science</p>
                                    <p class="text-sm text-gray-500">Bachelor of Applied Science (BASc)</p>
                                </div>
                            </li>
                            <li class="flex items-start">
                                <i data-lucide="check-circle"
                                    class="w-5 h-5 text-green-600 mr-2 mt-0.5 flex-shrink-0"></i>
                                <div>
                                    <p class="font-medium">Business Administration</p>
                                    <p class="text-sm text-gray-500">Bachelor of Business Administration (BBA)</p>
                                </div>
                            </li>
                        </ul>
                    </div>

                    <div class="bg-red-50 p-4 rounded-lg">
                        <h4 class="font-semibold text-red-700 mb-2">Scholarship Opportunities</h4>
                        <p class="text-sm text-red-600 mb-3">Eligible students may qualify for the following
                            scholarships:</p>
                        <ul class="space-y-2 text-sm">
                            <li class="flex items-start">
                                <i data-lucide="award" class="w-4 h-4 mr-2 mt-0.5 text-red-600 flex-shrink-0"></i>
                                <span>Tiffin University Merit Scholarship</span>
                            </li>
                            <li class="flex items-start">
                                <i data-lucide="award" class="w-4 h-4 mr-2 mt-0.5 text-red-600 flex-shrink-0"></i>
                                <span>International Student Excellence Award</span>
                            </li>
                            <li class="flex items-start">
                                <i data-lucide="award" class="w-4 h-4 mr-2 mt-0.5 text-red-600 flex-shrink-0"></i>
                                <span>STEM Achievement Scholarship</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- University of Berkeley Details Modal -->
    <div id="berkeleyModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-2xl p-8 max-w-4xl w-full mx-4 shadow-xl max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-start mb-6">
                <div>
                    <h3 class="text-2xl font-bold text-gray-900">
                        <a href="Student-program-details.html" target="_blank"
                            class="hover:text-red-600 transition-colors cursor-pointer"
                            onclick="document.getElementById('berkeleyModal').classList.add('hidden'); document.body.style.overflow = 'auto';">
                            University of Berkeley
                        </a>
                    </h3>
                    <p class="text-gray-600">Berkeley, California, United States</p>
                </div>
                <button id="closeBerkeleyModal" class="text-gray-400 hover:text-gray-600">
                    <i data-lucide="x" class="w-6 h-6"></i>
                </button>
            </div>

            <div class="grid md:grid-cols-2 gap-8">
                <div>
                    <div class="aspect-w-16 aspect-h-9 mb-6">
                        <img src="https://images.unsplash.com/photo-1523580494863-6f3031224c94?w=800&h=450&fit=crop"
                            alt="University of Berkeley Campus" class="w-full h-auto rounded-lg object-cover">
                    </div>

                    <div class="space-y-4">
                        <div>
                            <h4 class="font-semibold text-gray-900 mb-2">About</h4>
                            <p class="text-gray-600 text-sm leading-relaxed">
                                The University of Berkeley is a public land-grant research university in Berkeley,
                                California.
                                Founded in 1868, it is the flagship campus of the University of California system and is
                                consistently
                                ranked among the top public universities in the world.
                            </p>
                        </div>

                        <div>
                            <h4 class="font-semibold text-gray-900 mb-2">Quick Facts</h4>
                            <ul class="space-y-2 text-sm text-gray-600">
                                <li class="flex items-start">
                                    <i data-lucide="award" class="w-4 h-4 mr-2 mt-0.5 text-red-600 flex-shrink-0"></i>
                                    <span>#1 Public University in the World (US News & World Report)</span>
                                </li>
                                <li class="flex items-start">
                                    <i data-lucide="users" class="w-4 h-4 mr-2 mt-0.5 text-red-600 flex-shrink-0"></i>
                                    <span>45,000+ students from over 100 countries</span>
                                </li>
                                <li class="flex items-start">
                                    <i data-lucide="graduation-cap"
                                        class="w-4 h-4 mr-2 mt-0.5 text-red-600 flex-shrink-0"></i>
                                    <span>350+ degree programs across 14 colleges and schools</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="space-y-6">
                    <div class="bg-gray-50 p-4 rounded-lg">
                        <h4 class="font-semibold text-gray-900 mb-3">Scholarships Available</h4>
                        <ul class="space-y-3">
                            <li class="flex items-start">
                                <i data-lucide="check-circle"
                                    class="w-5 h-5 text-green-600 mr-2 mt-0.5 flex-shrink-0"></i>
                                <div>
                                    <p class="font-medium">Computer Science</p>
                                    <p class="text-sm text-gray-500">Master of Science (M.S.)</p>
                                </div>
                            </li>
                            <li class="flex items-start">
                                <i data-lucide="check-circle"
                                    class="w-5 h-5 text-green-600 mr-2 mt-0.5 flex-shrink-0"></i>
                                <div>
                                    <p class="font-medium">Business Administration</p>
                                    <p class="text-sm text-gray-500">Master of Business Administration (MBA)</p>
                                </div>
                            </li>
                            <li class="flex items-start">
                                <i data-lucide="check-circle"
                                    class="w-5 h-5 text-green-600 mr-2 mt-0.5 flex-shrink-0"></i>
                                <div>
                                    <p class="font-medium">Electrical Engineering</p>
                                    <p class="text-sm text-gray-500">Master of Engineering (M.Eng)</p>
                                </div>
                            </li>
                        </ul>
                    </div>

                    <div class="bg-red-50 p-4 rounded-lg">
                        <h4 class="font-semibold text-red-700 mb-2">Scholarship Opportunities</h4>
                        <p class="text-sm text-red-600 mb-3">Eligible students may qualify for the following
                            scholarships:</p>
                        <ul class="space-y-2 text-sm">
                            <li class="flex items-start">
                                <i data-lucide="award" class="w-4 h-4 mr-2 mt-0.5 text-red-600 flex-shrink-0"></i>
                                <span>Berkeley Graduate Fellowship</span>
                            </li>
                            <li class="flex items-start">
                                <i data-lucide="award" class="w-4 h-4 mr-2 mt-0.5 text-red-600 flex-shrink-0"></i>
                                <span>International Student Scholarship</span>
                            </li>
                            <li class="flex items-start">
                                <i data-lucide="award" class="w-4 h-4 mr-2 mt-0.5 text-red-600 flex-shrink-0"></i>
                                <span>Graduate Opportunity Program</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal JavaScript -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Toronto Modal
            const torontoModal = document.getElementById('torontoModal');
            const closeTorontoModal = document.getElementById('closeTorontoModal');
            const torontoButtons = document.querySelectorAll('[data-school="tiffin-university"]');

            // Open Toronto modal
            torontoButtons.forEach(button => {
                button.addEventListener('click', function (e) {
                    e.preventDefault();
                    e.stopPropagation();
                    torontoModal.classList.remove('hidden');
                    document.body.style.overflow = 'hidden';
                });
            });

            // Close Toronto modal
            if (closeTorontoModal) {
                closeTorontoModal.addEventListener('click', function () {
                    torontoModal.classList.add('hidden');
                    document.body.style.overflow = 'auto';
                });
            }

            // Berkeley Modal
            const berkeleyModal = document.getElementById('berkeleyModal');
            const closeBerkeleyModal = document.getElementById('closeBerkeleyModal');
            const berkeleyButtons = document.querySelectorAll('[data-school="university-of-california-berkeley"]');

            // Open Berkeley modal
            berkeleyButtons.forEach(button => {
                button.addEventListener('click', function (e) {
                    e.preventDefault();
                    e.stopPropagation();
                    berkeleyModal.classList.remove('hidden');
                    document.body.style.overflow = 'hidden';
                });
            });

            // Close Berkeley modal
            if (closeBerkeleyModal) {
                closeBerkeleyModal.addEventListener('click', function () {
                    berkeleyModal.classList.add('hidden');
                    document.body.style.overflow = 'auto';
                });
            }

            // Close modals when clicking outside
            window.addEventListener('click', function (event) {
                if (event.target === torontoModal) {
                    torontoModal.classList.add('hidden');
                    document.body.style.overflow = 'auto';
                }
                if (event.target === berkeleyModal) {
                    berkeleyModal.classList.add('hidden');
                    document.body.style.overflow = 'auto';
                }
            });
        });
    </script>

    <!-- Add these scripts before the closing body tag -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    <script>
        // Initialize Select2 for all field of study dropdowns
        $(document).ready(function () {
            $('.field-of-study-select').select2({
                placeholder: 'Select Field of Study',
                allowClear: true,
                width: '100%',
                minimumResultsForSearch: 0, // Always show search
                dropdownParent: $('body') // Ensure dropdown appears above other elements
            });

            // External search functionality
            $('.search-field-of-study').on('input', function () {
                const searchTerm = $(this).val().toLowerCase();
                const $select = $(this).next('.field-of-study-select');

                // Open the dropdown
                $select.select2('open');

                // Set the search term in Select2's search box
                $('.select2-search__field').val(searchTerm).trigger('input');
            });

            // Style the search box
            $(document).on('select2:open', function () {
                $('.select2-search__field').addClass('text-sm rounded focus:ring-2 focus:ring-red-500 focus:border-transparent');
            });
        });
    </script>

    <!-- Profile Completion Modal -->
    <div id="profileCompletionModal"
        class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-2xl p-6 max-w-md w-full mx-4 shadow-xl">
            <div class="text-center">
                <div class="mb-4">
                    <i data-lucide="alert-circle" class="w-12 h-12 text-red-600 mx-auto mb-3"></i>
                </div>
                <h3 class="text-lg font-semibold text-gray-900 mb-2">Profile Incomplete</h3>
                <p class="text-gray-600 mb-6">To continue, please complete all the required fields in the profile.</p>
                <div class="flex gap-3">
                    <button id="closeProfileModal"
                        class="flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors">
                        Cancel
                    </button>
                    <a href="Student-profile.html" target="_blank"
                        class="go-to-profile flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-center">
                        Go to your profile
                    </a>
                </div>
                <script>
                    // Add click event to close modal when profile link is clicked
                    document.querySelector('.go-to-profile').addEventListener('click', function () {
                        document.getElementById('profileCompletionModal').classList.add('hidden');
                    });
                </script>
                <script>
                    // Toggle filter sections
                    document.querySelectorAll('.filter-toggle').forEach(button => {
                        button.addEventListener('click', function () {
                            const filterType = this.getAttribute('data-filter');
                            const content = document.querySelector(`.filter-content[data-filter="${filterType}"]`);
                            const icon = this.querySelector('i');

                            // Toggle content visibility
                            content.classList.toggle('hidden');

                            // Rotate chevron icon
                            icon.classList.toggle('rotate-180');
                        });
                    });

                    // Toggle between Scholarships and Joint Program tabs
                    function toggleTabs(activeTab) {
                        // Update button styles
                        const scholarshipBtn = document.getElementById('scholarships-btn');
                        const jointProgramBtn = document.getElementById('joint-program-btn');

                        if (activeTab === 'scholarships') {
                            // Update button styles
                            scholarshipBtn.className = 'flex items-center px-4 py-2 text-white rounded-lg text-sm font-medium whitespace-nowrap';
                            scholarshipBtn.style.backgroundColor = '#d82128';
                            jointProgramBtn.className = 'flex items-center px-4 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 whitespace-nowrap';
                            jointProgramBtn.style.backgroundColor = '#f3f4f6';

                            // Show scholarship program cards and hide joint program cards
                            document.querySelectorAll('.program-card-2, .program-card').forEach(card => {
                                card.style.display = 'block';
                            });
                            document.querySelectorAll('.joint-program-card').forEach(card => {
                                card.style.display = 'none';
                            });
                        } else if (activeTab === 'joint-program') {
                            // Update button styles
                            scholarshipBtn.className = 'flex items-center px-4 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 whitespace-nowrap';
                            scholarshipBtn.style.backgroundColor = '#f3f4f6';
                            jointProgramBtn.className = 'flex items-center px-4 py-2 text-white rounded-lg text-sm font-medium whitespace-nowrap';
                            jointProgramBtn.style.backgroundColor = '#d82128';

                            // Hide all scholarship program cards (including program-card)
                            document.querySelectorAll('.program-card').forEach(card => {
                                card.style.display = 'none';
                            });

                            // Check if joint program cards exist, if not create them
                            let jointProgramCards = document.querySelectorAll('.joint-program-card');
                            if (jointProgramCards.length === 0) {
                                createJointProgramCards();
                            } else {
                                jointProgramCards.forEach(card => {
                                    card.style.display = 'block';
                                });
                            }
                        }
                    }

                    function createJointProgramCards() {
                        const resultsSection = document.querySelector('.flex-1.space-y-6');
                        if (!resultsSection) return;

                        // Create a joint program card that matches the scholarship program card structure
                        const card = document.createElement('div');
                        card.className = 'joint-program-card bg-white rounded-3xl shadow-md p-6 hover:shadow-lg transition-all duration-300';

                        // Copy the structure from the scholarship program card (Program Card 2)
                        card.innerHTML = `
                            <div class="flex items-start mb-4">
                                <!-- Institution Logo -->
                                <div class="w-36 h-36 bg-gray-200 rounded-xl flex items-center justify-center mr-4 flex-shrink-0">
                                    <img src="https://imgs.search.brave.com/7v5wHxjf3AvFxuaSkfR5sJMHz6iSmtZffXliKTeJsH8/rs:fit:500:0:1:0/g:ce/aHR0cHM6Ly9pbWFn/ZXMuZm9vdGJhbGxm/YW5hdGljcy5jb20v/YXJpem9uYS13aWxk/Y2F0cy9hcml6b25h/LXdpbGRjYXRzLTI0/LXJvdW5kLWhlcml0/YWdlLWxvZ28tc2ln/bl9waTQwOTUwMDBf/ZmZfNDA5NTc4MS1i/NDg4NGQ0Y2Y2MjM1/YTE0MDk0M19mdWxs/LmpwZz9faHY9MiZ3/PTQwMA"
                                        alt="University Logo" class="w-32 h-32 rounded-lg object-cover">
                                </div>

                                <div class="flex-1">
                                    <!-- School Name (Clickable) -->
                                    <h2 class="text-xl font-bold mb-2 flex justify-between">
                                        <span class="text-gray-900 hover:text-red-600 hover:underline cursor-pointer">
                                            University of Arizona
                                        </span>
                                    </h2>

                                    <!-- Institution Type Tags -->
                                    <div class="flex flex-wrap gap-2 mb-2">
                                        <span class="px-2 py-1 bg-blue-100 text-blue-600 rounded text-xs font-medium">Joint Program</span>
                                    </div>

                                    <!-- Program Duration -->
                                    <p class="text-sm text-gray-500 mb-1">Duration: 4 years</p>

                                    <!-- Scholarship Name Dropdown -->
                                    <div class="flex flex-wrap gap-4 mb-3">
                                        <div class="flex-1 max-w-[200px]">
                                            <label class="text-sm text-gray-600 mb-1 block">Program Name</label>
                                            <div class="relative">
                                                <select id="joint-program-selector" class="appearance-none bg-white border border-gray-300 rounded-lg px-3 py-2 pr-8 text-sm focus:outline-none focus:ring-2 focus:ring-red-500 w-full" onchange="updateJointProgramContent(this.value)">
                                                    <option value="1plus3">1+3 Program</option>
                                                    <option value="2plus2">2+2 Program</option>
                                                    <option value="joint-mba">Joint MBA Program</option>
                                                </select>
                                                <i data-lucide="chevron-down" class="absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none"></i>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Intake Period Dropdown -->
                                    <div class="flex items-center gap-4 mb-4">
                                        <!-- Action Buttons -->
                                        <div class="flex items-center gap-3">
                                            <button class="text-red-600 hover:text-red-700 flex items-center text-sm font-medium">
                                                <i data-lucide="heart" class="w-4 h-4 mr-1"></i>
                                                Add to Favorites
                                            </button>
                                            <button class="text-white px-4 py-2 rounded-lg text-sm font-medium" style="background-color: #d82128;" onmouseover="this.style.opacity='0.9'" onmouseout="this.style.opacity='1'">
                                                Apply Now
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Tabbed Information Section -->
                            <div class="border-t pt-4">
                                <div class="flex border-b mb-4">
                                    <button class="tab-btn px-4 py-2 text-sm font-medium text-red-600 border-b-2 border-red-600" data-tab="about"    data-card="joint-1">About Joint Program</button>
                                    <button class="tab-btn px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-700" data-tab="fees"          data-card="joint-1">Fees</button>
                                    <button class="tab-btn px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-700" data-tab="requirements"  data-card="joint-1">Requirements</button>
                                    <button class="tab-btn px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-700" data-tab="course-detail" data-card="joint-1">Course Detail</button>
                                </div>

                                <!-- About Tab Content -->
                                <div class="tab-content" data-tab="about" data-card="joint-1">
                                    <div class="space-y-4" id="about-joint-program-content">
                                        <!-- Content will be dynamically updated based on program selection -->
                                    </div>
                                </div>

                                <!-- Fees Tab Content -->
                                <div class="tab-content hidden" data-tab="fees" data-card="joint-1">
                                    <div class="space-y-4">
                                        <div class="flex justify-between items-center">
                                            <span class="text-gray-600">Application Fee</span>
                                            <span class="font-semibold">$0 - $100</span>
                                        </div>
                                        <div class="flex justify-between items-center">
                                            <span class="text-gray-600">Tuition (per year)</span>
                                            <span class="font-semibold">$15,000 - $25,000</span>
                                        </div>
                                        <div class="flex justify-between items-center">
                                            <span class="text-gray-600">Books & Supplies</span>
                                            <span class="font-semibold">$500 - $1,000</span>
                                        </div>
                                        <hr class="my-4">
                                        <div class="flex justify-between items-center text-red-600">
                                            <span>Scholarship up to $20,000</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- Requirements Tab Content -->
                                <div class="tab-content hidden" data-tab="requirements" data-card="joint-1">
                                    <div class="space-y-4">
                                        <div class="bg-white rounded-lg p-4 border">
                                            <h4 class="font-semibold mb-2 text-black">Academic Requirements</h4>
                                            <ul class="list-disc list-inside text-sm text-gray-700 space-y-1">
                                                <li>High school diploma or equivalent</li>
                                                <li>Minimum GPA of 3.0/4.0 or equivalent</li>
                                                <li>English language proficiency test scores</li>
                                            </ul>
                                        </div>
                                        <div class="bg-white rounded-lg p-4 border">
                                            <h4 class="font-semibold mb-2 text-black">Language Requirements</h4>
                                            <ul class="list-disc list-inside text-sm text-gray-700 space-y-1">
                                                <li>IELTS: 6.0 overall (no band below 5.5)</li>
                                                <li>TOEFL iBT: 80 overall</li>
                                                <li>Duolingo: 100 overall</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>

                                <!-- Course Detail Tab Content -->
                                <div class="tab-content hidden" data-tab="course-detail" data-card="joint-1">
                                    <div class="space-y-4">
                                        <div>
                                            <h4 class="font-semibold mb-2">Program Overview</h4>
                                            <p class="text-gray-600 text-sm leading-relaxed">
                                                This joint program offers students the opportunity to study at multiple international campuses and earn dual degrees from prestigious institutions worldwide. The program is designed to provide a global perspective and cross-cultural experience.
                                            </p>
                                        </div>
                                        <div>
                                            <h4 class="font-semibold mb-2">Program Benefits</h4>
                                            <ul class="list-disc list-inside text-sm text-gray-600 space-y-1">
                                                <li>Study at multiple international campuses</li>
                                                <li>Earn dual degrees from partner institutions</li>
                                                <li>Global networking opportunities</li>
                                                <li>Internship and career placement support</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `;

                        // Add the card to the results section
                        resultsSection.appendChild(card);

                        // Initialize Lucide icons for the new card
                        lucide.createIcons({ icons: lucide.icons });

                        // Add tab click handlers
                        const tabButtons = card.querySelectorAll('.tab-btn');
                        tabButtons.forEach(btn => {
                            btn.addEventListener('click', function () {
                                // Get the tab ID and card ID
                                const tabId = this.getAttribute('data-tab');
                                const cardId = this.getAttribute('data-card');

                                // Update active tab
                                tabButtons.forEach(tb => {
                                    tb.classList.remove('text-red-600', 'border-b-2', 'border-red-600');
                                    tb.classList.add('text-gray-500', 'hover:text-gray-700');
                                });

                                // Set active state for clicked tab
                                this.classList.remove('text-gray-500', 'hover:text-gray-700');
                                this.classList.add('text-red-600', 'border-b-2', 'border-red-600');

                                // Update tab content visibility

                                // Hide all tab contents for this card
                                const allTabContents = card.querySelectorAll(`.tab-content[data-card="${cardId}"]`);
                                allTabContents.forEach(content => {
                                    content.classList.add('hidden');
                                });

                                // Show the selected tab content
                                const selectedTab = card.querySelector(`.tab-content[data-tab="${tabId}"][data-card="${cardId}"]`);
                                if (selectedTab) {
                                    selectedTab.classList.remove('hidden');
                                }
                            });
                        });

                        // Initialize Lucide icons again in case any were added dynamically

                        // Initialize the about content with the default selected program
                        updateJointProgramContent('1plus3');
                    }

                    // Function to update joint program content based on selection
                    function updateJointProgramContent(programType) {
                        const contentElement = document.getElementById('about-joint-program-content');
                        let content = '';

                        switch (programType) {
                            case '1plus3':
                                content = `
                                    <p class="text-gray-600 text-sm mb-4">
                                        The 1+3 Joint Program allows students to complete 1 year of study at our partner institution 
                                        followed by 3 years at the main university. This program is designed to provide a smooth 
                                        transition and strong academic foundation.
                                    </p>
                                    <ul class="list-disc list-inside text-sm text-gray-600 space-y-1">
                                        <li>Smaller class sizes in the first year</li>
                                        <li>Guaranteed progression to the main university</li>
                                        <li>Dedicated academic support throughout the program</li>
                                        <li>Cost-effective pathway to a prestigious degree</li>
                                    </ul>
                                    
                                    <div class="space-y-6">
                                        <!-- Partner 1 -->
                                        <div class="border rounded-lg p-4">
                                            <div class="flex items-center space-x-4 mb-3">
                                                <img src="https://imgs.search.brave.com/LzFUwshySKsFp4T90sgO5MCOLIsSO7ygf0LDe8hdJcw/rs:fit:500:0:1:0/g:ce/aHR0cHM6Ly92bnVy/LnZuL3dwLWNvbnRl/bnQvdXBsb2Fkcy8y/MDIzLzAxLzMuREhR/Ry1IQ00uanBlZw" alt="VNU-HCM Logo" class="h-16 w-16 object-contain">
                                                <div>
                                                    <h5 class="font-semibold">Vietnam National University - Ho Chi Minh City (VNU-HCM)</h5>
                                                    <p class="text-sm text-gray-600">1+3 Undergraduate Transfer Program</p>
                                                </div>
                                            </div>
                                            <div class="text-sm text-gray-600">
                                                <p class="font-medium">Collaborative Programs:</p>
                                                <ul class="list-disc list-inside pl-2 mt-1">
                                                    <li>Computer Science</li>
                                                    <li>Business Administration</li>
                                                    <li>Environmental Science</li>
                                                    <li>Biotechnology</li>
                                                </ul>
                                            </div>
                                        </div>
                                        
                                        <!-- Partner 2 -->
                                        <div class="border rounded-lg p-4">
                                            <div class="flex items-center space-x-4 mb-3">
                                                <img src="https://imgs.search.brave.com/oHTLDlzkWkD1mV3-qMtAdy6V_oKl6P8FUpoUv6Lqqwc/rs:fit:500:0:0:0/g:ce/aHR0cHM6Ly91cGxv/YWQud2lraW1lZGlh/Lm9yZy93aWtpcGVk/aWEvZW4vdGh1bWIv/OC84ZS8lQzQlOTAl/RTElQkElQTFpX2gl/RTElQkIlOERjX0Il/QzMlQTFjaF9raG9h/X0glQzMlQTBfTiVF/MSVCQiU5OWlfJTI4/bG9nbyUyOS5wbmcv/NTEycHgtJUM0JTkw/JUUxJUJBJUExaV9o/JUUxJUJCJThEY19C/JUMzJUExY2hfa2hv/YV9IJUMzJUEwX04l/RTElQkIlOTlpXyUy/OGxvZ28lMjkucG5n" alt="HUST Logo" class="h-16 w-16 object-contain">
                                                <div>
                                                    <h5 class="font-semibold">Hanoi University of Science and Technology (HUST)</h5>
                                                    <p class="text-sm text-gray-600">1+3 Engineering Pathway</p>
                                                </div>
                                            </div>
                                            <div class="text-sm text-gray-600">
                                                <p class="font-medium">Collaborative Programs:</p>
                                                <ul class="list-disc list-inside pl-2 mt-1">
                                                    <li>Mechanical Engineering</li>
                                                    <li>Electrical Engineering</li>
                                                    <li>Computer Engineering</li>
                                                    <li>Civil Engineering</li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                `;
                                break;

                            case '2plus2':
                                content = `
                                    <p class="text-gray-600 text-sm mb-4">
                                        The 2+2 Joint Program offers students the opportunity to complete 2 years at our partner 
                                        institution and then transfer to complete their final 2 years at the main university campus.
                                    </p>
                                    <ul class="list-disc list-inside text-sm text-gray-600 space-y-1">
                                        <li>Lower tuition costs for the first two years</li>
                                        <li>Seamless credit transfer process</li>
                                        <li>Same degree as traditional 4-year students</li>
                                        <li>Smaller class sizes in foundation years</li>
                                    </ul>
                                    
                                    <div class="space-y-6">
                                        <!-- Partner 1 -->
                                        <div class="border rounded-lg p-4">
                                            <div class="flex items-center space-x-4 mb-3">
                                                <img src="https://imgs.search.brave.com/2QSvz6YPX9HJCdBAE6BvPz4MJqw7zNp1pKo2mhzQKB4/rs:fit:500:0:0:0/g:ce/aHR0cHM6Ly91cGxv/YWQud2lraW1lZGlh/Lm9yZy93aWtpcGVk/aWEvZW4vdGh1bWIv/OC84Ni9Mb2dvLU5F/VS1WaWV0bmFtLmpw/Zy81MTJweC1Mb2dv/LU5FVS1WaWV0bmFt/LmpwZw" alt="NEU Logo" class="h-16 w-16 object-contain">
                                                <div>
                                                    <h5 class="font-semibold">National Economics University (NEU)</h5>
                                                    <p class="text-sm text-gray-600">2+2 Business Administration Program</p>
                                                </div>
                                            </div>
                                            <div class="text-sm text-gray-600">
                                                <p class="font-medium">Collaborative Programs:</p>
                                                <ul class="list-disc list-inside pl-2 mt-1">
                                                    <li>International Business</li>
                                                    <li>Finance & Banking</li>
                                                    <li>Marketing</li>
                                                    <li>Accounting</li>
                                                </ul>
                                            </div>
                                        </div>
                                        
                                        <!-- Partner 2 -->
                                        <div class="border rounded-lg p-4">
                                            <div class="flex items-center space-x-4 mb-3">
                                                <img src="https://imgs.search.brave.com/_RfohASZdv_ebHGXGiyQORrTpA_7ly3Lrf2EEJvh-ys/rs:fit:500:0:0:0/g:ce/aHR0cHM6Ly91cGxv/YWQud2lraW1lZGlh/Lm9yZy93aWtpcGVk/aWEvZW4vdGh1bWIv/Yy9jYi9Gb3JlaWdu/X1RyYWRlX1VuaXZl/cnNpdHlfbG9nby5q/cGcvNTEycHgtRm9y/ZWlnbl9UcmFkZV9V/bml2ZXJzaXR5X2xv/Z28uanBn" alt="FTU Logo" class="h-16 w-16 object-contain">
                                                <div>
                                                    <h5 class="font-semibold">Foreign Trade University (FTU)</h5>
                                                    <p class="text-sm text-gray-600">2+2 International Business Program</p>
                                                </div>
                                            </div>
                                            <div class="text-sm text-gray-600">
                                                <p class="font-medium">Collaborative Programs:</p>
                                                <ul class="list-disc list-inside pl-2 mt-1">
                                                    <li>International Business</li>
                                                    <li>Global Supply Chain Management</li>
                                                    <li>International Economics</li>
                                                    <li>Business Analytics</li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                `;
                                break;

                            case 'joint-mba':
                                content = `
                                    <p class="text-gray-600 text-sm mb-4">
                                        Our Joint MBA Program is designed for ambitious professionals looking to gain international 
                                        business experience. Study at both our partner institution and main campus while earning 
                                        a globally recognized MBA degree.
                                    </p>
                                    <ul class="list-disc list-inside text-sm text-gray-600 space-y-1">
                                        <li>International business exposure</li>
                                        <li>Dual-country learning experience</li>
                                        <li>Expanded professional network</li>
                                        <li>Specialized career services</li>
                                        <li>Access to alumni networks of both institutions</li>
                                    </ul>
                                    
                                    <div class="space-y-6">
                                        <!-- Partner 1 -->
                                        <div class="border rounded-lg p-4">
                                            <div class="flex items-center space-x-4 mb-3">
                                                <img src="https://imgs.search.brave.com/8IkySljQE6NyQ6pqJjVOdFRSGthNeZevdBVNY6L4Mmo/rs:fit:500:0:0:0/g:ce/aHR0cHM6Ly91cGxv/YWQud2lraW1lZGlh/Lm9yZy93aWtpcGVk/aWEvY29tbW9ucy90/aHVtYi83LzcxL0xv/Z29fVUVIX3hhbmgu/cG5nLzUxMnB4LUxv/Z29fVUVIX3hhbmgu/cG5n" alt="UEH Logo" class="h-16 w-16 object-contain">
                                                <div>
                                                    <h5 class="font-semibold">University of Economics Ho Chi Minh City (UEH)</h5>
                                                    <p class="text-sm text-gray-600">Executive MBA Program</p>
                                                </div>
                                            </div>
                                            <div class="text-sm text-gray-600">
                                                <p class="font-medium">Collaborative Programs:</p>
                                                <ul class="list-disc list-inside pl-2 mt-1">
                                                    <li>Global Executive MBA</li>
                                                    <li>Finance and Banking</li>
                                                    <li>Strategic Management</li>
                                                    <li>International Business</li>
                                                </ul>
                                            </div>
                                        </div>
                                        
                                        <!-- Partner 2 -->
                                        <div class="border rounded-lg p-4">
                                            <div class="flex items-center space-x-4 mb-3">
                                                <img src="https://imgs.search.brave.com/Rw8aOu_fYMkyMt6imQ1Ef4UAYO5_yrJnOr1aesoTYGA/rs:fit:500:0:0:0/g:ce/aHR0cHM6Ly91cGxv/YWQud2lraW1lZGlh/Lm9yZy93aWtpcGVk/aWEvY29tbW9ucy90/aHVtYi8yLzJmL0xv/Z29fZnB0X3VuaXZl/cnNpdHkuanBnLzI1/MHB4LUxvZ29fZnB0/X3VuaXZlcnNpdHku/anBn" alt="FPT University Logo" class="h-16 w-16 object-contain">
                                                <div>
                                                    <h5 class="font-semibold">FPT University</h5>
                                                    <p class="text-sm text-gray-600">Technology Management MBA</p>
                                                </div>
                                            </div>
                                            <div class="text-sm text-gray-600">
                                                <p class="font-medium">Collaborative Programs:</p>
                                                <ul class="list-disc list-inside pl-2 mt-1">
                                                    <li>Technology Management</li>
                                                    <li>Digital Transformation</li>
                                                    <li>Innovation & Entrepreneurship</li>
                                                    <li>Data Analytics for Business</li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                `;
                                break;
                        }

                        if (contentElement) {
                            contentElement.innerHTML = content;
                        }

                        // Initialize Lucide icons in case any were added dynamically
                        lucide.createIcons();
                    }
                </script>
            </div>
        </div>
    </div>
    <script>
        // View Toggle Functionality
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM fully loaded, initializing view toggle...');
            
            // Get view toggle buttons
            const listViewBtn = document.getElementById('listViewBtn');
            const cardViewBtn = document.getElementById('cardViewBtn');
            
            // Get view containers
            const listViewContainer = document.getElementById('listViewContainer');
            
            // Get the card view container - using a more reliable selector
            // Find the parent of the first card element
            const firstCard = document.querySelector('.program-card');
            const cardViewContainer = firstCard ? firstCard.parentElement : null;
            
            console.log('Elements found:', {
                listViewBtn: !!listViewBtn,
                cardViewBtn: !!cardViewBtn,
                listViewContainer: !!listViewContainer,
                cardViewContainer: !!cardViewContainer
            });

            function setCardView() {
                console.log('Setting card view...');
                try {
                    if (cardViewContainer) {
                        cardViewContainer.style.display = 'block';
                        console.log('Card view container shown');
                    }
                    if (listViewContainer) {
                        listViewContainer.style.display = 'none';
                        console.log('List view container hidden');
                    }

                    // Update active button state
                    if (cardViewBtn && listViewBtn) {
                        cardViewBtn.classList.remove('bg-gray-200', 'text-gray-600');
                        cardViewBtn.classList.add('bg-red-600', 'text-white');
                        listViewBtn.classList.remove('bg-red-600', 'text-white');
                        listViewBtn.classList.add('bg-gray-200', 'text-gray-600');
                        console.log('Button states updated for card view');
                    }

                    localStorage.setItem('programView', 'card');
                    console.log('Card view set in localStorage');
                } catch (error) {
                    console.error('Error in setCardView:', error);
                }
            }

            function setListView() {
                console.log('Setting list view...');
                try {
                    if (cardViewContainer) {
                        cardViewContainer.style.display = 'none';
                        console.log('Card view container hidden');
                    }
                    if (listViewContainer) {
                        listViewContainer.style.display = 'block';
                        console.log('List view container shown');
                    }

                    // Update active button state
                    if (listViewBtn && cardViewBtn) {
                        listViewBtn.classList.remove('bg-gray-200', 'text-gray-600');
                        listViewBtn.classList.add('bg-red-600', 'text-white');
                        cardViewBtn.classList.remove('bg-red-600', 'text-white');
                        cardViewBtn.classList.add('bg-gray-200', 'text-gray-600');
                        console.log('Button states updated for list view');
                    }

                    localStorage.setItem('programView', 'list');
                    console.log('List view set in localStorage');
                } catch (error) {
                    console.error('Error in setListView:', error);
                }
            }

            // Initialize view toggle functionality
            function initViewToggle() {
                // Add event listeners with error handling
                if (listViewBtn) {
                    listViewBtn.addEventListener('click', setListView);
                    console.log('Added click listener to list view button');
                } else {
                    console.warn('List view button not found');
                }

                if (cardViewBtn) {
                    cardViewBtn.addEventListener('click', setCardView);
                    console.log('Added click listener to card view button');
                } else {
                    console.warn('Card view button not found');
                }

                // Set initial view to list by default
                const savedView = localStorage.getItem('programView') || 'list';
                console.log('Saved view from localStorage:', savedView);
                
                // Use requestAnimationFrame to ensure DOM is ready
                requestAnimationFrame(() => {
                    try {
                        if (savedView === 'list') {
                            setListView();
                        } else {
                            setCardView();
                        }
                        console.log('Initial view set to:', savedView);
                    } catch (error) {
                        console.error('Error setting initial view:', error);
                    }
                });
            }

            // Initialize the view toggle with list view as default
            localStorage.setItem('programView', 'list');
            initViewToggle();
            
            // Initialize Lucide Icons for the list view
            lucide.createIcons({ icons: lucide.icons });

            // Function to toggle university group visibility
            const universityPopup = document.createElement('div');
            universityPopup.id = 'university-popup';
            universityPopup.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden';
            universityPopup.innerHTML = `
                <div class="bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto">
                    <div class="p-6">
                        <div class="flex justify-between items-start mb-4">
                            <h3 class="text-xl font-semibold text-gray-900" id="popup-university-name">University Name</h3>
                            <button onclick="document.getElementById('university-popup').classList.add('hidden')" class="text-gray-400 hover:text-gray-600">
                                <i data-lucide="x" class="w-6 h-6"></i>
                            </button>
                        </div>
                        <div class="grid grid-cols-2 gap-4 mb-4">
                            <div>
                                <p class="text-sm text-gray-500">Location</p>
                                <p id="popup-location" class="font-medium">City, Country</p>
                            </div>
                            <div>
                                <p class="text-sm text-gray-500">Established</p>
                                <p id="popup-established" class="font-medium">Year</p>
                            </div>
                            <div>
                                <p class="text-sm text-gray-500">Students</p>
                                <p id="popup-students" class="font-medium">Number</p>
                            </div>
                            <div>
                                <p class="text-sm text-gray-500">Ranking</p>
                                <p id="popup-ranking" class="font-medium">Global Rank</p>
                            </div>
                        </div>
                        <div class="mb-4">
                            <h4 class="font-medium mb-2">About</h4>
                            <p id="popup-about" class="text-gray-600 text-sm">University description will appear here.</p>
                        </div>
                        <div class="flex justify-end space-x-3 mt-6">
                            <button onclick="document.getElementById('university-popup').classList.add('hidden')" class="px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50">
                                Close
                            </button>
                            <button class="px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700">
                                View Programs
                            </button>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(universityPopup);
            lucide.createIcons();

            // University data (you can replace this with actual data from your backend)
            const universitiesData = {
                'ucb': {
                    name: 'University of California, Berkeley',
                    location: 'Berkeley, CA, USA',
                    established: '1868',
                    students: '45,000+',
                    ranking: '#4 in National Universities (U.S. News 2023)',
                    about: 'The University of California, Berkeley is a public land-grant research university in Berkeley, California. Established in 1868 as the state\'s first land-grant university, it was the first campus of the University of California system.'
                },
                'tiffin': {
                    name: 'Tiffin University',
                    location: 'Tiffin, OH, USA',
                    established: '1888',
                    students: '3,000+',
                    ranking: '#1 in Ohio for Online Bachelor\'s Programs',
                    about: 'Tiffin University is a private university in Tiffin, Ohio. It offers undergraduate and graduate degree programs in various fields including business, criminal justice, and the arts and sciences.'
                },
                'arizona': {
                    name: 'University of Arizona',
                    location: 'Tucson, AZ, USA',
                    established: '1885',
                    students: '49,000+',
                    ranking: '#103 in National Universities (U.S. News 2023)',
                    about: 'The University of Arizona is a public research university in Tucson, Arizona. Founded in 1885, it was the first university in the Arizona Territory.'
                },
                'angelo': {
                    name: 'Angelo State University',
                    location: 'San Angelo, TX, USA',
                    established: '1928',
                    students: '10,000+',
                    ranking: '#1 in Texas for Best Value',
                    about: 'Angelo State University is a public university in San Angelo, Texas. It was founded in 1928 as a community college and became a four-year institution in 1965.'
                }
            };

            function toggleUniversityGroup(universityId, event) {
                // Only handle clicks on the icon or the image
                if (event && !event.target.closest('i') && !event.target.matches('img')) {
                    return;
                }
                
                // Original toggle functionality for the icon
                if (event) {
                    event.stopPropagation();
                }
                
                const icon = document.getElementById(`${universityId}-icon`);
                const programRows = document.querySelectorAll(`.${universityId}-programs`);
                const isExpanded = icon.getAttribute('data-lucide') === 'minus';
                
                // Toggle icon
                if (isExpanded) {
                    icon.setAttribute('data-lucide', 'plus');
                    lucide.createIcons({ icons: lucide.icons });
                } else {
                    icon.setAttribute('data-lucide', 'minus');
                    lucide.createIcons({ icons: lucide.icons });
                }
                
                // Toggle program rows
                programRows.forEach(row => {
                    row.classList.toggle('hidden');
                });
            }
            
            // Initialize all university groups as expanded by default
            document.addEventListener('DOMContentLoaded', function() {
                // Get all university group headers
                const universityGroups = document.querySelectorAll('.university-group-header');
                
                // Set all groups to be expanded by default
                universityGroups.forEach(group => {
                    const groupId = group.getAttribute('onclick').match(/'([^']+)'/)[1];
                    const icon = document.getElementById(`${groupId}-icon`);
                    if (icon) {
                        icon.setAttribute('data-lucide', 'minus');
                        lucide.createIcons({ icons: lucide.icons });
                    }
                    
                    // Show all program rows by default
                    const programRows = document.querySelectorAll(`.${groupId}-programs`);
                    programRows.forEach(row => {
                        row.classList.remove('hidden');
                    });
                });
                
                // Re-initialize icons after showing all rows
                lucide.createIcons({ icons: lucide.icons });
            });
            
            // Function to show program details in modal
            function showProgramDetails(programId) {
                // This would be connected to your existing modal functionality
                console.log('Viewing program details for:', programId);
                // Example: document.getElementById('programModal').classList.remove('hidden');
            }
            
            // Force list view on initial load
            document.addEventListener('DOMContentLoaded', function() {
                const listViewBtn = document.getElementById('listViewBtn');
                if (listViewBtn) listViewBtn.click();
            });
            
            // Initialize popup close buttons
            const closeButtons = document.querySelectorAll('.close-popup');
            closeButtons.forEach(button => {
                button.addEventListener('click', function() {
                    document.getElementById('university-popup').classList.add('hidden');
                });
            });
        });
        
        // Global function to show university popup
        function showUniversityPopup(universityId, event) {
            event.stopPropagation();
            event.preventDefault();
            
            // Get university data
            const universitiesData = {
                'ucb': {
                    name: 'University of California, Berkeley',
                    location: 'Berkeley, CA, USA',
                    established: '1868',
                    students: '45,000+',
                    ranking: '#4 in National Universities',
                    about: 'The University of California, Berkeley is a public research university in Berkeley, California. Founded in 1868, it is the flagship institution of the ten research universities affiliated with the University of California system.'
                },
                'tiffin': {
                    name: 'Tiffin University',
                    location: 'Tiffin, OH, USA',
                    established: '1888',
                    students: '2,500+',
                    ranking: '#1 in Top Performers on Social Mobility',
                    about: 'Tiffin University is a private university in Tiffin, Ohio. It offers undergraduate and graduate degrees in business, arts, sciences, and education.'
                },
                'arizona': {
                    name: 'University of Arizona',
                    location: 'Tucson, AZ, USA',
                    established: '1885',
                    students: '45,600+',
                    ranking: '#97 in National Universities',
                    about: 'The University of Arizona is a public research university in Tucson, Arizona. Founded in 1885, it was the first university in the Arizona Territory.',
                    hasJointProgram: true
                },
                'angelo': {
                    name: 'Angelo State University',
                    location: 'San Angelo, TX, USA',
                    established: '1928',
                    students: '10,500+',
                    ranking: '#331-440 in National Universities',
                    about: 'Angelo State University is a public university in San Angelo, Texas. It offers undergraduate and graduate degrees in various fields including business, education, and health sciences.',
                    hasJointProgram: true
                }
            };
            
            const university = universitiesData[universityId] || {
                name: universityId,
                location: 'Not available',
                established: 'Not available',
                students: 'Not available',
                ranking: 'Not ranked',
                about: 'No information available.'
            };
            
            // Update popup content
            document.getElementById('popup-university-name').textContent = university.name;
            document.getElementById('popup-location').textContent = university.location;
            document.getElementById('popup-established').textContent = university.established;
            document.getElementById('popup-students').textContent = university.students;
            document.getElementById('popup-ranking').textContent = university.ranking;
            document.getElementById('popup-about').textContent = university.about;
            
            // Show/hide joint program tab based on university
            const jointProgramTab = document.getElementById('joint-program-tab');
            if (jointProgramTab) {
                if (university.hasJointProgram) {
                    jointProgramTab.classList.remove('hidden');
                    // Make it the first tab
                    jointProgramTab.parentNode.insertBefore(jointProgramTab, jointProgramTab.parentNode.firstChild);
                    // Activate the joint program tab by default for these universities
                    jointProgramTab.click();
                } else {
                    jointProgramTab.classList.add('hidden');
                }
            }
            
            // Show popup
            document.getElementById('university-popup').classList.remove('hidden');
        }
    </script>

    <!-- University Details Popup -->
    <div id="university-popup" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto">
            <div class="p-6">
                <div class="flex justify-between items-start mb-4">
                    <h3 class="text-xl font-semibold text-gray-900" id="popup-university-name">University Name</h3>
                    <button onclick="document.getElementById('university-popup').classList.add('hidden')" class="text-gray-400 hover:text-gray-600">
                        <i data-lucide="x" class="w-6 h-6"></i>
                    </button>
                </div>
                <div class="grid grid-cols-2 gap-4 mb-4">
                    <div>
                        <p class="text-sm text-gray-500">Location</p>
                        <p id="popup-location" class="font-medium">City, Country</p>
                    </div>
                    <div>
                        <p class="text-sm text-gray-500">Established</p>
                        <p id="popup-established" class="font-medium">Year</p>
                    </div>
                    <div>
                        <p class="text-sm text-gray-500">Students</p>
                        <p id="popup-students" class="font-medium">Number</p>
                    </div>
                    <div>
                        <p class="text-sm text-gray-500">Ranking</p>
                        <p id="popup-ranking" class="font-medium">Global Rank</p>
                    </div>
                </div>
                <div class="mb-4">
                    <h4 class="font-medium mb-2">About</h4>
                    <p id="popup-about" class="text-gray-600 text-sm mb-4">University description will appear here.</p>
                    
                    <!-- Scholarship Dropdown -->
                    <div class="mb-4">
                        <label for="scholarship-select" class="block text-sm font-medium text-gray-700 mb-1">Select Scholarship</label>
                        <select id="scholarship-select" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500">
                            <option value="">-- Select a scholarship --</option>
                        </select>
                    </div>
                    
                    <!-- Tabs -->
                    <div class="border-b border-gray-200 mb-4">
                        <nav class="flex space-x-4 overflow-x-auto" aria-label="Tabs">
                            <!-- Joint Program Tab (only for Angelo State and U of Arizona) -->
                            <button id="joint-program-tab" class="tab-button border-b-2 border-transparent py-2 px-1 text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300 whitespace-nowrap hidden" data-tab="joint-program">
                                <i data-lucide="handshake" class="w-4 h-4 inline-block mr-1"></i> About Joint Program
                            </button>
                            <button class="tab-button border-b-2 border-transparent py-2 px-1 text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300 whitespace-nowrap" data-tab="fee">
                                <i data-lucide="dollar-sign" class="w-4 h-4 inline-block mr-1"></i> Fee
                            </button>
                            <button class="tab-button border-b-2 border-transparent py-2 px-1 text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300 whitespace-nowrap" data-tab="requirement">
                                <i data-lucide="clipboard-list" class="w-4 h-4 inline-block mr-1"></i> Requirement
                            </button>
                            <button class="tab-button border-b-2 border-transparent py-2 px-1 text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300 whitespace-nowrap" data-tab="course-detail">
                                <i data-lucide="book-open" class="w-4 h-4 inline-block mr-1"></i> Course Detail
                            </button>
                        </nav>
                    </div>
                    
                    <!-- Tab Content -->
                    <div id="tab-content" class="min-h-[200px] p-4 bg-gray-50 rounded-lg">
                        <div class="text-center text-gray-500 py-8">
                            <i data-lucide="award" class="w-8 h-8 mx-auto mb-2 text-gray-400"></i>
                            <p>Please select a scholarship to view details</p>
                        </div>
                    </div>
                </div>
                
                <div class="flex justify-end space-x-3 mt-6">
                    <button onclick="document.getElementById('university-popup').classList.add('hidden')" class="px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50">
                        Close
                    </button>
                    <button class="px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700">
                        Apply Now
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Initialize Lucide Icons -->
    <script>
        // Tab content templates for scholarship details
        const tabTemplates = {
            'fee': (scholarship) => {
                const data = scholarshipData[scholarship.type.toLowerCase()] || {};
                return `
                    <div class="space-y-4">
                        <div class="bg-white p-4 rounded-lg border">
                            <h4 class="font-semibold mb-2">Scholarship Value</h4>
                            <p class="text-2xl font-bold text-red-600">${data.scholarshipDiscount || 'Varies'}</p>
                            <p class="text-sm text-gray-500 mt-1">Award Type: ${scholarship.type}</p>
                        </div>
                        <div class="bg-white p-4 rounded-lg border">
                            <h4 class="font-semibold mb-2">Additional Fees</h4>
                            <div class="space-y-2">
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Application Fee</span>
                                    <span class="font-medium">${data.applicationFee || '$50 - $100'}</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Tuition (per year)</span>
                                    <span class="font-medium">${data.tuitionFee || '$25,000 - $45,000'}</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Living Expenses</span>
                                    <span class="font-medium">${data.livingExpenses || '$12,000 - $18,000'}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            },
            'requirement': (scholarship) => {
                const data = scholarshipData[scholarship.type.toLowerCase()] || {};
                const requirements = data.requirements || {};
                return `
                    <div class="space-y-4">
                        <div class="bg-white p-4 rounded-lg border">
                            <h4 class="font-semibold mb-2">Academic Requirements</h4>
                            <ul class="list-disc pl-5 space-y-1 text-sm text-gray-700">
                                ${(requirements.academic || [
                                    'Minimum GPA: 3.0 on a 4.0 scale',
                                    'Official high school/college transcripts',
                                    'SAT/ACT scores (for undergrad)',
                                    'GRE/GMAT scores may be required for graduate programs'
                                ]).map(req => `<li>${req}</li>`).join('')}
                            </ul>
                        </div>
                        <div class="bg-white p-4 rounded-lg border">
                            <h4 class="font-semibold mb-2">Additional Requirements</h4>
                            <ul class="list-disc pl-5 space-y-1 text-sm text-gray-700">
                                ${(requirements.documents || [
                                    'Letter of recommendation (2-3 required)',
                                    'Personal statement or essay',
                                    'English proficiency test (TOEFL/IELTS) for international students',
                                    'Resume/CV (for graduate programs)'
                                ]).map(doc => `<li>${doc}</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                `;
            },
            'course-detail': (scholarship) => {
                const data = scholarshipData[scholarship.type.toLowerCase()] || {};
                const details = data.courseDetails || {};
                return `
                    <div class="space-y-4">
                        <div class="bg-white p-4 rounded-lg border">
                            <h4 class="font-semibold mb-2">Program Overview</h4>
                            <p class="text-sm text-gray-700 mb-3">${details.overview || 'This scholarship is available for various undergraduate and graduate programs.'}</p>
                            
                            <div class="space-y-3">
                                ${(details.coreCourses || [
                                    'Bachelor of Science in Computer Science',
                                    'Master of Business Administration (MBA)',
                                    'Bachelor of Arts in Psychology'
                                ]).map((course, index) => `
                                    <div class="p-3 bg-gray-50 rounded-lg">
                                        <h5 class="font-medium text-gray-900">${course}</h5>
                                        ${details[`courseDesc${index + 1}`] ? 
                                            `<p class="text-sm text-gray-600">${details[`courseDesc${index + 1}`]}</p>` : ''}
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                `;
            }
        };

        // Initialize Lucide Icons
        lucide.createIcons();
        
        // Function to show tab content
        function showTab(tabId, universityId, scholarshipId) {
            const tabContent = document.getElementById('tab-content');
            const select = document.getElementById('scholarship-select');
            const selectedOption = select?.options[select.selectedIndex];
            
            // Special handling for joint program tab
            if (tabId === 'joint-program') {
                const universityName = document.getElementById('popup-university-name').textContent;
                tabContent.innerHTML = `
                    <div class="space-y-4">
                        <div class="bg-white p-4 rounded-lg border">
                            <h4 class="font-semibold mb-3">About the Joint Program</h4>
                            <div class="prose prose-sm max-w-none">
                                <p class="text-gray-700 mb-4">
                                    ${universityName} offers an exclusive joint program that provides students with a unique opportunity to enhance their academic and professional journey. This program is designed to offer a seamless educational experience with the following benefits:
                                </p>
                                <ul class="list-disc pl-5 space-y-2 mb-4">
                                    <li>Dual degree opportunities with partner institutions</li>
                                    <li>Guaranteed admission pathways to select graduate programs</li>
                                    <li>Dedicated academic advising and support services</li>
                                    <li>Access to research opportunities and facilities at both institutions</li>
                                    <li>Scholarship opportunities specifically for joint program participants</li>
                                </ul>
                                <div class="bg-blue-50 p-4 rounded-lg border border-blue-100">
                                    <h5 class="font-medium text-blue-800 mb-2">Program Highlights</h5>
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div class="flex items-start">
                                            <i data-lucide="calendar" class="w-4 h-4 text-blue-600 mt-0.5 mr-2"></i>
                                            <div>
                                                <div class="font-medium text-sm">Program Duration</div>
                                                <div class="text-sm text-gray-600">4-5 years (varies by program)</div>
                                            </div>
                                        </div>
                                        <div class="flex items-start">
                                            <i data-lucide="award" class="w-4 h-4 text-blue-600 mt-0.5 mr-2"></i>
                                            <div>
                                                <div class="font-medium text-sm">Degrees Awarded</div>
                                                <div class="text-sm text-gray-600">Bachelor's + Master's</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="mt-6">
                                    <a href="#" class="inline-flex items-center text-red-600 hover:text-red-800 font-medium text-sm">
                                        Learn more about this program
                                        <i data-lucide="arrow-right" class="w-4 h-4 ml-1"></i>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                lucide.createIcons({ container: tabContent });
                return;
            }
            
            if (!selectedOption || !selectedOption.value) {
                tabContent.innerHTML = `
                    <div class="text-center text-gray-500 py-8">
                        <i data-lucide="award" class="w-8 h-8 mx-auto mb-2 text-gray-400"></i>
                        <p>Please select a scholarship to view details</p>
                    </div>
                `;
                lucide.createIcons({ container: tabContent });
                return;
            }
            
            const scholarship = {
                id: selectedOption.value,
                name: selectedOption.text,
                type: selectedOption.getAttribute('data-type') || 'Merit-based'
            };
            
            if (tabTemplates[tabId]) {
                tabContent.innerHTML = tabTemplates[tabId](scholarship);
                lucide.createIcons({ container: tabContent });
            }
        }
    </script>
</body>

</html>