<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Applications Manager - APPLYLEAD</title>
    <!-- Tailwind CSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Inter Font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
    </style>
</head>
<body class="bg-gray-50">
   <!-- Sidebar -->
   <aside class="fixed left-0 top-0 h-screen w-64 bg-white shadow-lg">
        <div class="p-6">
            <img src="../../ApplyLead_logo.png" alt="ApplyLead" class="h-9 mb-2">
            <span class="text-sm text-gray-500 bg-gray-100 px-2 py-1 rounded-full">Agent</span>
        </div>
    <nav class="mt">
        <a href="Agency-dashboard.html" class="flex items-center px-6 py-3 text-gray-700 hover:bg-gray-50">
            <i data-lucide="layout-dashboard" class="w-5 h-5 mr-3"></i>
            Dashboard
        </a>
        <a href="Agency-my-students.html" class="flex items-center px-6 py-3 text-gray-700 hover:bg-gray-50">
            <i data-lucide="users" class="w-5 h-5 mr-3"></i>
            My Students
        </a>
        <a href="#" class="flex items-center px-6 py-3 text-white" style="background-color: #d82128;">
            <i data-lucide="file-text" class="w-5 h-5 mr-3"></i>
            Applications
        </a>
        <a href="Agency-tasks.html" class="flex items-center px-6 py-3 text-gray-700 hover:bg-gray-50">
            <i data-lucide="check-square" class="w-5 h-5 mr-3"></i>
            Tasks
        </a>
        <a href="Agency-scholarships.html" class="flex items-center px-6 py-3 text-gray-700 hover:bg-gray-50">
            <i data-lucide="graduation-cap" class="w-5 h-5 mr-3"></i>
            Scholarships
        </a>
        <a href="Agency-commission.html" class="flex items-center px-6 py-3 text-gray-700 hover:bg-gray-50">
            <i data-lucide="dollar-sign" class="w-5 h-5 mr-3"></i>
            Commissions
        </a>
        <a href="Agency-profile.html" class="flex items-center px-6 py-3 text-gray-700 hover:bg-gray-50">
            <i data-lucide="settings" class="w-5 h-5 mr-3"></i>
            Account Settings
        </a>
        <a href="Agency-campaigns.html" class="flex items-center px-6 py-3 text-gray-700 hover:bg-gray-50">
            <i data-lucide="brick-wall-shield" class="w-5 h-5 mr-3"></i>
            Campaigns
        </a>
        <a href="Agency-messages.html" class="flex items-center px-6 py-3 text-gray-700 hover:bg-gray-50">
            <i data-lucide="message-circle" class="w-5 h-5 mr-3"></i>
            Messages
        </a>
        <a href="Agency-admin-management.html" class="flex items-center px-6 py-3 text-gray-700 hover:bg-gray-50">
            <i data-lucide="users-2" class="w-5 h-5 mr-3"></i>
            Team Management
        </a>
        <div class="mt-auto px-6 py-4 border-t border-gray-200">
            <p class="text-sm text-gray-600 text-center"> 2025 APPLYLEAD. All rights reserved.</p>
        </div>
    </nav>
</aside>

    <!-- Filter Drawer Backdrop -->
    <div id="filter-backdrop"
        class="fixed inset-0 bg-black bg-opacity-50 z-40 opacity-0 pointer-events-none transition-opacity duration-300">
    </div>

    <!-- Filter Drawer -->
    <aside id="filter-drawer"
        class="fixed top-0 right-0 h-full w-96 bg-white shadow-xl transform translate-x-full transition-transform duration-300 z-50 flex flex-col">
        <div class="flex items-center justify-between p-4 border-b">
            <h3 class="text-lg font-semibold">Filter Applications</h3>
            <button id="close-filter" class="text-gray-500 hover:text-gray-700">
                <i data-lucide="x" class="w-5 h-5"></i>
            </button>
        </div>

        <div class="flex-1 overflow-y-auto p-4 space-y-6">
            <!-- Status Filter -->
            <div>
                <h4 class="text-sm font-medium text-gray-700 mb-2">Status</h4>
                <select class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500">
                    <option>All Status</option>
                    <option>Initial Advising</option>
                    <option>Application In Progress</option>
                    <option>Submitted to School</option>
                    <option>School Response</option>
                    <option>Offer Letter Issued</option>
                    <option>Committed to School</option>
                    <option>Visa Application</option>
                    <option>Pre-departure</option>
                    <option>Arrival</option>
                </select>
            </div>

            <!-- Country Filter -->
            <div>
                <h4 class="text-sm font-medium text-gray-700 mb-2">Country</h4>
                <select class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500">
                    <option>All Countries</option>
                    <option>United States</option>
                    <option>United Kingdom</option>
                    <option>Canada</option>
                    <option>Viet Nam</option>
                    <option>Australia</option>
                </select>
            </div>

            <!-- Intake Filter -->
            <div>
                <h4 class="text-sm font-medium text-gray-700 mb-2">Intake</h4>
                <select class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500">
                    <option>All Intakes</option>
                    <option>Fall 2024</option>
                    <option>Spring 2025</option>
                    <option>Summer 2025</option>
                    <option>Fall 2025</option>
                </select>
            </div>
        </div>

        <!-- Drawer Footer -->
        <div class="p-4 border-t flex justify-end space-x-3">
            <button id="reset-filters"
                class="px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg">
                Reset
            </button>
            <button id="apply-filters"
                class="px-4 py-2 text-sm font-medium text-white rounded-lg transition-colors hover:opacity-90"
                style="background-color: #d82128;">
                Apply Filters
            </button>
        </div>
    </aside>

    <!-- Main Content -->
    <div class="ml-64">
        <!-- Top Bar -->
        <header class="h-16 bg-white shadow-sm flex items-center justify-between px-6">
            <h2 class="text-xl font-semibold text-gray-800">Applications</h2>
            <div class="flex items-center space-x-4">
                <button class="relative">
                    <i data-lucide="bell" class="w-6 h-6 text-gray-600"></i>
                    <span class="absolute top-0 right-0 w-2 h-2 bg-red-500 rounded-full"></span>
                </button>
                <!-- Profile Dropdown -->
                <div class="relative">
                    <button id="profile-menu" class="flex items-center space-x-2 p-2 hover:bg-gray-100 rounded-full">
                        <img src="https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=100&h=100&fit=crop"
                            alt="Profile" class="w-8 h-8 rounded-full object-cover">
                    </button>

                    <!-- Dropdown Menu -->
                    <div id="profile-dropdown"
                        class="hidden absolute right-0 mt-2 w-48 bg-white rounded-xl shadow-lg py-1 z-50">
                        <a href="Agency-profile.html" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                            <i data-lucide="settings" class="w-4 h-4 inline-block mr-2"></i> Settings
                        </a>
                        <a href="#" onclick="handleLogout()"
                            class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                            <i data-lucide="log-out" class="w-4 h-4 inline-block mr-2"></i> Logout
                        </a>
                    </div>
                </div>
            </div>
        </header>

        <!-- View Toggle Buttons -->
        <div class="mt-4 flex items-center justify-between px-6">
            <div class="flex-1 flex items-center space-x-2 max-w-3xl">
                <div class="relative w-full max-w-2xl">
                    <i data-lucide="search" class="w-5 h-5 text-gray-400 absolute left-3 top-1/2 -translate-y-1/2"></i>
                    <input id="student-search" type="text" placeholder="Search by student name or email"
                        class="w-full pl-10 pr-4 py-2 rounded-xl border border-gray-300 focus:ring-2 focus:ring-red-500 focus:border-red-500">
                </div>
                <button id="filter-toggle"
                    class="flex-shrink-0 flex items-center justify-center w-10 h-10 rounded-xl transition-colors hover:opacity-90"
                    style="background-color: #d82128;">
                    <i data-lucide="filter" class="w-4 h-4 text-white"></i>
                </button>
            </div>
            <div class="flex items-center justify-end gap-2">
                <button data-view="table" class="view-toggle px-3 py-2 text-sm font-medium rounded-lg bg-red-600 text-white">
                    <i data-lucide="list" class="w-4 h-4 inline-block mr-1"></i> Table
                </button>
                <button data-view="board" class="view-toggle px-3 py-2 text-sm font-medium rounded-lg bg-gray-100 text-gray-600 hover:bg-gray-200">
                    <i data-lucide="columns" class="w-4 h-4 inline-block mr-1"></i> Board
                </button>
            </div>
        </div>

    <!-- Application Detail Modal -->
    <div id="application-modal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50">
        <div class="relative top-20 mx-auto p-8 border-0 w-[800px] shadow-xl rounded-3xl bg-white">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-xl font-semibold text-gray-900">Application Details</h3>
                <button onclick="closeApplicationModal()" class="text-gray-400 hover:text-gray-500">
                    <i data-lucide="x" class="w-6 h-6"></i>
                </button>
            </div>

            <!-- Progress Tracker -->
            <div class="mb-6">
                <div class="flex items-center justify-between mb-4">
                    <h4 class="font-medium">Application Progress</h4>
                    <span class="text-sm" style="color: #d82128;">3/9 Steps Completed</span>
                </div>
                <!-- Progress Bar -->
                <div class="h-2 w-full bg-gray-200 rounded-full mb-4">
                    <div class="h-2 rounded-full" style="width: 60%; background-color: #d82128;"></div>
                </div>
                <!-- Step Checklist -->
                <div class="grid grid-cols-5 gap-4">
                    <!-- Step 1: Profile -->
                    <div class="text-center">
                        <div class="w-8 h-8 rounded-full bg-green-100 text-green-600 flex items-center justify-center mx-auto mb-2">
                            <i data-lucide="check" class="w-5 h-5"></i>
                        </div>
                        <p class="text-xs font-medium">Profile</p>
                    </div>
                    <!-- Step 2: Documents -->
                    <div class="text-center">
                        <div class="w-8 h-8 rounded-full bg-green-100 text-green-600 flex items-center justify-center mx-auto mb-2">
                            <i data-lucide="check" class="w-5 h-5"></i>
                        </div>
                        <p class="text-xs font-medium">Documents</p>
                    </div>
                    <!-- Step 3: Scholarship -->
                    <div class="text-center">
                        <div class="w-8 h-8 rounded-full bg-green-100 text-green-600 flex items-center justify-center mx-auto mb-2">
                            <i data-lucide="check" class="w-5 h-5"></i>
                        </div>
                        <p class="text-xs font-medium">Scholarship</p>
                    </div>
                    <!-- Step 4: Submission -->
                    <div class="text-center">
                        <div class="w-8 h-8 rounded-full bg-yellow-100 text-yellow-600 flex items-center justify-center mx-auto mb-2">
                            <i data-lucide="clock" class="w-5 h-5"></i>
                        </div>
                        <p class="text-xs font-medium">Submitted</p>
                    </div>
                    <!-- Step 5: Decision -->
                    <div class="text-center">
                        <div class="w-8 h-8 rounded-full bg-gray-100 text-gray-400 flex items-center justify-center mx-auto mb-2">
                            <i data-lucide="hourglass" class="w-5 h-5"></i>
                        </div>
                        <p class="text-xs font-medium text-gray-400">Decision</p>
                    </div>
                </div>
            </div>

            <!-- Application Info -->
            <div class="grid grid-cols-2 gap-6 mb-6">
                <div>
                    <h4 class="text-sm font-medium text-gray-500 mb-1">Student</h4>
                    <p id="modal-student-name" class="text-gray-900">Sarah Chen</p>
                </div>
                <div>
                    <h4 class="text-sm font-medium text-gray-500 mb-1">Scholarship</h4>
                    <p id="modal-program-name" class="text-gray-900">Merit Scholarship</p>
                </div>
                <div>
                    <h4 class="text-sm font-medium text-gray-500 mb-1">University</h4>
                    <p id="modal-university-name" class="text-gray-900">Tiffin University</p>
                </div>
                <div>
                    <h4 class="text-sm font-medium text-gray-500 mb-1">Status</h4>
                    <span id="modal-status-badge" class="whitespace-nowrap inline-flex items-center px-2 py-1 text-xs font-medium bg-yellow-100 text-yellow-800 rounded-full">Under Review</span>
                </div>
            </div>

            <!-- Timeline & Documents -->
            <div class="grid grid-cols-3 gap-6">
                <!-- Timeline -->
                <div class="col-span-2 space-y-4">
                    <h4 class="font-medium">Application Timeline</h4>
                    <div class="space-y-4">
                        <div class="flex items-start space-x-3">
                            <div class="flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center" style="background-color: #FEF2F2;">
                                <i data-lucide="file-text" class="w-4 h-4" style="color: #d82128;"></i>
                            </div>
                            <div>
                                <p class="text-sm font-medium">Application Submitted</p>
                                <p class="text-xs text-gray-500">All required documents uploaded</p>
                                <p class="text-xs text-gray-400">2 hours ago</p>
                            </div>
                        </div>
                        <div class="flex items-start space-x-3">
                            <div class="flex-shrink-0 w-8 h-8 rounded-full bg-green-100 flex items-center justify-center">
                                <i data-lucide="check" class="w-4 h-4 text-green-600"></i>
                            </div>
                            <div>
                                <p class="text-sm font-medium">Documents Verified</p>
                                <p class="text-xs text-gray-500">Initial verification complete</p>
                                <p class="text-xs text-gray-400">1 hour ago</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Documents -->
                <div>
                    <h4 class="font-medium mb-4">Documents</h4>
                    <div class="space-y-3">
                        <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                            <div class="flex items-center space-x-3">
                                <i data-lucide="file-text" class="w-4 h-4 text-gray-400"></i>
                                <span class="text-sm">Passport.pdf</span>
                            </div>
                            <button class="hover:opacity-80" style="color: #d82128;">View</button>
                        </div>
                        <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                            <div class="flex items-center space-x-3">
                                <i data-lucide="file-text" class="w-4 h-4 text-gray-400"></i>
                                <span class="text-sm">Transcript.pdf</span>
                            </div>
                            <button class="hover:opacity-80" style="color: #d82128;">View</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Automated Tasks -->
            <div class="mt-6">
                <h4 class="font-medium mb-3">System Generated Tasks</h4>
                <div class="space-y-3">
                    <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-200">
                        <div class="flex items-center space-x-3">
                            <div class="flex-shrink-0 w-8 h-8 rounded-full bg-yellow-100 flex items-center justify-center">
                                <i data-lucide="alert-circle" class="w-4 h-4 text-yellow-600"></i>
                            </div>
                            <div>
                                <p class="text-sm font-medium">Remind student to upload documents</p>
                                <p class="text-xs text-gray-500">System generated • Due in 2 days</p>
                            </div>
                        </div>
                        <button onclick="completeTask(1)" class="text-sm hover:opacity-80" style="color: #d82128;">Mark Complete</button>
                    </div>
                    <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-200">
                        <div class="flex items-center space-x-3">
                            <div class="flex-shrink-0 w-8 h-8 rounded-full bg-yellow-100 flex items-center justify-center">
                                <i data-lucide="check-circle" class="w-4 h-4 text-yellow-600"></i>
                            </div>
                            <div>
                                <p class="text-sm font-medium">Confirm scholarship selection with student</p>
                                <p class="text-xs text-gray-500">System generated • Due tomorrow</p>
                            </div>
                        </div>
                        <button onclick="completeTask(2)" class="text-sm hover:opacity-80" style="color: #d82128;">Mark Complete</button>
                    </div>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="mt-6 flex space-x-3">
                <button onclick="sendReminder()" class="flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50">
                    <i data-lucide="send" class="w-4 h-4"></i>
                    <span>Send Reminder</span>
                </button>
                <button onclick="uploadDocument()" class="flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50">
                    <i data-lucide="upload" class="w-4 h-4"></i>
                    <span>Upload Document</span>
                </button>
                <button onclick="addNote()" class="flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50">
                    <i data-lucide="message-square" class="w-4 h-4"></i>
                    <span>Add Note</span>
                </button>
            </div>
        </div>
    </div>

        <!-- Table View (existing) -->
        <div id="table-view" class="block">
        <div class="p-6">
            <div class="bg-white rounded-xl shadow-sm overflow-hidden">
                <table class="w-full">
                    <thead class="bg-gray-50 border-b border-gray-200">
                        <tr>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">UID</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Student Name</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Agent</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Scholarship Name</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Progress</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Country</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Last Update</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Documents</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-gray-200">
                        <!-- Sample Row 1 -->
                        <tr class="hover:bg-gray-50">
                            <td class="px-6 py-4">
                                <a href="Agent-Application-details.html" target="_blank" rel="noopener noreferrer" class="text-red-600 hover:text-red-800">FB-VNSG-SENSLSC100004</a>
                            </td>
                            <td class="px-6 py-4">
                                <a href="Agent-Application-details.html" target="_blank" rel="noopener noreferrer" class="text-red-600 hover:text-red-800">Sarah Chen</a>
                            </td>
                            <td class="px-6 py-4 text-sm text-gray-900">John Smith</td>
                            <td class="px-6 py-4">Merit Scholarship – Tiffin University</td>
                            <td class="px-6 py-4">
                                <div class="flex items-center space-x-2">
                                    <div class="flex-grow h-1.5 bg-gray-200 rounded-full overflow-hidden">
                                        <div class="h-full rounded-full" style="width: 60%; background-color: #d82128;"></div>
                                    </div>
                                    <span class="text-sm text-gray-600">3/9</span>
                                </div>
                            </td>
                            <td class="px-6 py-4">Australia</td>
                            <td class="px-6 py-4">
                                <span class="whitespace-nowrap inline-flex items-center px-2 py-1 text-xs font-medium bg-yellow-100 text-yellow-800 rounded-full">Under Review</span>
                            </td>
                            <td class="px-6 py-4 text-sm text-gray-500">2 hours ago</td>
                            <td class="px-6 py-4">
                                <span class="inline-flex items-center text-green-600">
                                    <i data-lucide="check-circle" class="w-4 h-4 mr-1"></i> Complete
                                </span>
                            </td>
                            <td class="px-6 py-4">
                                <div class="flex space-x-2">
                                    <button onclick="window.open('Agent-Application-details.html', '_blank')" class="text-red-400 hover:text-red-700 mr-3 group relative">
                                        <i data-lucide="eye" class="w-5 h-5"></i>
                                        <span class="invisible group-hover:visible absolute top-full left-1/2 transform -translate-x-1/2 mt-1 bg-gray-800 text-white text-xs rounded py-1 px-2 whitespace-nowrap">View Details</span>
                                    </button>
                                    <button class="text-red-400 hover:text-red-700 group relative">
                                        <i data-lucide="send" class="w-5 h-5"></i>
                                        <span class="invisible group-hover:visible absolute top-full left-1/2 transform -translate-x-1/2 mt-1 bg-gray-800 text-white text-xs rounded py-1 px-2 whitespace-nowrap">Send Reminder</span>
                                    </button>
                                </div>
                            </td>
                        </tr>
                        <!-- Sample Row 2 -->
                        <tr class="hover:bg-gray-50">
                            <td class="px-6 py-4">
                                <a href="Agent-Application-details.html" target="_blank" rel="noopener noreferrer" class="text-red-600 hover:text-red-800">DIRECT-USDC-SENSLMW100005</a>
                            </td>
                            <td class="px-6 py-4">
                                <a href="Agent-Application-details.html" target="_blank" rel="noopener noreferrer" class="text-red-600 hover:text-red-800">Mike Wong</a>
                            </td>
                            <td class="px-6 py-4 text-sm text-gray-900">John Smith</td>
                            <td class="px-6 py-4">Green Future Scholarship – Tiffin University</td>
                            <td class="px-6 py-4">
                                <div class="flex items-center space-x-2">
                                    <div class="flex-grow h-1.5 bg-gray-200 rounded-full overflow-hidden">
                                        <div class="h-full rounded-full" style="width: 40%; background-color: #d82128;"></div>
                                    </div>
                                    <span class="text-sm text-gray-600">2/9</span>
                                </div>
                            </td>
                            <td class="px-6 py-4">Australia</td>
                            <td class="px-6 py-4">
                                <span class="whitespace-nowrap inline-flex items-center px-2 py-1 text-xs font-medium bg-red-100 text-red-800 rounded-full">Missing Docs</span>
                            </td>
                            <td class="px-6 py-4 text-sm text-gray-500">1 day ago</td>
                            <td class="px-6 py-4">
                                <span class="inline-flex items-center text-red-600">
                                    <i data-lucide="alert-circle" class="w-4 h-4 mr-1"></i> 2 missing
                                </span>
                            </td>
                            <td class="px-6 py-4">
                                <div class="flex space-x-2">
                                    <button onclick="window.open('Agent-Application-details.html', '_blank')" class="text-red-400 hover:text-red-700 mr-3 group relative">
                                        <i data-lucide="eye" class="w-5 h-5"></i>
                                        <span class="invisible group-hover:visible absolute top-full left-1/2 transform -translate-x-1/2 mt-1 bg-gray-800 text-white text-xs rounded py-1 px-2 whitespace-nowrap">View Details</span>
                                    </button>
                                    <button class="text-red-400 hover:text-red-700 group relative">
                                        <i data-lucide="upload" class="w-5 h-5"></i>
                                        <span class="invisible group-hover:visible absolute top-full left-1/2 transform -translate-x-1/2 mt-1 bg-gray-800 text-white text-xs rounded py-1 px-2 whitespace-nowrap">Upload Documents</span>
                                    </button>
                                </div>
                            </td>
                        </tr>
                        <!-- Sample Row 3 -->
                        <tr class="hover:bg-gray-50">
                            <td class="px-6 py-4">
                                <a href="Agent-Application-details.html" target="_blank" rel="noopener noreferrer" class="text-red-600 hover:text-red-800">WA-VNHN-SENSLDK100006</a>
                            </td>
                            <td class="px-6 py-4">
                                <a href="Agent-Application-details.html" target="_blank" rel="noopener noreferrer" class="text-red-600 hover:text-red-800">David Kim</a>
                            </td>
                            <td class="px-6 py-4 text-sm text-gray-900">Emily Davis</td>
                            <td class="px-6 py-4">International Excellence Scholarship – Tiffin University</td>
                            <td class="px-6 py-4">
                                <div class="flex items-center space-x-2">
                                    <div class="flex-grow h-1.5 bg-gray-200 rounded-full overflow-hidden">
                                        <div class="h-full rounded-full" style="width: 70%; background-color: #d82128;"></div>
                                    </div>
                                    <span class="text-sm text-gray-600">5/9</span>
                                </div>
                            </td>
                            <td class="px-6 py-4">Canada</td>
                            <td class="px-6 py-4">
                                <span class="whitespace-nowrap inline-flex items-center px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full">In Review</span>
                            </td>
                            <td class="px-6 py-4 text-sm text-gray-500">5 hours ago</td>
                            <td class="px-6 py-4">
                                <span class="inline-flex items-center text-yellow-600">
                                    <i data-lucide="clock" class="w-4 h-4 mr-1"></i> Pending
                                </span>
                            </td>
                            <td class="px-6 py-4">
                                <div class="flex space-x-2">
                                    <button onclick="window.open('Agent-Application-details.html', '_blank')" class="text-red-400 hover:text-red-700 mr-3 group relative">
                                        <i data-lucide="eye" class="w-5 h-5"></i>
                                        <span class="invisible group-hover:visible absolute top-full left-1/2 transform -translate-x-1/2 mt-1 bg-gray-800 text-white text-xs rounded py-1 px-2 whitespace-nowrap">View Details</span>
                                    </button>
                                    <button class="text-red-400 hover:text-red-700 group relative">
                                        <i data-lucide="send" class="w-5 h-5"></i>
                                        <span class="invisible group-hover:visible absolute top-full left-1/2 transform -translate-x-1/2 mt-1 bg-gray-800 text-white text-xs rounded py-1 px-2 whitespace-nowrap">Send Reminder</span>
                                    </button>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        </div>

        <!-- Kanban Board View (new) -->
        <div id="board-view" class="hidden mt-6 px-6">
            <div class="overflow-x-auto">
                <div class="flex space-x-4 min-w-max pb-4">
                    <!-- Step 1: Initial Advising -->
                    <div class="flex-shrink-0 w-72">
                        <div class="bg-white rounded-2xl shadow-sm">
                            <div class="p-4 border-b border-gray-200">
                                <div class="flex items-center justify-between">
                                    <h3 class="font-semibold text-gray-900">Initial Advising</h3>
                                    <span id="count-initial_advising" class="text-sm text-gray-500 bg-gray-100 px-2 py-1 rounded-full">2</span>
                                </div>
                            </div>
                            <div id="col-initial_advising" class="p-4 space-y-3 min-h-96 dropzone" data-status="initial_advising">
                                <!-- Example Card -->
                                <div class="bg-gray-50 rounded-xl p-3 border border-gray-200 hover:shadow-md transition-shadow cursor-move" draggable="true" data-app-id="app-2" data-status="initial_advising">
                                    <div class="flex items-center justify-between mb-2">
                                        <a href="Agent-Application-details.html" target="_blank" rel="noopener noreferrer" class="font-medium text-sm text-red-600 hover:text-red-800">Mike Wong</a>
                                        <span class="status-badge text-xs px-2 py-1 rounded-full bg-gray-100 text-gray-800">Initial Advising</span>
                                    </div>
                                    <div class="text-xs text-gray-500 mb-1">Green Future Scholarship – Tiffin University</div>
                                    <div class="text-xs text-gray-400 mb-2">Agent: John Smith</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Step 2: Application In Progress -->
                    <div class="flex-shrink-0 w-72">
                        <div class="bg-white rounded-2xl shadow-sm">
                            <div class="p-4 border-b border-gray-200">
                                <div class="flex items-center justify-between">
                                    <h3 class="font-semibold text-gray-900">Application In Progress</h3>
                                    <span id="count-application_in_progress" class="text-sm text-gray-500 bg-gray-100 px-2 py-1 rounded-full">1</span>
                                </div>
                            </div>
                            <div id="col-application_in_progress" class="p-4 space-y-3 min-h-96 dropzone" data-status="application_in_progress">
                                <!-- Example Card -->
                                <div class="bg-gray-50 rounded-xl p-3 border border-gray-200 hover:shadow-md transition-shadow cursor-move" draggable="true" data-app-id="app-1" data-status="application_in_progress">
                                    <div class="flex items-center justify-between mb-2">
                                        <a href="Agent-Application-details.html" target="_blank" rel="noopener noreferrer" class="font-medium text-sm text-red-600 hover:text-red-800">Sarah Chen</a>
                                        <span class="status-badge text-xs px-2 py-1 rounded-full bg-red-100 text-red-800">Application In Progress</span>
                                    </div>
                                    <div class="text-xs text-gray-500 mb-1">Merit Scholarship – Tiffin University</div>
                                    <div class="text-xs text-gray-400 mb-2">Agent: John Smith</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Step 3: Submitted to School -->
                    <div class="flex-shrink-0 w-72">
                        <div class="bg-white rounded-2xl shadow-sm">
                            <div class="p-4 border-b border-gray-200">
                                <div class="flex items-center justify-between">
                                    <h3 class="font-semibold text-gray-900">Submitted to School</h3>
                                    <span id="count-submitted_to_school" class="text-sm text-gray-500 bg-gray-100 px-2 py-1 rounded-full">0</span>
                                </div>
                            </div>
                            <div id="col-submitted_to_school" class="p-4 space-y-3 min-h-96 dropzone" data-status="submitted_to_school"></div>
                        </div>
                    </div>

                    <!-- Step 4: School Response -->
                    <div class="flex-shrink-0 w-72">
                        <div class="bg-white rounded-2xl shadow-sm">
                            <div class="p-4 border-b border-gray-200">
                                <div class="flex items-center justify-between">
                                    <h3 class="font-semibold text-gray-900">School Response</h3>
                                    <span id="count-school_response" class="text-sm text-gray-500 bg-gray-100 px-2 py-1 rounded-full">0</span>
                                </div>
                            </div>
                            <div id="col-school_response" class="p-4 space-y-3 min-h-96 dropzone" data-status="school_response"></div>
                        </div>
                    </div>

                    <!-- Step 5: Offer Letter Issued -->
                    <div class="flex-shrink-0 w-72">
                        <div class="bg-white rounded-2xl shadow-sm">
                            <div class="p-4 border-b border-gray-200">
                                <div class="flex items-center justify-between">
                                    <h3 class="font-semibold text-gray-900">Offer Letter Issued</h3>
                                    <span id="count-offer_letter_issued" class="text-sm text-gray-500 bg-gray-100 px-2 py-1 rounded-full">1</span>
                                </div>
                            </div>
                            <div id="col-offer_letter_issued" class="p-4 space-y-3 min-h-96 dropzone" data-status="offer_letter_issued">
                                <!-- Example Card -->
                                <div class="bg-gray-50 rounded-xl p-3 border border-gray-200 hover:shadow-md transition-shadow cursor-move" draggable="true" data-app-id="app-3" data-status="offer_letter_issued">
                                    <div class="flex items-center justify-between mb-2">
                                        <a href="Agent-Application-details.html" target="_blank" rel="noopener noreferrer" class="font-medium text-sm text-red-600 hover:text-red-800">David Kim</a>
                                        <span class="status-badge text-xs px-2 py-1 rounded-full bg-purple-100 text-purple-800">Offer Letter Issued</span>
                                    </div>
                                    <div class="text-xs text-gray-500 mb-1">International Excellence Scholarship – Tiffin University</div>
                                    <div class="text-xs text-gray-400 mb-2">Agent: Emily Davis</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Step 6: Committed to School -->
                    <div class="flex-shrink-0 w-72">
                        <div class="bg-white rounded-2xl shadow-sm">
                            <div class="p-4 border-b border-gray-200">
                                <div class="flex items-center justify-between">
                                    <h3 class="font-semibold text-gray-900">Committed to School</h3>
                                    <span id="count-committed_to_school" class="text-sm text-gray-500 bg-gray-100 px-2 py-1 rounded-full">0</span>
                                </div>
                            </div>
                            <div id="col-committed_to_school" class="p-4 space-y-3 min-h-96 dropzone" data-status="committed_to_school"></div>
                        </div>
                    </div>

                    <!-- Step 7: Visa Application -->
                    <div class="flex-shrink-0 w-72">
                        <div class="bg-white rounded-2xl shadow-sm">
                            <div class="p-4 border-b border-gray-200">
                                <div class="flex items-center justify-between">
                                    <h3 class="font-semibold text-gray-900">Visa Application</h3>
                                    <span id="count-visa_application" class="text-sm text-gray-500 bg-gray-100 px-2 py-1 rounded-full">0</span>
                                </div>
                            </div>
                            <div id="col-visa_application" class="p-4 space-y-3 min-h-96 dropzone" data-status="visa_application"></div>
                        </div>
                    </div>

                    <!-- Step 8: Pre-Departure -->
                    <div class="flex-shrink-0 w-72">
                        <div class="bg-white rounded-2xl shadow-sm">
                            <div class="p-4 border-b border-gray-200">
                                <div class="flex items-center justify-between">
                                    <h3 class="font-semibold text-gray-900">Pre-Departure</h3>
                                    <span id="count-pre_departure" class="text-sm text-gray-500 bg-gray-100 px-2 py-1 rounded-full">0</span>
                                </div>
                            </div>
                            <div id="col-pre_departure" class="p-4 space-y-3 min-h-96 dropzone" data-status="pre_departure"></div>
                        </div>
                    </div>

                    <!-- Step 9: Arrival -->
                    <div class="flex-shrink-0 w-72">
                        <div class="bg-white rounded-2xl shadow-sm">
                            <div class="p-4 border-b border-gray-200">
                                <div class="flex items-center justify-between">
                                    <h3 class="font-semibold text-gray-900">Arrival</h3>
                                    <span id="count-arrival" class="text-sm text-gray-500 bg-gray-100 px-2 py-1 rounded-full">0</span>
                                </div>
                            </div>
                            <div id="col-arrival" class="p-4 space-y-3 min-h-96 dropzone" data-status="arrival"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script>
        // Simple View Toggle using Tailwind 'hidden' classes and multiple toggle buttons
        (function() {
            const table = document.getElementById('table-view');
            const board = document.getElementById('board-view');
            const buttons = document.querySelectorAll('.view-toggle');

            function setActive(isBoard) {
                if (!table || !board) return;
                if (isBoard) {
                    table.classList.add('hidden');
                    board.classList.remove('hidden');
                } else {
                    table.classList.remove('hidden');
                    board.classList.add('hidden');
                }
                // update button styles
                buttons.forEach(btn => {
                    const wantBoard = btn.getAttribute('data-view') === 'board';
                    btn.classList.toggle('bg-red-600', wantBoard === isBoard);
                    btn.classList.toggle('text-white', wantBoard === isBoard);
                    btn.classList.toggle('bg-gray-100', wantBoard !== isBoard);
                    btn.classList.toggle('text-gray-600', wantBoard !== isBoard);
                });
                localStorage.setItem('viewMode', isBoard ? 'board' : 'table');
            }

            // Set table view as default on page load
            document.addEventListener('DOMContentLoaded', function() {
                setActive(false); // This will show the table view by default
                
                // Bind click events for view toggle buttons
                buttons.forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        e.preventDefault();
                        const view = btn.getAttribute('data-view');
                        setActive(view === 'board');
                    });
                });
            });
        })();
        </script>

        <!-- DnD for Kanban Board -->
        <script>
        (function initKanbanDnD() {
            const boardRoot = document.getElementById('board-view');
            if (!boardRoot) return;

            const dropzones = boardRoot.querySelectorAll('.dropzone');
            const statusOrder = [
                'initial_advising',
                'application_in_progress',
                'submitted_to_school',
                'school_response',
                'offer_letter_issued',
                'committed_to_school',
                'visa_application',
                'pre_departure',
                'arrival'
            ];

            function updateCounts() {
                statusOrder.forEach(status => {
                    const col = document.getElementById(`col-${status}`);
                    const countSpan = document.getElementById(`count-${status}`);
                    if (col && countSpan) {
                        const count = col.querySelectorAll('[draggable="true"]').length;
                        countSpan.textContent = count;
                    }
                });
            }

            function updateBadgeAppearance(card, status) {
                const badge = card.querySelector('.status-badge');
                if (!badge) return;
                // reset
                badge.className = 'status-badge text-xs px-2 py-1 rounded-full';
                switch (status) {
                    case 'initial_advising':
                        badge.textContent = 'Initial Advising';
                        badge.classList.add('bg-gray-100','text-gray-800');
                        break;
                    case 'application_in_progress':
                        badge.textContent = 'Application In Progress';
                        badge.classList.add('bg-red-100','text-red-800');
                        break;
                    case 'submitted_to_school':
                        badge.textContent = 'Submitted to School';
                        badge.classList.add('bg-yellow-100','text-yellow-800');
                        break;
                    case 'school_response':
                        badge.textContent = 'School Response';
                        badge.classList.add('bg-amber-100','text-amber-800');
                        break;
                    case 'offer_letter_issued':
                        badge.textContent = 'Offer Letter Issued';
                        badge.classList.add('bg-purple-100','text-purple-800');
                        break;
                    case 'committed_to_school':
                        badge.textContent = 'Committed to School';
                        badge.classList.add('bg-indigo-100','text-indigo-800');
                        break;
                    case 'visa_application':
                        badge.textContent = 'Visa Application';
                        badge.classList.add('bg-teal-100','text-teal-800');
                        break;
                    case 'pre_departure':
                        badge.textContent = 'Pre-Departure';
                        badge.classList.add('bg-sky-100','text-sky-800');
                        break;
                    case 'arrival':
                        badge.textContent = 'Arrival';
                        badge.classList.add('bg-green-100','text-green-800');
                        break;
                }
            }

            let draggedCard = null;

            // Make existing cards draggable and bind events
            boardRoot.querySelectorAll('[draggable="true"]').forEach(card => {
                card.addEventListener('dragstart', (e) => {
                    draggedCard = card;
                    e.dataTransfer.effectAllowed = 'move';
                    setTimeout(() => card.classList.add('opacity-50'), 0);
                });
                card.addEventListener('dragend', () => {
                    if (draggedCard) draggedCard.classList.remove('opacity-50');
                    draggedCard = null;
                });
            });

            // Bind dropzones
            dropzones.forEach(zone => {
                zone.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    zone.classList.add('ring-2','ring-gray-300');
                    e.dataTransfer.dropEffect = 'move';
                });
                zone.addEventListener('dragleave', () => {
                    zone.classList.remove('ring-2','ring-gray-300');
                });
                zone.addEventListener('drop', (e) => {
                    e.preventDefault();
                    zone.classList.remove('ring-2','ring-gray-300');
                    if (!draggedCard) return;
                    // Move card
                    zone.appendChild(draggedCard);
                    const newStatus = zone.getAttribute('data-status');
                    draggedCard.setAttribute('data-status', newStatus);
                    updateBadgeAppearance(draggedCard, newStatus);
                    updateCounts();
                    updateCardActions(draggedCard);
                });
            });

            // Initialize counts on load
            updateCounts();
        })();
        </script>

        <script>
        // Function to update action buttons based on status
        function updateCardActions(card) {
            const status = card.getAttribute('data-status');
            let actionsHtml = `
                <button onclick="window.open('Agent-Application-details.html', '_blank')" class="text-red-400 hover:text-red-700 group relative">
                    <i data-lucide="eye" class="w-4 h-4"></i>
                    <span class="invisible group-hover:visible absolute top-full left-1/2 transform -translate-x-1/2 mt-1 bg-gray-800 text-white text-xs rounded py-1 px-2 whitespace-nowrap">View Details</span>
                </button>
                <button class="text-red-400 hover:text-red-700 group relative">
                    <i data-lucide="send" class="w-4 h-4"></i>
                    <span class="invisible group-hover:visible absolute top-full left-1/2 transform -translate-x-1/2 mt-1 bg-gray-800 text-white text-xs rounded py-1 px-2 whitespace-nowrap">Send Reminder</span>
                </button>`;

            // Add upload button only for specific statuses
            if (status === 'initial_advising' || status === 'school_response') {
                actionsHtml += `
                <button class="text-red-400 hover:text-red-700 group relative">
                    <i data-lucide="upload" class="w-4 h-4"></i>
                    <span class="invisible group-hover:visible absolute top-full left-1/2 transform -translate-x-1/2 mt-1 bg-gray-800 text-white text-xs rounded py-1 px-2 whitespace-nowrap">Upload Document</span>
                </button>`;
            }

            // Find or create actions container
            let actionsContainer = card.querySelector('.card-actions');
            if (!actionsContainer) {
                actionsContainer = document.createElement('div');
                actionsContainer.className = 'flex space-x-2 mt-2 card-actions';
                card.appendChild(actionsContainer);
            }
            actionsContainer.innerHTML = actionsHtml;
            
            // Refresh Lucide icons
            if (window.lucide) {
                window.lucide.createIcons();
            }
        }

        // Update existing cards
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('[draggable="true"]').forEach(updateCardActions);
        });
        </script>

    <script>
        // Initialize Lucide Icons
        lucide.createIcons();

        // Filter Drawer Functionality
        const filterToggle = document.getElementById('filter-toggle');
        const filterDrawer = document.getElementById('filter-drawer');
        const filterBackdrop = document.getElementById('filter-backdrop');
        const closeFilter = document.getElementById('close-filter');
        const applyFiltersBtn = document.getElementById('apply-filters');
        const resetFiltersBtn = document.getElementById('reset-filters');
        const studentSearch = document.getElementById('student-search');

        // Open drawer
        function openFilterDrawer() {
            filterDrawer.classList.remove('translate-x-full');
            filterBackdrop.classList.remove('opacity-0', 'pointer-events-none');
            filterBackdrop.classList.add('opacity-100');
            document.body.style.overflow = 'hidden';
        }

        // Close drawer
        function closeFilterDrawer() {
            filterDrawer.classList.add('translate-x-full');
            filterBackdrop.classList.add('opacity-0', 'pointer-events-none');
            filterBackdrop.classList.remove('opacity-100');
            document.body.style.overflow = '';
        }

        // Event Listeners
        if (filterToggle) filterToggle.addEventListener('click', openFilterDrawer);
        if (closeFilter) closeFilter.addEventListener('click', closeFilterDrawer);
        if (filterBackdrop) filterBackdrop.addEventListener('click', closeFilterDrawer);

        // Close with Escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeFilterDrawer();
            }
        });

        // Search functionality
        if (studentSearch) {
            studentSearch.addEventListener('input', (e) => {
                const searchTerm = e.target.value.toLowerCase();
                console.log('Searching for:', searchTerm);
                // Add your search/filter logic here
            });
        }

        // Apply filters
        if (applyFiltersBtn) {
            applyFiltersBtn.addEventListener('click', () => {
                // Get all filter values
                const filters = {
                    status: document.querySelector('#filter-drawer select:nth-of-type(1)').value,
                    country: document.querySelector('#filter-drawer select:nth-of-type(2)').value,
                    programLevel: document.querySelector('#filter-drawer select:nth-of-type(3)').value,
                    intake: document.querySelector('#filter-drawer select:nth-of-type(4)').value
                };
                
                console.log('Applying filters:', filters);
                closeFilterDrawer();
                showToast('Filters applied successfully', 'success');
            });
        }

        // Reset filters
        if (resetFiltersBtn) {
            resetFiltersBtn.addEventListener('click', () => {
                const selects = filterDrawer.querySelectorAll('select');
                selects.forEach(select => {
                    select.selectedIndex = 0; // Reset to first option
                });
                showToast('Filters reset', 'info');
            });
        }

        // Show toast notification
        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            const bgColor = type === 'success' ? 'bg-green-500' : 'bg-blue-500';
            
            toast.className = `fixed top-4 right-4 ${bgColor} text-white px-6 py-3 rounded-lg shadow-lg z-50 transform translate-x-full transition-transform duration-300`;
            toast.textContent = message;

            document.body.appendChild(toast);

            // Slide in
            setTimeout(() => {
                toast.classList.remove('translate-x-full');
            }, 100);

            // Slide out and remove
            setTimeout(() => {
                toast.classList.add('translate-x-full');
                setTimeout(() => {
                    if (document.body.contains(toast)) {
                        document.body.removeChild(toast);
                    }
                }, 300);
            }, 3000);
        }

        // Application Modal
        const applicationModal = document.getElementById('application-modal');

        function closeApplicationModal() {
            applicationModal.classList.add('hidden');
        }

        // Close modal when clicking outside
        applicationModal.addEventListener('click', (e) => {
            if (e.target === applicationModal) {
                closeApplicationModal();
            }
        });

        // Handle status filter changes
        document.getElementById('status-filter').addEventListener('change', (e) => {
            console.log('Filter by status:', e.target.value);
            // Here you would typically filter the table
        });

        // Handle missing documents filter
        document.getElementById('missing-docs-only').addEventListener('change', (e) => {
            console.log('Show missing documents only:', e.target.checked);
            // Here you would typically filter the table
        });

        // Profile Dropdown
        const profileMenu = document.getElementById('profile-menu');
        const profileDropdown = document.getElementById('profile-dropdown');

        document.addEventListener('DOMContentLoaded', function() {
            // Toggle dropdown on profile button click
            profileMenu.addEventListener('click', function(e) {
                e.stopPropagation();
                profileDropdown.classList.toggle('hidden');
            });

            // Close dropdown when clicking outside
            document.addEventListener('click', function(e) {
                if (!profileMenu.contains(e.target) && !profileDropdown.contains(e.target)) {
                    profileDropdown.classList.add('hidden');
                }
            });
        });

        function handleLogout() {
            // Add your logout logic here
            console.log('Logging out...');
            // window.location.href = 'login.html'; // Uncomment this to redirect to login page
        }

        // Task Management Functions
        function completeTask(taskId) {
            // Here you would typically make an API call to mark the task as complete
            const taskElement = event.target.closest('.flex');
            if (taskElement) {
                taskElement.style.opacity = '0.5';
                event.target.textContent = 'Completed';
                event.target.disabled = true;
                // Re-check the related application step
                checkApplicationStep(taskId);
            }
        }

        function checkApplicationStep(taskId) {
            // Simulate checking the application step
            console.log(`Checking application step related to task ${taskId}`);
            // Here you would make an API call to verify if the step conditions are met
        }

        function sendReminder() {
            // Simulate sending a reminder
            alert('Reminder sent to student');
            // Here you would make an API call to send the reminder
        }

        function uploadDocument() {
            // Simulate document upload
            const input = document.createElement('input');
            input.type = 'file';
            input.onchange = (e) => {
                const file = e.target.files[0];
                if (file) {
                    // Here you would make an API call to upload the document
                    alert(`Document ${file.name} selected for upload`);
                }
            };
            input.click();
        }

        function addNote() {
            // Simulate adding a note
            const note = prompt('Enter your note:');
            if (note) {
                // Here you would make an API call to save the note
                alert('Note added successfully');
            }
        }

        // AI Assistant Chat Toggle
        const aiChatToggle = document.getElementById('ai-chat-toggle');
        const aiChatPanel = document.getElementById('ai-chat-panel');
        const aiChatClose = document.getElementById('ai-chat-close');

        aiChatToggle.addEventListener('click', () => {
            aiChatPanel.classList.toggle('hidden');
        });

        aiChatClose.addEventListener('click', () => {
            aiChatPanel.classList.add('hidden');
        });

        // Close chat panel when clicking outside
        document.addEventListener('click', (e) => {
            const aiAssistant = document.getElementById('ai-assistant');
            if (!aiAssistant.contains(e.target)) {
                aiChatPanel.classList.add('hidden');
            }
        });
    </script>
</body>
